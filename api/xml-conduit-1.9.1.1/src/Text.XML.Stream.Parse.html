<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns               #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE CPP                        #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable         #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE DeriveFunctor              #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts           #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances          #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings          #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE PatternGuards              #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes                 #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE StandaloneDeriving         #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies               #-}</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- | This module provides both a native Haskell solution for parsing XML</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- documents into a stream of events, and a set of parser combinators for</span><span>
</span><span id="line-15"></span><span class="hs-comment">-- dealing with a stream of events.</span><span>
</span><span id="line-16"></span><span class="hs-comment">--</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- As a simple example:</span><span>
</span><span id="line-18"></span><span class="hs-comment">--</span><span>
</span><span id="line-19"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XOverloadedStrings</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- &gt;&gt;&gt; import Conduit (runConduit, (.|))</span><span>
</span><span id="line-21"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Text (Text, unpack)</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.XML.Types (Event)</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- &gt;&gt;&gt; data Person = Person Int Text Text deriving Show</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-25"></span><span class="hs-comment">-- let parsePerson :: MonadThrow m =&gt; ConduitT Event o m (Maybe Person)</span><span>
</span><span id="line-26"></span><span class="hs-comment">--     parsePerson = tag' &quot;person&quot; parseAttributes $ \(age, goodAtHaskell) -&gt; do</span><span>
</span><span id="line-27"></span><span class="hs-comment">--       name &lt;- content</span><span>
</span><span id="line-28"></span><span class="hs-comment">--       return $ Person (read $ unpack age) name goodAtHaskell</span><span>
</span><span id="line-29"></span><span class="hs-comment">--       where parseAttributes = (,) &lt;$&gt; requireAttr &quot;age&quot; &lt;*&gt; requireAttr &quot;goodAtHaskell&quot; &lt;* ignoreAttrs</span><span>
</span><span id="line-30"></span><span class="hs-comment">--     parsePeople :: MonadThrow m =&gt; ConduitT Event o m (Maybe [Person])</span><span>
</span><span id="line-31"></span><span class="hs-comment">--     parsePeople = tagNoAttr &quot;people&quot; $ many parsePerson</span><span>
</span><span id="line-32"></span><span class="hs-comment">--     inputXml = mconcat</span><span>
</span><span id="line-33"></span><span class="hs-comment">--       [ &quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot;?&gt;&quot;</span><span>
</span><span id="line-34"></span><span class="hs-comment">--       , &quot;&lt;people&gt;&quot;</span><span>
</span><span id="line-35"></span><span class="hs-comment">--       , &quot;  &lt;person age=\&quot;25\&quot; goodAtHaskell=\&quot;yes\&quot;&gt;Michael&lt;/person&gt;&quot;</span><span>
</span><span id="line-36"></span><span class="hs-comment">--       , &quot;  &lt;person age=\&quot;2\&quot; goodAtHaskell=\&quot;might become\&quot;&gt;Eliezer&lt;/person&gt;&quot;</span><span>
</span><span id="line-37"></span><span class="hs-comment">--       , &quot;&lt;/people&gt;&quot;</span><span>
</span><span id="line-38"></span><span class="hs-comment">--       ]</span><span>
</span><span id="line-39"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-40"></span><span class="hs-comment">--</span><span>
</span><span id="line-41"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def inputXml .| force &quot;people required&quot; parsePeople</span><span>
</span><span id="line-42"></span><span class="hs-comment">-- [Person 25 &quot;Michael&quot; &quot;yes&quot;,Person 2 &quot;Eliezer&quot; &quot;might become&quot;]</span><span>
</span><span id="line-43"></span><span class="hs-comment">--</span><span>
</span><span id="line-44"></span><span class="hs-comment">--</span><span>
</span><span id="line-45"></span><span class="hs-comment">-- This module also supports streaming results using 'yield'.</span><span>
</span><span id="line-46"></span><span class="hs-comment">-- This allows parser results to be processed using conduits</span><span>
</span><span id="line-47"></span><span class="hs-comment">-- while a particular parser (e.g. 'many') is still running.</span><span>
</span><span id="line-48"></span><span class="hs-comment">-- Without using streaming results, you have to wait until the parser finished</span><span>
</span><span id="line-49"></span><span class="hs-comment">-- before you can process the result list. Large XML files might be easier</span><span>
</span><span id="line-50"></span><span class="hs-comment">-- to process by using streaming results.</span><span>
</span><span id="line-51"></span><span class="hs-comment">-- See http://stackoverflow.com/q/21367423/2597135 for a related discussion.</span><span>
</span><span id="line-52"></span><span class="hs-comment">--</span><span>
</span><span id="line-53"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Conduit.List as CL</span><span>
</span><span id="line-54"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-55"></span><span class="hs-comment">-- let parsePeople' :: MonadThrow m =&gt; ConduitT Event Person m (Maybe ())</span><span>
</span><span id="line-56"></span><span class="hs-comment">--     parsePeople' = tagNoAttr &quot;people&quot; $ manyYield parsePerson</span><span>
</span><span id="line-57"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-58"></span><span class="hs-comment">--</span><span>
</span><span id="line-59"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def inputXml .| force &quot;people required&quot; parsePeople' .| CL.mapM_ print</span><span>
</span><span id="line-60"></span><span class="hs-comment">-- Person 25 &quot;Michael&quot; &quot;yes&quot;</span><span>
</span><span id="line-61"></span><span class="hs-comment">-- Person 2 &quot;Eliezer&quot; &quot;might become&quot;</span><span>
</span><span id="line-62"></span><span class="hs-comment">--</span><span>
</span><span id="line-63"></span><span class="hs-comment">-- Previous versions of this module contained a number of more sophisticated</span><span>
</span><span id="line-64"></span><span class="hs-comment">-- functions written by Aristid Breitkreuz and Dmitry Olshansky. To keep this</span><span>
</span><span id="line-65"></span><span class="hs-comment">-- package simpler, those functions are being moved to a separate package. This</span><span>
</span><span id="line-66"></span><span class="hs-comment">-- note will be updated with the name of the package(s) when available.</span><span>
</span><span id="line-67"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Text.XML.Stream.Parse</span><span>
</span><span id="line-68"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Parsing XML files</span></span><span>
</span><span id="line-69"></span><span>      </span><span class="annot"><a href="Text.XML.Stream.Parse.html#parseBytes"><span class="hs-identifier">parseBytes</span></a></span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#parseBytesPos"><span class="hs-identifier">parseBytesPos</span></a></span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#parseText"><span class="hs-identifier">parseText</span></a></span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#parseTextPos"><span class="hs-identifier">parseTextPos</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#detectUtf"><span class="hs-identifier">detectUtf</span></a></span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#parseFile"><span class="hs-identifier">parseFile</span></a></span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#parseLBS"><span class="hs-identifier">parseLBS</span></a></span><span>
</span><span id="line-76"></span><span>      </span><span class="annot"><span class="hs-comment">-- ** Parser settings</span></span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier">ParseSettings</span></a></span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">def</span></span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#DecodeEntities"><span class="hs-identifier">DecodeEntities</span></a></span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#DecodeIllegalCharacters"><span class="hs-identifier">DecodeIllegalCharacters</span></a></span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#psDecodeEntities"><span class="hs-identifier">psDecodeEntities</span></a></span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#psDecodeIllegalCharacters"><span class="hs-identifier">psDecodeIllegalCharacters</span></a></span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#psRetainNamespaces"><span class="hs-identifier">psRetainNamespaces</span></a></span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#psEntityExpansionSizeLimit"><span class="hs-identifier">psEntityExpansionSizeLimit</span></a></span><span>
</span><span id="line-85"></span><span>      </span><span class="annot"><span class="hs-comment">-- *** Entity decoding</span></span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#decodeXmlEntities"><span class="hs-identifier">decodeXmlEntities</span></a></span><span>
</span><span id="line-87"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#decodeHtmlEntities"><span class="hs-identifier">decodeHtmlEntities</span></a></span><span>
</span><span id="line-88"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Event parsing</span></span><span>
</span><span id="line-89"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#tag"><span class="hs-identifier">tag</span></a></span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#tag%27"><span class="hs-identifier">tag'</span></a></span><span>
</span><span id="line-91"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#tagNoAttr"><span class="hs-identifier">tagNoAttr</span></a></span><span>
</span><span id="line-92"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#tagIgnoreAttrs"><span class="hs-identifier">tagIgnoreAttrs</span></a></span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#content"><span class="hs-identifier">content</span></a></span><span>
</span><span id="line-94"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#contentMaybe"><span class="hs-identifier">contentMaybe</span></a></span><span>
</span><span id="line-95"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Ignoring tags/trees</span></span><span>
</span><span id="line-96"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ignoreEmptyTag"><span class="hs-identifier">ignoreEmptyTag</span></a></span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ignoreTree"><span class="hs-identifier">ignoreTree</span></a></span><span>
</span><span id="line-98"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ignoreContent"><span class="hs-identifier">ignoreContent</span></a></span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ignoreTreeContent"><span class="hs-identifier">ignoreTreeContent</span></a></span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ignoreAnyTreeContent"><span class="hs-identifier">ignoreAnyTreeContent</span></a></span><span>
</span><span id="line-101"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Streaming events</span></span><span>
</span><span id="line-102"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#takeContent"><span class="hs-identifier">takeContent</span></a></span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#takeTree"><span class="hs-identifier">takeTree</span></a></span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#takeTreeContent"><span class="hs-identifier">takeTreeContent</span></a></span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#takeAnyTreeContent"><span class="hs-identifier">takeAnyTreeContent</span></a></span><span>
</span><span id="line-106"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Tag name matching</span></span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier">NameMatcher</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#matching"><span class="hs-identifier">matching</span></a></span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#anyOf"><span class="hs-identifier">anyOf</span></a></span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#anyName"><span class="hs-identifier">anyName</span></a></span><span>
</span><span id="line-111"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Attribute parsing</span></span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier">AttrParser</span></a></span><span>
</span><span id="line-113"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#attr"><span class="hs-identifier">attr</span></a></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#requireAttr"><span class="hs-identifier">requireAttr</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#optionalAttr"><span class="hs-identifier">optionalAttr</span></a></span><span>
</span><span id="line-116"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#requireAttrRaw"><span class="hs-identifier">requireAttrRaw</span></a></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#optionalAttrRaw"><span class="hs-identifier">optionalAttrRaw</span></a></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ignoreAttrs"><span class="hs-identifier">ignoreAttrs</span></a></span><span>
</span><span id="line-119"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Combinators</span></span><span>
</span><span id="line-120"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#orE"><span class="hs-identifier">orE</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#choose"><span class="hs-identifier">choose</span></a></span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#many"><span class="hs-identifier">many</span></a></span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#many_"><span class="hs-identifier">many_</span></a></span><span>
</span><span id="line-124"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#manyIgnore"><span class="hs-identifier">manyIgnore</span></a></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#many%27"><span class="hs-identifier">many'</span></a></span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#force"><span class="hs-identifier">force</span></a></span><span>
</span><span id="line-127"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Streaming combinators</span></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#manyYield"><span class="hs-identifier">manyYield</span></a></span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#manyYield%27"><span class="hs-identifier">manyYield'</span></a></span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#manyIgnoreYield"><span class="hs-identifier">manyIgnoreYield</span></a></span><span>
</span><span id="line-131"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Exceptions</span></span><span>
</span><span id="line-132"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#XmlException"><span class="hs-identifier">XmlException</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>      </span><span class="annot"><span class="hs-comment">-- * Other types</span></span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">PositionRange</span></span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#EventPos"><span class="hs-identifier">EventPos</span></a></span><span>
</span><span id="line-136"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-137"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Conduit</span></span><span>
</span><span id="line-138"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Alternative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">empty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&lt;|&gt;)</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-139"></span><span>                                               </span><span class="annot"><span class="hs-identifier">Applicative</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&lt;$&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span>          </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">A</span></span><span>
</span><span id="line-141"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Arrow</span></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(***)</span></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Exception</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SomeException</span></span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ap</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">liftM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">void</span></span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Fix</span></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fix</span></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Class</span></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">liftIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Class</span></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">lift</span></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Maybe</span></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MaybeT</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Resource</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadResource</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MonadThrow</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>                                               </span><span class="annot"><span class="hs-identifier">throwM</span></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Attoparsec.Text</span></span><span>         </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Parser</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">anyChar</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">char</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">manyTill</span></span><span class="hs-special">,</span><span>
</span><span id="line-151"></span><span>                                               </span><span class="annot"><span class="hs-identifier">skipWhile</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">string</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">takeWhile</span></span><span class="hs-special">,</span><span>
</span><span id="line-152"></span><span>                                               </span><span class="annot"><span class="hs-identifier">takeWhile1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&lt;?&gt;)</span></span><span class="hs-special">,</span><span>
</span><span id="line-153"></span><span>                                               </span><span class="annot"><span class="hs-identifier">notInClass</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">skipMany</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">skipMany1</span></span><span class="hs-special">,</span><span>
</span><span id="line-154"></span><span>                                               </span><span class="annot"><span class="hs-identifier">satisfy</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">peekChar</span></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Attoparsec.Text</span></span><span>         </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">AT</span></span><span>
</span><span id="line-156"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span>              </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-157"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span>         </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-158"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Builder</span></span><span>      </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Builder</span></span><span>
</span><span id="line-159"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Char</span></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">isSpace</span></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Conduit.Attoparsec</span></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">PositionRange</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">conduitParser</span></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Conduit.Text</span></span><span>            </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CT</span></span><span>
</span><span id="line-162"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Default.Class</span></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Default</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">foldl'</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">intercalate</span></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span>                     </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-165"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isNothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">mapMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.String</span></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IsString</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">pack</span></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span>                    </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-169"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span>           </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">decodeUtf8With</span></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding.Error</span></span><span>     </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">lenientDecode</span></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.XML.Types</span></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Content</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Event</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-173"></span><span>                                               </span><span class="annot"><span class="hs-identifier">ExternalID</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-174"></span><span>                                               </span><span class="annot"><span class="hs-identifier">Instruction</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Name</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span>                      </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">takeWhile</span></span><span class="hs-special">)</span><span>
</span><span id="line-176"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Text.XML.Stream.Token.html"><span class="hs-identifier">Text.XML.Stream.Token</span></a></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="hs-comment">-- $setup</span><span>
</span><span id="line-179"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XOverloadedStrings</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- &gt;&gt;&gt; import Conduit</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- &gt;&gt;&gt; import Control.Monad (void, join)</span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span class="hs-keyword">type</span><span> </span><span id="EntityTable"><span class="annot"><a href="Text.XML.Stream.Parse.html#EntityTable"><span class="hs-identifier hs-var">EntityTable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#tokenToEvent"><span class="hs-identifier hs-type">tokenToEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#EntityTable"><span class="hs-identifier hs-type">EntityTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Text.XML.Stream.Token.html#NSLevel"><span class="hs-identifier hs-type">NSLevel</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Token.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Parse.html#EntityTable"><span class="hs-identifier hs-type">EntityTable</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Text.XML.Stream.Token.html#NSLevel"><span class="hs-identifier hs-type">NSLevel</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span id="tokenToEvent"><span class="annot"><span class="annottext">tokenToEvent :: ParseSettings
-&gt; EntityTable
-&gt; [NSLevel]
-&gt; Token
-&gt; (EntityTable, [NSLevel], [Event])
</span><a href="Text.XML.Stream.Parse.html#tokenToEvent"><span class="hs-identifier hs-var hs-var">tokenToEvent</span></a></span></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679093689"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093689"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621679093688"><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093688"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TokenXMLDeclaration"><span class="hs-identifier hs-type">TokenXMLDeclaration</span></a></span><span> </span><span class="annot"><span class="annottext">[TAttribute]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093689"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093688"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#tokenToEvent"><span class="hs-identifier hs-var">tokenToEvent</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679093686"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093686"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621679093685"><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093685"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TokenInstruction"><span class="hs-identifier hs-type">TokenInstruction</span></a></span><span> </span><span id="local-6989586621679093683"><span class="annot"><span class="annottext">Instruction
</span><a href="#local-6989586621679093683"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093686"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093685"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Instruction -&gt; Event
</span><span class="hs-identifier hs-var">EventInstruction</span></span><span> </span><span class="annot"><span class="annottext">Instruction
</span><a href="#local-6989586621679093683"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-188"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#tokenToEvent"><span class="hs-identifier hs-var">tokenToEvent</span></a></span><span> </span><span id="local-6989586621679093681"><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093681"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679093680"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093680"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621679093679"><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093679"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TokenBeginElement"><span class="hs-identifier hs-type">TokenBeginElement</span></a></span><span> </span><span id="local-6989586621679093677"><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093677"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679093676"><span class="annot"><span class="annottext">[TAttribute]
</span><a href="#local-6989586621679093676"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span id="local-6989586621679093675"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093675"><span class="hs-identifier hs-var">isClosed</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-189"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093680"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093674"><span class="hs-identifier hs-var">n'</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093675"><span class="hs-identifier hs-var">isClosed</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093673"><span class="hs-identifier hs-var">begin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093672"><span class="hs-identifier hs-var">end</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093673"><span class="hs-identifier hs-var">begin</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-191"></span><span>    </span><span id="local-6989586621679093671"><span class="annot"><span class="annottext">l0 :: NSLevel
</span><a href="#local-6989586621679093671"><span class="hs-identifier hs-var hs-var">l0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093679"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-192"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; Map Text Text -&gt; NSLevel
</span><a href="Text.XML.Stream.Token.html#NSLevel"><span class="hs-identifier hs-var">NSLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Map Text Text
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-193"></span><span>            </span><span id="local-6989586621679093668"><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093668"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[NSLevel]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093668"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679093667"><span class="annot"><span class="annottext">[TAttribute] -&gt; [TAttribute]
</span><a href="#local-6989586621679093667"><span class="hs-identifier hs-var">as'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093666"><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093666"><span class="hs-identifier hs-var">l'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(([TAttribute] -&gt; [TAttribute], NSLevel)
 -&gt; TAttribute -&gt; ([TAttribute] -&gt; [TAttribute], NSLevel))
-&gt; ([TAttribute] -&gt; [TAttribute], NSLevel)
-&gt; [TAttribute]
-&gt; ([TAttribute] -&gt; [TAttribute], NSLevel)
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="annot"><span class="annottext">([TAttribute] -&gt; [TAttribute], NSLevel)
-&gt; TAttribute -&gt; ([TAttribute] -&gt; [TAttribute], NSLevel)
</span><a href="#local-6989586621679093665"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TAttribute] -&gt; [TAttribute]
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093671"><span class="hs-identifier hs-var">l0</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TAttribute]
</span><a href="#local-6989586621679093676"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-195"></span><span>    </span><span id="local-6989586621679093665"><span class="annot"><span class="annottext">go :: ([TAttribute] -&gt; [TAttribute], NSLevel)
-&gt; TAttribute -&gt; ([TAttribute] -&gt; [TAttribute], NSLevel)
</span><a href="#local-6989586621679093665"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679093663"><span class="annot"><span class="annottext">[TAttribute] -&gt; [TAttribute]
</span><a href="#local-6989586621679093663"><span class="hs-identifier hs-var">front</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093662"><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093662"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TName"><span class="hs-identifier hs-type">TName</span></a></span><span> </span><span id="local-6989586621679093660"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679093660"><span class="hs-identifier hs-var">kpref</span></a></span></span><span> </span><span id="local-6989586621679093659"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093659"><span class="hs-identifier hs-var">kname</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093658"><span class="annot"><span class="annottext">[Content]
</span><a href="#local-6989586621679093658"><span class="hs-identifier hs-var">val</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-196"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([TAttribute] -&gt; [TAttribute]) -&gt; [TAttribute] -&gt; [TAttribute]
</span><a href="#local-6989586621679093657"><span class="hs-identifier hs-var">addNS</span></a></span><span> </span><span class="annot"><span class="annottext">[TAttribute] -&gt; [TAttribute]
</span><a href="#local-6989586621679093663"><span class="hs-identifier hs-var">front</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093656"><span class="hs-identifier hs-var">l''</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-198"></span><span>        </span><span id="local-6989586621679093655"><span class="annot"><span class="annottext">isPrefixed :: Bool
</span><a href="#local-6989586621679093655"><span class="hs-identifier hs-var hs-var">isPrefixed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679093660"><span class="hs-identifier hs-var">kpref</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; Maybe Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;xmlns&quot;</span></span><span>
</span><span id="line-199"></span><span>        </span><span id="local-6989586621679093654"><span class="annot"><span class="annottext">isUnprefixed :: Bool
</span><a href="#local-6989586621679093654"><span class="hs-identifier hs-var hs-var">isUnprefixed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isNothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679093660"><span class="hs-identifier hs-var">kpref</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093659"><span class="hs-identifier hs-var">kname</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;xmlns&quot;</span></span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span>        </span><span id="local-6989586621679093657"><span class="annot"><span class="annottext">addNS :: ([TAttribute] -&gt; [TAttribute]) -&gt; [TAttribute] -&gt; [TAttribute]
</span><a href="#local-6989586621679093657"><span class="hs-identifier hs-var hs-var">addNS</span></a></span></span><span>
</span><span id="line-202"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParseSettings -&gt; Bool
</span><a href="Text.XML.Stream.Parse.html#psRetainNamespaces"><span class="hs-identifier hs-var hs-var">psRetainNamespaces</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093681"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093655"><span class="hs-identifier hs-var">isPrefixed</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093654"><span class="hs-identifier hs-var">isUnprefixed</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([TAttribute] -&gt; [TAttribute]) -&gt; [TAttribute] -&gt; [TAttribute]
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-203"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093650"><span class="hs-identifier hs-var">tname</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ParseSettings -&gt; EntityTable -&gt; [Content] -&gt; [Content]
</span><a href="#local-6989586621679093649"><span class="hs-identifier hs-var">resolveEntities'</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093681"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093680"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">[Content]
</span><a href="#local-6989586621679093658"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">TAttribute -&gt; [TAttribute] -&gt; [TAttribute]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([TAttribute] -&gt; [TAttribute])
-&gt; ([TAttribute] -&gt; [TAttribute]) -&gt; [TAttribute] -&gt; [TAttribute]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-205"></span><span>            </span><span id="local-6989586621679093649"><span class="annot"><span class="annottext">resolveEntities' :: ParseSettings -&gt; EntityTable -&gt; [Content] -&gt; [Content]
</span><a href="#local-6989586621679093649"><span class="hs-identifier hs-var hs-var">resolveEntities'</span></a></span></span><span> </span><span id="local-6989586621679093647"><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093647"><span class="hs-identifier hs-var">ps'</span></a></span></span><span> </span><span id="local-6989586621679093646"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093646"><span class="hs-identifier hs-var">es'</span></a></span></span><span> </span><span id="local-6989586621679093645"><span class="annot"><span class="annottext">[Content]
</span><a href="#local-6989586621679093645"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-206"></span><span>              </span><span class="annot"><span class="annottext">(Token -&gt; Maybe Content) -&gt; [Token] -&gt; [Content]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">Token -&gt; Maybe Content
</span><a href="#local-6989586621679093644"><span class="hs-identifier hs-var">extractTokenContent</span></a></span><span>
</span><span id="line-207"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParseSettings -&gt; EntityTable -&gt; [Token] -&gt; [Token]
</span><a href="Text.XML.Stream.Parse.html#resolveEntities"><span class="hs-identifier hs-var">resolveEntities</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093647"><span class="hs-identifier hs-var">ps'</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093646"><span class="hs-identifier hs-var">es'</span></a></span><span>
</span><span id="line-208"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Content -&gt; Token) -&gt; [Content] -&gt; [Token]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Content -&gt; Token
</span><a href="Text.XML.Stream.Token.html#TokenContent"><span class="hs-identifier hs-var">TokenContent</span></a></span><span> </span><span class="annot"><span class="annottext">[Content]
</span><a href="#local-6989586621679093645"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>            </span><span id="local-6989586621679093644"><span class="annot"><span class="annottext">extractTokenContent :: Token -&gt; Maybe Content
</span><a href="#local-6989586621679093644"><span class="hs-identifier hs-var hs-var">extractTokenContent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TokenContent"><span class="hs-identifier hs-type">TokenContent</span></a></span><span> </span><span id="local-6989586621679093641"><span class="annot"><span class="annottext">Content
</span><a href="#local-6989586621679093641"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Content -&gt; Maybe Content
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Content
</span><a href="#local-6989586621679093641"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-210"></span><span>            </span><span class="annot"><a href="#local-6989586621679093644"><span class="hs-identifier hs-var">extractTokenContent</span></a></span><span> </span><span class="annot"><span class="annottext">Token
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Content
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-211"></span><span>
</span><span id="line-212"></span><span>            </span><span id="local-6989586621679093650"><span class="annot"><span class="annottext">tname :: TName
</span><a href="#local-6989586621679093650"><span class="hs-identifier hs-var hs-var">tname</span></a></span></span><span>
</span><span id="line-213"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093655"><span class="hs-identifier hs-var">isPrefixed</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; Text -&gt; TName
</span><a href="Text.XML.Stream.Token.html#TName"><span class="hs-identifier hs-var">TName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;xmlns:&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
</span><span class="hs-operator hs-var">`T.append`</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093659"><span class="hs-identifier hs-var">kname</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>                </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; Text -&gt; TName
</span><a href="Text.XML.Stream.Token.html#TName"><span class="hs-identifier hs-var">TName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679093660"><span class="hs-identifier hs-var">kpref</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093659"><span class="hs-identifier hs-var">kname</span></a></span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span>        </span><span id="local-6989586621679093656"><span class="annot"><span class="annottext">l'' :: NSLevel
</span><a href="#local-6989586621679093656"><span class="hs-identifier hs-var hs-var">l''</span></a></span></span><span>
</span><span id="line-217"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093655"><span class="hs-identifier hs-var">isPrefixed</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-218"></span><span>                </span><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093662"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">prefixes :: Map Text Text
</span><a href="Text.XML.Stream.Token.html#prefixes"><span class="hs-identifier hs-var">prefixes</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Map Text Text -&gt; Map Text Text
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093659"><span class="hs-identifier hs-var">kname</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Content] -&gt; Text
</span><a href="Text.XML.Stream.Parse.html#contentsToText"><span class="hs-identifier hs-var">contentsToText</span></a></span><span> </span><span class="annot"><span class="annottext">[Content]
</span><a href="#local-6989586621679093658"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>                                     </span><span class="annot"><span class="annottext">(Map Text Text -&gt; Map Text Text) -&gt; Map Text Text -&gt; Map Text Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NSLevel -&gt; Map Text Text
</span><a href="Text.XML.Stream.Token.html#prefixes"><span class="hs-identifier hs-var hs-var">prefixes</span></a></span><span> </span><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093662"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-220"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093654"><span class="hs-identifier hs-var">isUnprefixed</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-221"></span><span>                </span><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093662"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">defaultNS :: Maybe Text
</span><a href="Text.XML.Stream.Token.html#defaultNS"><span class="hs-identifier hs-var">defaultNS</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Bool
</span><span class="hs-identifier hs-var">T.null</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Bool) -&gt; Text -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Content] -&gt; Text
</span><a href="Text.XML.Stream.Parse.html#contentsToText"><span class="hs-identifier hs-var">contentsToText</span></a></span><span> </span><span class="annot"><span class="annottext">[Content]
</span><a href="#local-6989586621679093658"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-222"></span><span>                                            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-223"></span><span>                                            </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Maybe Text) -&gt; Text -&gt; Maybe Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Content] -&gt; Text
</span><a href="Text.XML.Stream.Parse.html#contentsToText"><span class="hs-identifier hs-var">contentsToText</span></a></span><span> </span><span class="annot"><span class="annottext">[Content]
</span><a href="#local-6989586621679093658"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-224"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093662"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span>    </span><span id="local-6989586621679093674"><span class="annot"><span class="annottext">n' :: [NSLevel]
</span><a href="#local-6989586621679093674"><span class="hs-identifier hs-var hs-var">n'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093675"><span class="hs-identifier hs-var">isClosed</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093679"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093666"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="annot"><span class="annottext">NSLevel -&gt; [NSLevel] -&gt; [NSLevel]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093679"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-227"></span><span>    </span><span id="local-6989586621679093634"><span class="annot"><span class="annottext">fixAttName :: TAttribute -&gt; (Name, [Content])
</span><a href="#local-6989586621679093634"><span class="hs-identifier hs-var hs-var">fixAttName</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679093633"><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093633"><span class="hs-identifier hs-var">name'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093632"><span class="annot"><span class="annottext">[Content]
</span><a href="#local-6989586621679093632"><span class="hs-identifier hs-var">val</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; NSLevel -&gt; TName -&gt; Name
</span><a href="Text.XML.Stream.Parse.html#tnameToName"><span class="hs-identifier hs-var">tnameToName</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093666"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093633"><span class="hs-identifier hs-var">name'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Content]
</span><a href="#local-6989586621679093632"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>    </span><span id="local-6989586621679093630"><span class="annot"><span class="annottext">elementName :: Name
</span><a href="#local-6989586621679093630"><span class="hs-identifier hs-var hs-var">elementName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; NSLevel -&gt; TName -&gt; Name
</span><a href="Text.XML.Stream.Parse.html#tnameToName"><span class="hs-identifier hs-var">tnameToName</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093666"><span class="hs-identifier hs-var">l'</span></a></span><span> </span><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093677"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-229"></span><span>    </span><span id="local-6989586621679093673"><span class="annot"><span class="annottext">begin :: Event
</span><a href="#local-6989586621679093673"><span class="hs-identifier hs-var hs-var">begin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; [(Name, [Content])] -&gt; Event
</span><span class="hs-identifier hs-var">EventBeginElement</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093630"><span class="hs-identifier hs-var">elementName</span></a></span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])] -&gt; Event) -&gt; [(Name, [Content])] -&gt; Event
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(TAttribute -&gt; (Name, [Content]))
-&gt; [TAttribute] -&gt; [(Name, [Content])]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">TAttribute -&gt; (Name, [Content])
</span><a href="#local-6989586621679093634"><span class="hs-identifier hs-var">fixAttName</span></a></span><span> </span><span class="annot"><span class="annottext">([TAttribute] -&gt; [(Name, [Content])])
-&gt; [TAttribute] -&gt; [(Name, [Content])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TAttribute] -&gt; [TAttribute]
</span><a href="#local-6989586621679093667"><span class="hs-identifier hs-var">as'</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-230"></span><span>    </span><span id="local-6989586621679093672"><span class="annot"><span class="annottext">end :: Event
</span><a href="#local-6989586621679093672"><span class="hs-identifier hs-var hs-var">end</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Event
</span><span class="hs-identifier hs-var">EventEndElement</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093630"><span class="hs-identifier hs-var">elementName</span></a></span><span>
</span><span id="line-231"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#tokenToEvent"><span class="hs-identifier hs-var">tokenToEvent</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679093627"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093627"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621679093626"><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093626"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TokenEndElement"><span class="hs-identifier hs-type">TokenEndElement</span></a></span><span> </span><span id="local-6989586621679093624"><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093624"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093627"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093623"><span class="hs-identifier hs-var">n'</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name -&gt; Event
</span><span class="hs-identifier hs-var">EventEndElement</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Event) -&gt; Name -&gt; Event
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; NSLevel -&gt; TName -&gt; Name
</span><a href="Text.XML.Stream.Parse.html#tnameToName"><span class="hs-identifier hs-var">tnameToName</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093622"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093624"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-234"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679093622"><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093622"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093623"><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093623"><span class="hs-identifier hs-var">n'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-235"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093626"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-236"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Text -&gt; Map Text Text -&gt; NSLevel
</span><a href="Text.XML.Stream.Token.html#NSLevel"><span class="hs-identifier hs-var">NSLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Map Text Text
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>            </span><span id="local-6989586621679093621"><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093621"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679093620"><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093620"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NSLevel
</span><a href="#local-6989586621679093621"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093620"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#tokenToEvent"><span class="hs-identifier hs-var">tokenToEvent</span></a></span><span> </span><span id="local-6989586621679093619"><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093619"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679093618"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093618"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621679093617"><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093617"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679093616"><span class="annot"><span class="annottext">tok :: Token
</span><a href="#local-6989586621679093616"><span class="hs-identifier hs-var">tok</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TokenContent"><span class="hs-identifier hs-type">TokenContent</span></a></span><span> </span><span id="local-6989586621679093615"><span class="annot"><span class="annottext">c :: Content
</span><a href="#local-6989586621679093615"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ContentEntity</span></span><span> </span><span id="local-6989586621679093613"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093613"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; EntityTable -&gt; Maybe Text
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093613"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093618"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-240"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093618"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093617"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Token -&gt; [Event]) -&gt; [Token] -&gt; [Event]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="annot"><span class="annottext">Token -&gt; [Event]
</span><a href="#local-6989586621679093610"><span class="hs-identifier hs-var">toEvents</span></a></span><span> </span><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679093609"><span class="hs-identifier hs-var">newtoks</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>      </span><span class="annot"><span class="annottext">Maybe Text
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093618"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093617"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Content -&gt; Event
</span><span class="hs-identifier hs-var">EventContent</span></span><span> </span><span class="annot"><span class="annottext">Content
</span><a href="#local-6989586621679093615"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-243"></span><span>  </span><span id="local-6989586621679093610"><span class="annot"><span class="annottext">toEvents :: Token -&gt; [Event]
</span><a href="#local-6989586621679093610"><span class="hs-identifier hs-var hs-var">toEvents</span></a></span></span><span> </span><span id="local-6989586621679093607"><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679093607"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093606"><span class="annot"><span class="annottext">[Event]
</span><a href="#local-6989586621679093606"><span class="hs-identifier hs-var">events</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseSettings
-&gt; EntityTable
-&gt; [NSLevel]
-&gt; Token
-&gt; (EntityTable, [NSLevel], [Event])
</span><a href="Text.XML.Stream.Parse.html#tokenToEvent"><span class="hs-identifier hs-var">tokenToEvent</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093619"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093617"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679093607"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-245"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[Event]
</span><a href="#local-6989586621679093606"><span class="hs-identifier hs-var">events</span></a></span><span>
</span><span id="line-246"></span><span>  </span><span id="local-6989586621679093609"><span class="annot"><span class="annottext">newtoks :: [Token]
</span><a href="#local-6989586621679093609"><span class="hs-identifier hs-var hs-var">newtoks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseSettings -&gt; EntityTable -&gt; [Token] -&gt; [Token]
</span><a href="Text.XML.Stream.Parse.html#resolveEntities"><span class="hs-identifier hs-var">resolveEntities</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093619"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093618"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679093616"><span class="hs-identifier hs-var">tok</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-247"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#tokenToEvent"><span class="hs-identifier hs-var">tokenToEvent</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679093605"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093605"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621679093604"><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093604"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TokenContent"><span class="hs-identifier hs-type">TokenContent</span></a></span><span> </span><span id="local-6989586621679093603"><span class="annot"><span class="annottext">Content
</span><a href="#local-6989586621679093603"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093605"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093604"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Content -&gt; Event
</span><span class="hs-identifier hs-var">EventContent</span></span><span> </span><span class="annot"><span class="annottext">Content
</span><a href="#local-6989586621679093603"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#tokenToEvent"><span class="hs-identifier hs-var">tokenToEvent</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679093602"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093602"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621679093601"><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093601"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TokenComment"><span class="hs-identifier hs-type">TokenComment</span></a></span><span> </span><span id="local-6989586621679093599"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093599"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093602"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093601"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text -&gt; Event
</span><span class="hs-identifier hs-var">EventComment</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093599"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#tokenToEvent"><span class="hs-identifier hs-var">tokenToEvent</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679093597"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093597"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621679093596"><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093596"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TokenDoctype"><span class="hs-identifier hs-type">TokenDoctype</span></a></span><span> </span><span id="local-6989586621679093594"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093594"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621679093593"><span class="annot"><span class="annottext">Maybe ExternalID
</span><a href="#local-6989586621679093593"><span class="hs-identifier hs-var">eid</span></a></span></span><span> </span><span id="local-6989586621679093592"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093592"><span class="hs-identifier hs-var">es'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093597"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable -&gt; EntityTable -&gt; EntityTable
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093592"><span class="hs-identifier hs-var">es'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093596"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text -&gt; Maybe ExternalID -&gt; Event
</span><span class="hs-identifier hs-var">EventBeginDoctype</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093594"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ExternalID
</span><a href="#local-6989586621679093593"><span class="hs-identifier hs-var">eid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Event
</span><span class="hs-identifier hs-var">EventEndDoctype</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#tokenToEvent"><span class="hs-identifier hs-var">tokenToEvent</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679093589"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093589"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621679093588"><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093588"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TokenCDATA"><span class="hs-identifier hs-type">TokenCDATA</span></a></span><span> </span><span id="local-6989586621679093586"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093586"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093589"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093588"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text -&gt; Event
</span><span class="hs-identifier hs-var">EventCDATA</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093586"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#resolveEntities"><span class="hs-identifier hs-type">resolveEntities</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span>
</span><span id="line-253"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#EntityTable"><span class="hs-identifier hs-type">EntityTable</span></a></span><span>
</span><span id="line-254"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Text.XML.Stream.Token.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-255"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Text.XML.Stream.Token.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-256"></span><span id="resolveEntities"><span class="annot"><span class="annottext">resolveEntities :: ParseSettings -&gt; EntityTable -&gt; [Token] -&gt; [Token]
</span><a href="Text.XML.Stream.Parse.html#resolveEntities"><span class="hs-identifier hs-var hs-var">resolveEntities</span></a></span></span><span> </span><span id="local-6989586621679093584"><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093584"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679093583"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093583"><span class="hs-identifier hs-var">entities</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Token -&gt; [Token] -&gt; [Token]) -&gt; [Token] -&gt; [Token] -&gt; [Token]
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">Token -&gt; [Token] -&gt; [Token]
</span><a href="#local-6989586621679093581"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-257"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-258"></span><span>  </span><span id="local-6989586621679093581"><span class="annot"><span class="annottext">go :: Token -&gt; [Token] -&gt; [Token]
</span><a href="#local-6989586621679093581"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679093580"><span class="annot"><span class="annottext">tok :: Token
</span><a href="#local-6989586621679093580"><span class="hs-identifier hs-var">tok</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TokenContent"><span class="hs-identifier hs-type">TokenContent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ContentEntity</span></span><span> </span><span id="local-6989586621679093579"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093579"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679093578"><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679093578"><span class="hs-identifier hs-var">toks</span></a></span></span><span>
</span><span id="line-259"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">EntityTable -&gt; Text -&gt; Maybe [Token]
</span><a href="#local-6989586621679093577"><span class="hs-identifier hs-var">expandEntity</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093583"><span class="hs-identifier hs-var">entities</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093579"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-260"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093576"><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679093576"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Token -&gt; [Token] -&gt; [Token]) -&gt; [Token] -&gt; [Token] -&gt; [Token]
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">Token -&gt; [Token] -&gt; [Token]
</span><a href="#local-6989586621679093581"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679093578"><span class="hs-identifier hs-var">toks</span></a></span><span> </span><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679093576"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-261"></span><span>        </span><span class="annot"><span class="annottext">Maybe [Token]
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679093580"><span class="hs-identifier hs-var">tok</span></a></span><span> </span><span class="annot"><span class="annottext">Token -&gt; [Token] -&gt; [Token]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679093578"><span class="hs-identifier hs-var">toks</span></a></span><span>
</span><span id="line-262"></span><span>  </span><span class="annot"><a href="#local-6989586621679093581"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679093575"><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679093575"><span class="hs-identifier hs-var">tok</span></a></span></span><span> </span><span id="local-6989586621679093574"><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679093574"><span class="hs-identifier hs-var">toks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679093575"><span class="hs-identifier hs-var">tok</span></a></span><span> </span><span class="annot"><span class="annottext">Token -&gt; [Token] -&gt; [Token]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679093574"><span class="hs-identifier hs-var">toks</span></a></span><span>
</span><span id="line-263"></span><span>  </span><span id="local-6989586621679093577"><span class="annot"><span class="annottext">expandEntity :: EntityTable -&gt; Text -&gt; Maybe [Token]
</span><a href="#local-6989586621679093577"><span class="hs-identifier hs-var hs-var">expandEntity</span></a></span></span><span> </span><span id="local-6989586621679093573"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093573"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span id="local-6989586621679093572"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093572"><span class="hs-identifier hs-var">e</span></a></span></span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093571"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093571"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; EntityTable -&gt; Maybe Text
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093572"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093573"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-265"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Parser [Token] -&gt; Text -&gt; Either String [Token]
forall a. Parser a -&gt; Text -&gt; Either String a
</span><span class="hs-identifier hs-var">AT.parseOnly</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parser Text Token -&gt; Parser Text () -&gt; Parser [Token]
forall (f :: * -&gt; *) a b. Alternative f =&gt; f a -&gt; f b -&gt; f [a]
</span><span class="hs-identifier hs-var">manyTill</span></span><span>
</span><span id="line-266"></span><span>                          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParseSettings -&gt; Parser Text Token
</span><a href="Text.XML.Stream.Parse.html#parseToken"><span class="hs-identifier hs-var">parseToken</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093584"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Parser</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Token.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span>                          </span><span class="annot"><span class="annottext">Parser Text ()
forall t. Chunk t =&gt; Parser t ()
</span><span class="hs-identifier hs-var">AT.endOfInput</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093571"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-268"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe [Token]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-269"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679093567"><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679093567"><span class="hs-identifier hs-var">xs</span></a></span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">-- recursively expand</span><span>
</span><span id="line-270"></span><span>                       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679093566"><span class="annot"><span class="annottext">es' :: EntityTable
</span><a href="#local-6989586621679093566"><span class="hs-identifier hs-var hs-var">es'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Text, Text) -&gt; Bool) -&gt; EntityTable -&gt; EntityTable
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679093565"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093565"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093565"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093572"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093573"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-271"></span><span>                        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">([Token], Int) -&gt; [Token]
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(([Token], Int) -&gt; [Token])
-&gt; Maybe ([Token], Int) -&gt; Maybe [Token]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Maybe ([Token], Int) -&gt; Maybe ([Token], Int))
-&gt; Maybe ([Token], Int) -&gt; [Token] -&gt; Maybe ([Token], Int)
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable
-&gt; Token -&gt; Maybe ([Token], Int) -&gt; Maybe ([Token], Int)
</span><a href="#local-6989586621679093563"><span class="hs-identifier hs-var">goent</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093566"><span class="hs-identifier hs-var">es'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([Token], Int) -&gt; Maybe ([Token], Int)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679093567"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-272"></span><span>          </span><span class="hs-comment">-- we delete e from the entity map in resolving its contents,</span><span>
</span><span id="line-273"></span><span>          </span><span class="hs-comment">-- to avoid infinite loops in recursive expansion.</span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [Token]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-275"></span><span>  </span><span id="local-6989586621679093563"><span class="annot"><span class="annottext">goent :: EntityTable
-&gt; Token -&gt; Maybe ([Token], Int) -&gt; Maybe ([Token], Int)
</span><a href="#local-6989586621679093563"><span class="hs-identifier hs-var hs-var">goent</span></a></span></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Token
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe ([Token], Int)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe ([Token], Int)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-276"></span><span>  </span><span class="annot"><a href="#local-6989586621679093563"><span class="hs-identifier hs-var">goent</span></a></span><span> </span><span id="local-6989586621679093562"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093562"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TokenContent"><span class="hs-identifier hs-type">TokenContent</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ContentEntity</span></span><span> </span><span id="local-6989586621679093561"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093561"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679093560"><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679093560"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093559"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093559"><span class="hs-identifier hs-var">size</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EntityTable -&gt; Text -&gt; Maybe [Token]
</span><a href="#local-6989586621679093577"><span class="hs-identifier hs-var">expandEntity</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093562"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093561"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Token]
-&gt; ([Token] -&gt; Maybe ([Token], Int)) -&gt; Maybe ([Token], Int)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Maybe ([Token], Int) -&gt; Maybe ([Token], Int))
-&gt; Maybe ([Token], Int) -&gt; [Token] -&gt; Maybe ([Token], Int)
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable
-&gt; Token -&gt; Maybe ([Token], Int) -&gt; Maybe ([Token], Int)
</span><a href="#local-6989586621679093563"><span class="hs-identifier hs-var">goent</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093562"><span class="hs-identifier hs-var">es</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([Token], Int) -&gt; Maybe ([Token], Int)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679093560"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093559"><span class="hs-identifier hs-var">size</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span>  </span><span class="annot"><a href="#local-6989586621679093563"><span class="hs-identifier hs-var">goent</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679093558"><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679093558"><span class="hs-identifier hs-var">tok</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679093557"><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679093557"><span class="hs-identifier hs-var">toks</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093556"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093556"><span class="hs-identifier hs-var">size</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-279"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679093555"><span class="annot"><span class="annottext">toksize :: Int
</span><a href="#local-6989586621679093555"><span class="hs-identifier hs-var hs-var">toksize</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Int64 -&gt; Int) -&gt; Int64 -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-280"></span><span>                  </span><span class="annot"><span class="annottext">ByteString -&gt; Int64
</span><span class="hs-identifier hs-var">L.length</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Builder -&gt; ByteString
</span><span class="hs-identifier hs-var">Builder.toLazyByteString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Token -&gt; Builder
</span><a href="Text.XML.Stream.Token.html#tokenToBuilder"><span class="hs-identifier hs-var">tokenToBuilder</span></a></span><span> </span><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679093558"><span class="hs-identifier hs-var">tok</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093556"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093555"><span class="hs-identifier hs-var">toksize</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-282"></span><span>      </span><span id="local-6989586621679093550"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093550"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093550"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">ParseSettings -&gt; Int
</span><a href="Text.XML.Stream.Parse.html#psEntityExpansionSizeLimit"><span class="hs-identifier hs-var hs-var">psEntityExpansionSizeLimit</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093584"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ([Token], Int)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-283"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([Token], Int) -&gt; Maybe ([Token], Int)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679093558"><span class="hs-identifier hs-var">tok</span></a></span><span class="annot"><span class="annottext">Token -&gt; [Token] -&gt; [Token]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[Token]
</span><a href="#local-6989586621679093557"><span class="hs-identifier hs-var">toks</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093550"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span>
</span><span id="line-286"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#tnameToName"><span class="hs-identifier hs-type">tnameToName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Token.html#NSLevel"><span class="hs-identifier hs-type">NSLevel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Token.html#TName"><span class="hs-identifier hs-type">TName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-287"></span><span id="tnameToName"><span class="annot"><span class="annottext">tnameToName :: Bool -&gt; NSLevel -&gt; TName -&gt; Name
</span><a href="Text.XML.Stream.Parse.html#tnameToName"><span class="hs-identifier hs-var hs-var">tnameToName</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">NSLevel
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TName"><span class="hs-identifier hs-type">TName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;xml&quot;</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679093548"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093548"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-288"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text -&gt; Maybe Text -&gt; Name
</span><span class="hs-identifier hs-var">Name</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093548"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;http://www.w3.org/XML/1998/namespace&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;xml&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#tnameToName"><span class="hs-identifier hs-var">tnameToName</span></a></span><span> </span><span id="local-6989586621679093546"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093546"><span class="hs-identifier hs-var">isAttr</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#NSLevel"><span class="hs-identifier hs-type">NSLevel</span></a></span><span> </span><span id="local-6989586621679093545"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679093545"><span class="hs-identifier hs-var">def'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Map Text Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TName"><span class="hs-identifier hs-type">TName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span id="local-6989586621679093544"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093544"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-290"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text -&gt; Maybe Text -&gt; Name
</span><span class="hs-identifier hs-var">Name</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093544"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093546"><span class="hs-identifier hs-var">isAttr</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679093545"><span class="hs-identifier hs-var">def'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-291"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#tnameToName"><span class="hs-identifier hs-var">tnameToName</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#NSLevel"><span class="hs-identifier hs-type">NSLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679093543"><span class="annot"><span class="annottext">Map Text Text
</span><a href="#local-6989586621679093543"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TName"><span class="hs-identifier hs-type">TName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093542"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093542"><span class="hs-identifier hs-var">pref</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679093541"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093541"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Map Text Text -&gt; Maybe Text
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093542"><span class="hs-identifier hs-var">pref</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Text
</span><a href="#local-6989586621679093543"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-293"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093539"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093539"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text -&gt; Maybe Text -&gt; Name
</span><span class="hs-identifier hs-var">Name</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093541"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093539"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093542"><span class="hs-identifier hs-var">pref</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-294"></span><span>        </span><span class="annot"><span class="annottext">Maybe Text
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text -&gt; Maybe Text -&gt; Name
</span><span class="hs-identifier hs-var">Name</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093541"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093542"><span class="hs-identifier hs-var">pref</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- FIXME is this correct?</span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="hs-comment">-- | Automatically determine which UTF variant is being used. This function</span><span>
</span><span id="line-297"></span><span class="hs-comment">-- first checks for BOMs, removing them as necessary, and then check for the</span><span>
</span><span id="line-298"></span><span class="hs-comment">-- equivalent of &lt;?xml for each of UTF-8, UTF-16LE/BE, and UTF-32LE/BE. It</span><span>
</span><span id="line-299"></span><span class="hs-comment">-- defaults to assuming UTF-8.</span><span>
</span><span id="line-300"></span><span id="local-6989586621679094088"><span class="annot"><a href="Text.XML.Stream.Parse.html#detectUtf"><span class="hs-identifier hs-type">detectUtf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679094088"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.ByteString</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="annot"><a href="#local-6989586621679094088"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-301"></span><span id="detectUtf"><span class="annot"><span class="annottext">detectUtf :: ConduitT ByteString Text m ()
</span><a href="Text.XML.Stream.Parse.html#detectUtf"><span class="hs-identifier hs-var hs-var">detectUtf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-302"></span><span>    </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; ConduitT ByteString Text m ()
forall (m :: * -&gt; *).
MonadThrow m =&gt;
(ByteString -&gt; ByteString) -&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093538"><span class="hs-identifier hs-var">conduit</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-303"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-304"></span><span>    </span><span id="local-6989586621679093538"><span class="annot"><span class="annottext">conduit :: (ByteString -&gt; ByteString) -&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093538"><span class="hs-identifier hs-var hs-var">conduit</span></a></span></span><span> </span><span id="local-6989586621679093537"><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="#local-6989586621679093537"><span class="hs-identifier hs-var">front</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT ByteString Text m (Maybe ByteString)
forall (m :: * -&gt; *) i. Monad m =&gt; Consumer i m (Maybe i)
</span><span class="hs-identifier hs-var">await</span></span><span> </span><span class="annot"><span class="annottext">ConduitT ByteString Text m (Maybe ByteString)
-&gt; (Maybe ByteString -&gt; ConduitT ByteString Text m ())
-&gt; ConduitT ByteString Text m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ConduitT ByteString Text m ()
-&gt; (ByteString -&gt; ConduitT ByteString Text m ())
-&gt; Maybe ByteString
-&gt; ConduitT ByteString Text m ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; ConduitT ByteString Text m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString)
-&gt; ByteString -&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093534"><span class="hs-identifier hs-var">push</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="#local-6989586621679093537"><span class="hs-identifier hs-var">front</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>
</span><span id="line-306"></span><span>    </span><span id="local-6989586621679093534"><span class="annot"><span class="annottext">push :: (ByteString -&gt; ByteString)
-&gt; ByteString -&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093534"><span class="hs-identifier hs-var hs-var">push</span></a></span></span><span> </span><span id="local-6989586621679093533"><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="#local-6989586621679093533"><span class="hs-identifier hs-var">front</span></a></span></span><span> </span><span id="local-6989586621679093532"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093532"><span class="hs-identifier hs-var">bss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-307"></span><span>        </span><span class="annot"><span class="annottext">((ByteString -&gt; ByteString) -&gt; ConduitT ByteString Text m ())
-&gt; ((ByteString, Maybe Codec) -&gt; ConduitT ByteString Text m ())
-&gt; Either (ByteString -&gt; ByteString) (ByteString, Maybe Codec)
-&gt; ConduitT ByteString Text m ()
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString) -&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093538"><span class="hs-identifier hs-var">conduit</span></a></span><span>
</span><span id="line-308"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ByteString -&gt; Maybe Codec -&gt; ConduitT ByteString Text m ())
-&gt; (ByteString, Maybe Codec) -&gt; ConduitT ByteString Text m ()
forall a b c. (a -&gt; b -&gt; c) -&gt; (a, b) -&gt; c
</span><span class="hs-identifier hs-var">uncurry</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Maybe Codec -&gt; ConduitT ByteString Text m ()
forall (m :: * -&gt; *).
MonadThrow m =&gt;
ByteString -&gt; Maybe Codec -&gt; ConduitT ByteString Text m ()
</span><a href="Text.XML.Stream.Parse.html#checkXMLDecl"><span class="hs-identifier hs-var">checkXMLDecl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString)
-&gt; ByteString
-&gt; Either (ByteString -&gt; ByteString) (ByteString, Maybe Codec)
forall t.
(t -&gt; ByteString)
-&gt; t -&gt; Either (ByteString -&gt; ByteString) (ByteString, Maybe Codec)
</span><a href="#local-6989586621679093528"><span class="hs-identifier hs-var">getEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><a href="#local-6989586621679093533"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093532"><span class="hs-identifier hs-var">bss</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span>    </span><span id="local-6989586621679093528"><span class="annot"><span class="annottext">getEncoding :: (t -&gt; ByteString)
-&gt; t -&gt; Either (ByteString -&gt; ByteString) (ByteString, Maybe Codec)
</span><a href="#local-6989586621679093528"><span class="hs-identifier hs-var hs-var">getEncoding</span></a></span></span><span> </span><span id="local-6989586621679093527"><span class="annot"><span class="annottext">t -&gt; ByteString
</span><a href="#local-6989586621679093527"><span class="hs-identifier hs-var">front</span></a></span></span><span> </span><span id="local-6989586621679093526"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679093526"><span class="hs-identifier hs-var">bs'</span></a></span></span><span>
</span><span id="line-312"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int
</span><span class="hs-identifier hs-var">S.length</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093524"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-313"></span><span>            </span><span class="annot"><span class="annottext">(ByteString -&gt; ByteString)
-&gt; Either (ByteString -&gt; ByteString) (ByteString, Maybe Codec)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093524"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; ByteString
</span><span class="hs-operator hs-var">`S.append`</span></span><span class="hs-special">)</span><span>
</span><span id="line-314"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-315"></span><span>            </span><span class="annot"><span class="annottext">(ByteString, Maybe Codec)
-&gt; Either (ByteString -&gt; ByteString) (ByteString, Maybe Codec)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093521"><span class="hs-identifier hs-var">bsOut</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Codec
</span><a href="#local-6989586621679093520"><span class="hs-identifier hs-var">mcodec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-316"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-317"></span><span>        </span><span id="local-6989586621679093524"><span class="annot"><span class="annottext">bs :: ByteString
</span><a href="#local-6989586621679093524"><span class="hs-identifier hs-var hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t -&gt; ByteString
</span><a href="#local-6989586621679093527"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679093526"><span class="hs-identifier hs-var">bs'</span></a></span><span>
</span><span id="line-318"></span><span>        </span><span id="local-6989586621679093521"><span class="annot"><span class="annottext">bsOut :: ByteString
</span><a href="#local-6989586621679093521"><span class="hs-identifier hs-var hs-var">bsOut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">S.append</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">S.drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093518"><span class="hs-identifier hs-var">toDrop</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093517"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093516"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-319"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679093517"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093517"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093516"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093516"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ByteString -&gt; (ByteString, ByteString)
</span><span class="hs-identifier hs-var">S.splitAt</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093524"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-320"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621679093518"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093518"><span class="hs-identifier hs-var">toDrop</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093520"><span class="annot"><span class="annottext">Maybe Codec
</span><a href="#local-6989586621679093520"><span class="hs-identifier hs-var">mcodec</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-321"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [Word8]
</span><span class="hs-identifier hs-var">S.unpack</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093517"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-322"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xFE</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xFF</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec -&gt; Maybe Codec
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Codec
</span><span class="hs-identifier hs-var">CT.utf32_be</span></span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xFF</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xFE</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">4</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec -&gt; Maybe Codec
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Codec
</span><span class="hs-identifier hs-var">CT.utf32_le</span></span><span class="hs-special">)</span><span>
</span><span id="line-324"></span><span>                </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xFE</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xFF</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Word8]
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec -&gt; Maybe Codec
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Codec
</span><span class="hs-identifier hs-var">CT.utf16_be</span></span><span class="hs-special">)</span><span>
</span><span id="line-325"></span><span>                </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xFF</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xFE</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Word8]
</span><span class="hs-identifier">_</span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec -&gt; Maybe Codec
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Codec
</span><span class="hs-identifier hs-var">CT.utf16_le</span></span><span class="hs-special">)</span><span>
</span><span id="line-326"></span><span>                </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xEF</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xBB</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0xBF</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Word8]
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec -&gt; Maybe Codec
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Codec
</span><span class="hs-identifier hs-var">CT.utf8</span></span><span class="hs-special">)</span><span>
</span><span id="line-327"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x3C</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec -&gt; Maybe Codec
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Codec
</span><span class="hs-identifier hs-var">CT.utf32_be</span></span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x3C</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec -&gt; Maybe Codec
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Codec
</span><span class="hs-identifier hs-var">CT.utf32_le</span></span><span class="hs-special">)</span><span>
</span><span id="line-329"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x3C</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x3F</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec -&gt; Maybe Codec
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Codec
</span><span class="hs-identifier hs-var">CT.utf16_be</span></span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x3C</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x3F</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word8
</span><span class="hs-number">0x00</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Codec -&gt; Maybe Codec
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Codec
</span><span class="hs-identifier hs-var">CT.utf16_le</span></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>                </span><span class="annot"><span class="annottext">[Word8]
</span><span class="hs-identifier">_</span></span><span>                        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Codec
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Assuming UTF-8</span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span id="local-6989586621679094121"><span class="annot"><a href="Text.XML.Stream.Parse.html#checkXMLDecl"><span class="hs-identifier hs-type">checkXMLDecl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679094121"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-334"></span><span>             </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.ByteString</span></span><span>
</span><span id="line-335"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CT.Codec</span></span><span>
</span><span id="line-336"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.ByteString</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="annot"><a href="#local-6989586621679094121"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-337"></span><span id="checkXMLDecl"><span class="annot"><span class="annottext">checkXMLDecl :: ByteString -&gt; Maybe Codec -&gt; ConduitT ByteString Text m ()
</span><a href="Text.XML.Stream.Parse.html#checkXMLDecl"><span class="hs-identifier hs-var hs-var">checkXMLDecl</span></a></span></span><span> </span><span id="local-6989586621679093508"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093508"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093507"><span class="annot"><span class="annottext">Codec
</span><a href="#local-6989586621679093507"><span class="hs-identifier hs-var">codec</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ConduitT ByteString Text m ()
forall i o (m :: * -&gt; *). i -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">leftover</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093508"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT ByteString Text m ()
-&gt; ConduitT ByteString Text m () -&gt; ConduitT ByteString Text m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Codec -&gt; ConduitT ByteString Text m ()
forall (m :: * -&gt; *).
MonadThrow m =&gt;
Codec -&gt; ConduitT ByteString Text m ()
</span><span class="hs-identifier hs-var">CT.decode</span></span><span> </span><span class="annot"><span class="annottext">Codec
</span><a href="#local-6989586621679093507"><span class="hs-identifier hs-var">codec</span></a></span><span>
</span><span id="line-338"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#checkXMLDecl"><span class="hs-identifier hs-var">checkXMLDecl</span></a></span><span> </span><span id="local-6989586621679093504"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093504"><span class="hs-identifier hs-var">bs0</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Codec
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-339"></span><span>    </span><span class="annot"><span class="annottext">[ByteString]
-&gt; (Text -&gt; IResult Text Token)
-&gt; ByteString
-&gt; ConduitT ByteString Text m ()
forall (m :: * -&gt; *).
MonadThrow m =&gt;
[ByteString]
-&gt; (Text -&gt; IResult Text Token)
-&gt; ByteString
-&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093503"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parser Text Token -&gt; Text -&gt; IResult Text Token
forall a. Parser a -&gt; Text -&gt; Result a
</span><span class="hs-identifier hs-var">AT.parse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParseSettings -&gt; Parser Text Token
</span><a href="Text.XML.Stream.Parse.html#parseToken"><span class="hs-identifier hs-var">parseToken</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093504"><span class="hs-identifier hs-var">bs0</span></a></span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-341"></span><span>    </span><span id="local-6989586621679093503"><span class="annot"><span class="annottext">loop :: [ByteString]
-&gt; (Text -&gt; IResult Text Token)
-&gt; ByteString
-&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093503"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span id="local-6989586621679093501"><span class="annot"><span class="annottext">[ByteString]
</span><a href="#local-6989586621679093501"><span class="hs-identifier hs-var">chunks0</span></a></span></span><span> </span><span id="local-6989586621679093500"><span class="annot"><span class="annottext">Text -&gt; IResult Text Token
</span><a href="#local-6989586621679093500"><span class="hs-identifier hs-var">parser</span></a></span></span><span> </span><span id="local-6989586621679093499"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093499"><span class="hs-identifier hs-var">nextChunk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-342"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; IResult Text Token
</span><a href="#local-6989586621679093500"><span class="hs-identifier hs-var">parser</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IResult Text Token) -&gt; Text -&gt; IResult Text Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OnDecodeError -&gt; ByteString -&gt; Text
</span><span class="hs-identifier hs-var">decodeUtf8With</span></span><span> </span><span class="annot"><span class="annottext">OnDecodeError
</span><span class="hs-identifier hs-var">lenientDecode</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093499"><span class="hs-identifier hs-var">nextChunk</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-343"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">AT.Fail</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>                             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093497"><span class="hs-identifier hs-var">fallback</span></a></span><span>
</span><span id="line-344"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">AT.Partial</span></span><span> </span><span id="local-6989586621679093495"><span class="annot"><span class="annottext">Text -&gt; IResult Text Token
</span><a href="#local-6989586621679093495"><span class="hs-identifier hs-var">f</span></a></span></span><span>                          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConduitT ByteString Text m (Maybe ByteString)
forall (m :: * -&gt; *) i. Monad m =&gt; Consumer i m (Maybe i)
</span><span class="hs-identifier hs-var">await</span></span><span> </span><span class="annot"><span class="annottext">ConduitT ByteString Text m (Maybe ByteString)
-&gt; (Maybe ByteString -&gt; ConduitT ByteString Text m ())
-&gt; ConduitT ByteString Text m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ConduitT ByteString Text m ()
-&gt; (ByteString -&gt; ConduitT ByteString Text m ())
-&gt; Maybe ByteString
-&gt; ConduitT ByteString Text m ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093497"><span class="hs-identifier hs-var">fallback</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ByteString]
-&gt; (Text -&gt; IResult Text Token)
-&gt; ByteString
-&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093503"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">[ByteString]
</span><a href="#local-6989586621679093494"><span class="hs-identifier hs-var">chunks</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; IResult Text Token
</span><a href="#local-6989586621679093495"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-345"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">AT.Done</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TokenXMLDeclaration"><span class="hs-identifier hs-type">TokenXMLDeclaration</span></a></span><span> </span><span id="local-6989586621679093492"><span class="annot"><span class="annottext">[TAttribute]
</span><a href="#local-6989586621679093492"><span class="hs-identifier hs-var">attrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[TAttribute] -&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093491"><span class="hs-identifier hs-var">findEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">[TAttribute]
</span><a href="#local-6989586621679093492"><span class="hs-identifier hs-var">attrs</span></a></span><span>
</span><span id="line-346"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">AT.Done</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>                             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093497"><span class="hs-identifier hs-var">fallback</span></a></span><span>
</span><span id="line-347"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-348"></span><span>        </span><span id="local-6989586621679093494"><span class="annot"><span class="annottext">chunks :: [ByteString]
</span><a href="#local-6989586621679093494"><span class="hs-identifier hs-var hs-var">chunks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093499"><span class="hs-identifier hs-var">nextChunk</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; [ByteString] -&gt; [ByteString]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[ByteString]
</span><a href="#local-6989586621679093501"><span class="hs-identifier hs-var">chunks0</span></a></span><span>
</span><span id="line-349"></span><span>        </span><span id="local-6989586621679093497"><span class="annot"><span class="annottext">fallback :: ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093497"><span class="hs-identifier hs-var hs-var">fallback</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Codec -&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093490"><span class="hs-identifier hs-var">complete</span></a></span><span> </span><span class="annot"><span class="annottext">Codec
</span><span class="hs-identifier hs-var">CT.utf8</span></span><span>
</span><span id="line-350"></span><span>        </span><span id="local-6989586621679093490"><span class="annot"><span class="annottext">complete :: Codec -&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093490"><span class="hs-identifier hs-var hs-var">complete</span></a></span></span><span> </span><span id="local-6989586621679093489"><span class="annot"><span class="annottext">Codec
</span><a href="#local-6989586621679093489"><span class="hs-identifier hs-var">codec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; ConduitT ByteString Text m ())
-&gt; [ByteString] -&gt; ConduitT ByteString Text m ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ConduitT ByteString Text m ()
forall i o (m :: * -&gt; *). i -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">leftover</span></span><span> </span><span class="annot"><span class="annottext">[ByteString]
</span><a href="#local-6989586621679093494"><span class="hs-identifier hs-var">chunks</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT ByteString Text m ()
-&gt; ConduitT ByteString Text m () -&gt; ConduitT ByteString Text m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Codec -&gt; ConduitT ByteString Text m ()
forall (m :: * -&gt; *).
MonadThrow m =&gt;
Codec -&gt; ConduitT ByteString Text m ()
</span><span class="hs-identifier hs-var">CT.decode</span></span><span> </span><span class="annot"><span class="annottext">Codec
</span><a href="#local-6989586621679093489"><span class="hs-identifier hs-var">codec</span></a></span><span>
</span><span id="line-351"></span><span>
</span><span id="line-352"></span><span>        </span><span id="local-6989586621679093491"><span class="annot"><span class="annottext">findEncoding :: [TAttribute] -&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093491"><span class="hs-identifier hs-var hs-var">findEncoding</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093497"><span class="hs-identifier hs-var">fallback</span></a></span><span>
</span><span id="line-353"></span><span>        </span><span class="annot"><a href="#local-6989586621679093491"><span class="hs-identifier hs-var">findEncoding</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Token.html#TName"><span class="hs-identifier hs-type">TName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;encoding&quot;</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ContentText</span></span><span> </span><span id="local-6989586621679093486"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093486"><span class="hs-identifier hs-var">enc</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[TAttribute]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-354"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text
</span><span class="hs-identifier hs-var">T.toLower</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093486"><span class="hs-identifier hs-var">enc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-355"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;iso-8859-1&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Codec -&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093490"><span class="hs-identifier hs-var">complete</span></a></span><span> </span><span class="annot"><span class="annottext">Codec
</span><span class="hs-identifier hs-var">CT.iso8859_1</span></span><span>
</span><span id="line-356"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;utf-8&quot;</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Codec -&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093490"><span class="hs-identifier hs-var">complete</span></a></span><span> </span><span class="annot"><span class="annottext">Codec
</span><span class="hs-identifier hs-var">CT.utf8</span></span><span>
</span><span id="line-357"></span><span>                </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Codec -&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093490"><span class="hs-identifier hs-var">complete</span></a></span><span> </span><span class="annot"><span class="annottext">Codec
</span><span class="hs-identifier hs-var">CT.utf8</span></span><span>
</span><span id="line-358"></span><span>        </span><span class="annot"><a href="#local-6989586621679093491"><span class="hs-identifier hs-var">findEncoding</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TAttribute
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679093483"><span class="annot"><span class="annottext">[TAttribute]
</span><a href="#local-6989586621679093483"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TAttribute] -&gt; ConduitT ByteString Text m ()
</span><a href="#local-6989586621679093491"><span class="hs-identifier hs-var">findEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">[TAttribute]
</span><a href="#local-6989586621679093483"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span class="hs-keyword">type</span><span> </span><span id="EventPos"><span class="annot"><a href="Text.XML.Stream.Parse.html#EventPos"><span class="hs-identifier hs-var">EventPos</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">PositionRange</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-comment">-- | Parses a byte stream into 'Event's. This function is implemented fully in</span><span>
</span><span id="line-363"></span><span class="hs-comment">-- Haskell using attoparsec-text for parsing. The produced error messages do</span><span>
</span><span id="line-364"></span><span class="hs-comment">-- not give line/column information, so you may prefer to stick with the parser</span><span>
</span><span id="line-365"></span><span class="hs-comment">-- provided by libxml-enumerator. However, this has the advantage of not</span><span>
</span><span id="line-366"></span><span class="hs-comment">-- relying on any C libraries.</span><span>
</span><span id="line-367"></span><span class="hs-comment">--</span><span>
</span><span id="line-368"></span><span class="hs-comment">-- This relies on 'detectUtf' to determine character encoding, and 'parseText'</span><span>
</span><span id="line-369"></span><span class="hs-comment">-- to do the actual parsing.</span><span>
</span><span id="line-370"></span><span id="local-6989586621679093902"><span class="annot"><a href="Text.XML.Stream.Parse.html#parseBytes"><span class="hs-identifier hs-type">parseBytes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093902"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-371"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span>
</span><span id="line-372"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.ByteString</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093902"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-373"></span><span id="parseBytes"><span class="annot"><span class="annottext">parseBytes :: ParseSettings -&gt; ConduitT ByteString Event m ()
</span><a href="Text.XML.Stream.Parse.html#parseBytes"><span class="hs-identifier hs-var hs-var">parseBytes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Maybe PositionRange, Event) -&gt; Event)
-&gt; ConduitT ByteString (Maybe PositionRange, Event) m ()
-&gt; ConduitT ByteString Event m ()
forall (m :: * -&gt; *) o1 o2 i r.
Monad m =&gt;
(o1 -&gt; o2) -&gt; ConduitT i o1 m r -&gt; ConduitT i o2 m r
</span><span class="hs-identifier hs-var">mapOutput</span></span><span> </span><span class="annot"><span class="annottext">(Maybe PositionRange, Event) -&gt; Event
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">(ConduitT ByteString (Maybe PositionRange, Event) m ()
 -&gt; ConduitT ByteString Event m ())
-&gt; (ParseSettings
    -&gt; ConduitT ByteString (Maybe PositionRange, Event) m ())
-&gt; ParseSettings
-&gt; ConduitT ByteString Event m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ParseSettings
-&gt; ConduitT ByteString (Maybe PositionRange, Event) m ()
forall (m :: * -&gt; *).
MonadThrow m =&gt;
ParseSettings
-&gt; ConduitT ByteString (Maybe PositionRange, Event) m ()
</span><a href="Text.XML.Stream.Parse.html#parseBytesPos"><span class="hs-identifier hs-var">parseBytesPos</span></a></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span id="local-6989586621679094090"><span class="annot"><a href="Text.XML.Stream.Parse.html#parseBytesPos"><span class="hs-identifier hs-type">parseBytesPos</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679094090"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-376"></span><span>              </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span>
</span><span id="line-377"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.ByteString</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#EventPos"><span class="hs-identifier hs-type">EventPos</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679094090"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-378"></span><span id="parseBytesPos"><span class="annot"><span class="annottext">parseBytesPos :: ParseSettings
-&gt; ConduitT ByteString (Maybe PositionRange, Event) m ()
</span><a href="Text.XML.Stream.Parse.html#parseBytesPos"><span class="hs-identifier hs-var hs-var">parseBytesPos</span></a></span></span><span> </span><span id="local-6989586621679093481"><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093481"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT ByteString Text m ()
forall (m :: * -&gt; *). MonadThrow m =&gt; ConduitT ByteString Text m ()
</span><a href="Text.XML.Stream.Parse.html#detectUtf"><span class="hs-identifier hs-var">detectUtf</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT ByteString Text m ()
-&gt; ConduitM Text (Maybe PositionRange, Event) m ()
-&gt; ConduitT ByteString (Maybe PositionRange, Event) m ()
forall (m :: * -&gt; *) a b c r.
Monad m =&gt;
ConduitM a b m () -&gt; ConduitM b c m r -&gt; ConduitM a c m r
</span><span class="hs-operator hs-var">.|</span></span><span> </span><span class="annot"><span class="annottext">ParseSettings -&gt; ConduitM Text (Maybe PositionRange, Event) m ()
forall (m :: * -&gt; *).
MonadThrow m =&gt;
ParseSettings -&gt; ConduitT Text (Maybe PositionRange, Event) m ()
</span><a href="Text.XML.Stream.Parse.html#parseTextPos"><span class="hs-identifier hs-var">parseTextPos</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093481"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span id="local-6989586621679094079"><span class="annot"><a href="Text.XML.Stream.Parse.html#dropBOM"><span class="hs-identifier hs-type">dropBOM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679094079"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="annot"><a href="#local-6989586621679094079"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-381"></span><span id="dropBOM"><span class="annot"><span class="annottext">dropBOM :: ConduitT Text Text m ()
</span><a href="Text.XML.Stream.Parse.html#dropBOM"><span class="hs-identifier hs-var hs-var">dropBOM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-382"></span><span>    </span><span class="annot"><span class="annottext">ConduitT Text Text m (Maybe Text)
forall (m :: * -&gt; *) i. Monad m =&gt; Consumer i m (Maybe i)
</span><span class="hs-identifier hs-var">await</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Text Text m (Maybe Text)
-&gt; (Maybe Text -&gt; ConduitT Text Text m ())
-&gt; ConduitT Text Text m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Text Text m ()
-&gt; (Text -&gt; ConduitT Text Text m ())
-&gt; Maybe Text
-&gt; ConduitT Text Text m ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; ConduitT Text Text m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ConduitT Text Text m ()
</span><a href="#local-6989586621679093478"><span class="hs-identifier hs-var">push</span></a></span><span>
</span><span id="line-383"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-384"></span><span>    </span><span id="local-6989586621679093478"><span class="annot"><span class="annottext">push :: Text -&gt; ConduitT Text Text m ()
</span><a href="#local-6989586621679093478"><span class="hs-identifier hs-var hs-var">push</span></a></span></span><span> </span><span id="local-6989586621679093477"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093477"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-385"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe (Char, Text)
</span><span class="hs-identifier hs-var">T.uncons</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093477"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-386"></span><span>            </span><span class="annot"><span class="annottext">Maybe (Char, Text)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConduitT Text Text m ()
forall (m :: * -&gt; *). Monad m =&gt; ConduitT Text Text m ()
</span><a href="Text.XML.Stream.Parse.html#dropBOM"><span class="hs-identifier hs-var">dropBOM</span></a></span><span>
</span><span id="line-387"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679093475"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679093475"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093474"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093474"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-388"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679093473"><span class="annot"><span class="annottext">output :: Text
</span><a href="#local-6989586621679093473"><span class="hs-identifier hs-var hs-var">output</span></a></span></span><span>
</span><span id="line-389"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679093475"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\xfeef'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093474"><span class="hs-identifier hs-var">cs</span></a></span><span>
</span><span id="line-390"></span><span>                        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093477"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-391"></span><span>                 </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ConduitT Text Text m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">yield</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093473"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Text Text m ()
-&gt; ConduitT Text Text m () -&gt; ConduitT Text Text m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Text Text m ()
forall o. ConduitT o o m ()
</span><a href="#local-6989586621679093471"><span class="hs-identifier hs-var">idConduit</span></a></span><span>
</span><span id="line-392"></span><span>    </span><span id="local-6989586621679093471"><span class="annot"><span class="annottext">idConduit :: ConduitT o o m ()
</span><a href="#local-6989586621679093471"><span class="hs-identifier hs-var hs-var">idConduit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT o o m (Maybe o)
forall (m :: * -&gt; *) i. Monad m =&gt; Consumer i m (Maybe i)
</span><span class="hs-identifier hs-var">await</span></span><span> </span><span class="annot"><span class="annottext">ConduitT o o m (Maybe o)
-&gt; (Maybe o -&gt; ConduitT o o m ()) -&gt; ConduitT o o m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ConduitT o o m ()
-&gt; (o -&gt; ConduitT o o m ()) -&gt; Maybe o -&gt; ConduitT o o m ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; ConduitT o o m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679093470"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679093470"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">o -&gt; ConduitT o o m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">yield</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679093470"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT o o m () -&gt; ConduitT o o m () -&gt; ConduitT o o m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ConduitT o o m ()
</span><a href="#local-6989586621679093471"><span class="hs-identifier hs-var">idConduit</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-393"></span><span>
</span><span id="line-394"></span><span class="hs-comment">-- | Parses a character stream into 'Event's. This function is implemented</span><span>
</span><span id="line-395"></span><span class="hs-comment">-- fully in Haskell using attoparsec-text for parsing. The produced error</span><span>
</span><span id="line-396"></span><span class="hs-comment">-- messages do not give line/column information, so you may prefer to stick</span><span>
</span><span id="line-397"></span><span class="hs-comment">-- with the parser provided by libxml-enumerator. However, this has the</span><span>
</span><span id="line-398"></span><span class="hs-comment">-- advantage of not relying on any C libraries.</span><span>
</span><span id="line-399"></span><span class="hs-comment">--</span><span>
</span><span id="line-400"></span><span class="hs-comment">-- Since 1.2.4</span><span>
</span><span id="line-401"></span><span id="local-6989586621679093469"><span class="annot"><a href="Text.XML.Stream.Parse.html#parseText"><span class="hs-identifier hs-type">parseText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093469"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093469"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-402"></span><span id="parseText"><span class="annot"><span class="annottext">parseText :: ParseSettings -&gt; ConduitT Text Event m ()
</span><a href="Text.XML.Stream.Parse.html#parseText"><span class="hs-identifier hs-var hs-var">parseText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Maybe PositionRange, Event) -&gt; Event)
-&gt; ConduitT Text (Maybe PositionRange, Event) m ()
-&gt; ConduitT Text Event m ()
forall (m :: * -&gt; *) o1 o2 i r.
Monad m =&gt;
(o1 -&gt; o2) -&gt; ConduitT i o1 m r -&gt; ConduitT i o2 m r
</span><span class="hs-identifier hs-var">mapOutput</span></span><span> </span><span class="annot"><span class="annottext">(Maybe PositionRange, Event) -&gt; Event
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">(ConduitT Text (Maybe PositionRange, Event) m ()
 -&gt; ConduitT Text Event m ())
-&gt; (ParseSettings
    -&gt; ConduitT Text (Maybe PositionRange, Event) m ())
-&gt; ParseSettings
-&gt; ConduitT Text Event m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ParseSettings -&gt; ConduitT Text (Maybe PositionRange, Event) m ()
forall (m :: * -&gt; *).
MonadThrow m =&gt;
ParseSettings -&gt; ConduitT Text (Maybe PositionRange, Event) m ()
</span><a href="Text.XML.Stream.Parse.html#parseTextPos"><span class="hs-identifier hs-var">parseTextPos</span></a></span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span class="hs-comment">-- | Same as 'parseText', but includes the position of each event.</span><span>
</span><span id="line-406"></span><span class="hs-comment">--</span><span>
</span><span id="line-407"></span><span class="hs-comment">-- Since 1.2.4</span><span>
</span><span id="line-408"></span><span id="local-6989586621679094081"><span class="annot"><a href="Text.XML.Stream.Parse.html#parseTextPos"><span class="hs-identifier hs-type">parseTextPos</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679094081"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-409"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span>
</span><span id="line-410"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#EventPos"><span class="hs-identifier hs-type">EventPos</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679094081"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-411"></span><span id="parseTextPos"><span class="annot"><span class="annottext">parseTextPos :: ParseSettings -&gt; ConduitT Text (Maybe PositionRange, Event) m ()
</span><a href="Text.XML.Stream.Parse.html#parseTextPos"><span class="hs-identifier hs-var hs-var">parseTextPos</span></a></span></span><span> </span><span id="local-6989586621679093468"><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093468"><span class="hs-identifier hs-var">de</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-412"></span><span>    </span><span class="annot"><span class="annottext">ConduitT Text Text m ()
forall (m :: * -&gt; *). Monad m =&gt; ConduitT Text Text m ()
</span><a href="Text.XML.Stream.Parse.html#dropBOM"><span class="hs-identifier hs-var">dropBOM</span></a></span><span>
</span><span id="line-413"></span><span>        </span><span class="annot"><span class="annottext">ConduitT Text Text m ()
-&gt; ConduitT Text (Maybe PositionRange, Event) m ()
-&gt; ConduitT Text (Maybe PositionRange, Event) m ()
forall (m :: * -&gt; *) a b c r.
Monad m =&gt;
ConduitM a b m () -&gt; ConduitM b c m r -&gt; ConduitM a c m r
</span><span class="hs-operator hs-var">.|</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Text (PositionRange, Token) m ()
</span><a href="#local-6989586621679093467"><span class="hs-identifier hs-var">tokenize</span></a></span><span>
</span><span id="line-414"></span><span>        </span><span class="annot"><span class="annottext">ConduitT Text (PositionRange, Token) m ()
-&gt; ConduitM
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
-&gt; ConduitT Text (Maybe PositionRange, Event) m ()
forall (m :: * -&gt; *) a b c r.
Monad m =&gt;
ConduitM a b m () -&gt; ConduitM b c m r -&gt; ConduitM a c m r
</span><span class="hs-operator hs-var">.|</span></span><span> </span><span class="annot"><span class="annottext">ParseSettings
-&gt; ConduitM
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
forall (m :: * -&gt; *).
Monad m =&gt;
ParseSettings
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
</span><a href="Text.XML.Stream.Parse.html#toEventC"><span class="hs-identifier hs-var">toEventC</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093468"><span class="hs-identifier hs-var">de</span></a></span><span>
</span><span id="line-415"></span><span>        </span><span class="annot"><span class="annottext">ConduitM (PositionRange, Token) (Maybe PositionRange, Event) m ()
-&gt; ConduitM
     (Maybe PositionRange, Event) (Maybe PositionRange, Event) m ()
-&gt; ConduitM
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
forall (m :: * -&gt; *) a b c r.
Monad m =&gt;
ConduitM a b m () -&gt; ConduitM b c m r -&gt; ConduitM a c m r
</span><span class="hs-operator hs-var">.|</span></span><span> </span><span class="annot"><span class="annottext">ConduitM
  (Maybe PositionRange, Event) (Maybe PositionRange, Event) m ()
</span><a href="#local-6989586621679093465"><span class="hs-identifier hs-var">addBeginEnd</span></a></span><span>
</span><span id="line-416"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-417"></span><span>    </span><span id="local-6989586621679093467"><span class="annot"><span class="annottext">tokenize :: ConduitT Text (PositionRange, Token) m ()
</span><a href="#local-6989586621679093467"><span class="hs-identifier hs-var hs-var">tokenize</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseSettings -&gt; ConduitT Text (PositionRange, Token) m ()
forall (m :: * -&gt; *).
MonadThrow m =&gt;
ParseSettings -&gt; ConduitT Text (PositionRange, Token) m ()
</span><a href="Text.XML.Stream.Parse.html#conduitToken"><span class="hs-identifier hs-var">conduitToken</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093468"><span class="hs-identifier hs-var">de</span></a></span><span>
</span><span id="line-418"></span><span>    </span><span id="local-6989586621679093465"><span class="annot"><span class="annottext">addBeginEnd :: ConduitM
  (Maybe PositionRange, Event) (Maybe PositionRange, Event) m ()
</span><a href="#local-6989586621679093465"><span class="hs-identifier hs-var hs-var">addBeginEnd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe PositionRange, Event)
-&gt; ConduitM
     (Maybe PositionRange, Event) (Maybe PositionRange, Event) m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">yield</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe PositionRange
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Event
</span><span class="hs-identifier hs-var">EventBeginDocument</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ConduitM
  (Maybe PositionRange, Event) (Maybe PositionRange, Event) m ()
-&gt; ConduitM
     (Maybe PositionRange, Event) (Maybe PositionRange, Event) m ()
-&gt; ConduitM
     (Maybe PositionRange, Event) (Maybe PositionRange, Event) m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ConduitM
  (Maybe PositionRange, Event) (Maybe PositionRange, Event) m ()
forall a. ConduitT (Maybe a, Event) (Maybe a, Event) m ()
</span><a href="#local-6989586621679093462"><span class="hs-identifier hs-var">addEnd</span></a></span><span>
</span><span id="line-419"></span><span>    </span><span id="local-6989586621679093462"><span class="annot"><span class="annottext">addEnd :: ConduitT (Maybe a, Event) (Maybe a, Event) m ()
</span><a href="#local-6989586621679093462"><span class="hs-identifier hs-var hs-var">addEnd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT
  (Maybe a, Event) (Maybe a, Event) m (Maybe (Maybe a, Event))
forall (m :: * -&gt; *) i. Monad m =&gt; Consumer i m (Maybe i)
</span><span class="hs-identifier hs-var">await</span></span><span> </span><span class="annot"><span class="annottext">ConduitT
  (Maybe a, Event) (Maybe a, Event) m (Maybe (Maybe a, Event))
-&gt; (Maybe (Maybe a, Event)
    -&gt; ConduitT (Maybe a, Event) (Maybe a, Event) m ())
-&gt; ConduitT (Maybe a, Event) (Maybe a, Event) m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ConduitT (Maybe a, Event) (Maybe a, Event) m ()
-&gt; ((Maybe a, Event)
    -&gt; ConduitT (Maybe a, Event) (Maybe a, Event) m ())
-&gt; Maybe (Maybe a, Event)
-&gt; ConduitT (Maybe a, Event) (Maybe a, Event) m ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span>
</span><span id="line-420"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Maybe a, Event) -&gt; ConduitT (Maybe a, Event) (Maybe a, Event) m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">yield</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Event
</span><span class="hs-identifier hs-var">EventEndDocument</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-421"></span><span>        </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679093460"><span class="annot"><span class="annottext">(Maybe a, Event)
</span><a href="#local-6989586621679093460"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Maybe a, Event) -&gt; ConduitT (Maybe a, Event) (Maybe a, Event) m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">yield</span></span><span> </span><span class="annot"><span class="annottext">(Maybe a, Event)
</span><a href="#local-6989586621679093460"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT (Maybe a, Event) (Maybe a, Event) m ()
-&gt; ConduitT (Maybe a, Event) (Maybe a, Event) m ()
-&gt; ConduitT (Maybe a, Event) (Maybe a, Event) m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ConduitT (Maybe a, Event) (Maybe a, Event) m ()
</span><a href="#local-6989586621679093462"><span class="hs-identifier hs-var">addEnd</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span id="local-6989586621679094072"><span class="annot"><a href="Text.XML.Stream.Parse.html#toEventC"><span class="hs-identifier hs-type">toEventC</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679094072"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PositionRange</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Token.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#EventPos"><span class="hs-identifier hs-type">EventPos</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679094072"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-424"></span><span id="toEventC"><span class="annot"><span class="annottext">toEventC :: ParseSettings
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
</span><a href="Text.XML.Stream.Parse.html#toEventC"><span class="hs-identifier hs-var hs-var">toEventC</span></a></span></span><span> </span><span id="local-6989586621679093459"><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093459"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-425"></span><span>    </span><span class="annot"><span class="annottext">EntityTable
-&gt; [NSLevel]
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
</span><a href="#local-6989586621679093458"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-426"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-427"></span><span>    </span><span id="local-6989586621679093458"><span class="annot"><span class="annottext">go :: EntityTable
-&gt; [NSLevel]
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
</span><a href="#local-6989586621679093458"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679093457"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093457"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679093456"><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093456"><span class="hs-identifier hs-var">levels</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-428"></span><span>        </span><span class="annot"><span class="annottext">ConduitT
  (PositionRange, Token)
  (Maybe PositionRange, Event)
  m
  (Maybe (PositionRange, Token))
forall (m :: * -&gt; *) i. Monad m =&gt; Consumer i m (Maybe i)
</span><span class="hs-identifier hs-var">await</span></span><span> </span><span class="annot"><span class="annottext">ConduitT
  (PositionRange, Token)
  (Maybe PositionRange, Event)
  m
  (Maybe (PositionRange, Token))
-&gt; (Maybe (PositionRange, Token)
    -&gt; ConduitT
         (PositionRange, Token) (Maybe PositionRange, Event) m ())
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ConduitT (PositionRange, Token) (Maybe PositionRange, Event) m ()
-&gt; ((PositionRange, Token)
    -&gt; ConduitT
         (PositionRange, Token) (Maybe PositionRange, Event) m ())
-&gt; Maybe (PositionRange, Token)
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">()
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(PositionRange, Token)
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
</span><a href="#local-6989586621679093455"><span class="hs-identifier hs-var">push</span></a></span><span>
</span><span id="line-429"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-430"></span><span>        </span><span id="local-6989586621679093455"><span class="annot"><span class="annottext">push :: (PositionRange, Token)
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
</span><a href="#local-6989586621679093455"><span class="hs-identifier hs-var hs-var">push</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679093454"><span class="annot"><span class="annottext">PositionRange
</span><a href="#local-6989586621679093454"><span class="hs-identifier hs-var">position</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093453"><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679093453"><span class="hs-identifier hs-var">token</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-431"></span><span>            </span><span class="annot"><span class="annottext">(Event
 -&gt; ConduitT
      (PositionRange, Token) (Maybe PositionRange, Event) m ())
-&gt; [Event]
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Maybe PositionRange, Event)
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">yield</span></span><span> </span><span class="annot"><span class="annottext">((Maybe PositionRange, Event)
 -&gt; ConduitT
      (PositionRange, Token) (Maybe PositionRange, Event) m ())
-&gt; (Event -&gt; (Maybe PositionRange, Event))
-&gt; Event
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PositionRange -&gt; Maybe PositionRange
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">PositionRange
</span><a href="#local-6989586621679093454"><span class="hs-identifier hs-var">position</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Event]
</span><a href="#local-6989586621679093452"><span class="hs-identifier hs-var">events</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT (PositionRange, Token) (Maybe PositionRange, Event) m ()
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">EntityTable
-&gt; [NSLevel]
-&gt; ConduitT
     (PositionRange, Token) (Maybe PositionRange, Event) m ()
</span><a href="#local-6989586621679093458"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093451"><span class="hs-identifier hs-var">es'</span></a></span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093450"><span class="hs-identifier hs-var">levels'</span></a></span><span>
</span><span id="line-432"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-433"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679093451"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093451"><span class="hs-identifier hs-var">es'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093450"><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093450"><span class="hs-identifier hs-var">levels'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093452"><span class="annot"><span class="annottext">[Event]
</span><a href="#local-6989586621679093452"><span class="hs-identifier hs-var">events</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseSettings
-&gt; EntityTable
-&gt; [NSLevel]
-&gt; Token
-&gt; (EntityTable, [NSLevel], [Event])
</span><a href="Text.XML.Stream.Parse.html#tokenToEvent"><span class="hs-identifier hs-var">tokenToEvent</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093459"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093457"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">[NSLevel]
</span><a href="#local-6989586621679093456"><span class="hs-identifier hs-var">levels</span></a></span><span> </span><span class="annot"><span class="annottext">Token
</span><a href="#local-6989586621679093453"><span class="hs-identifier hs-var">token</span></a></span><span>
</span><span id="line-434"></span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span class="hs-keyword">type</span><span> </span><span id="DecodeEntities"><span class="annot"><a href="Text.XML.Stream.Parse.html#DecodeEntities"><span class="hs-identifier hs-var">DecodeEntities</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Content</span></span><span>
</span><span id="line-437"></span><span class="hs-keyword">type</span><span> </span><span id="DecodeIllegalCharacters"><span class="annot"><a href="Text.XML.Stream.Parse.html#DecodeIllegalCharacters"><span class="hs-identifier hs-var">DecodeIllegalCharacters</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span>
</span><span id="line-438"></span><span>
</span><span id="line-439"></span><span class="hs-keyword">data</span><span> </span><span id="ParseSettings"><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-var">ParseSettings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ParseSettings"><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-var">ParseSettings</span></a></span></span><span>
</span><span id="line-440"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="psDecodeEntities"><span class="annot"><span class="annottext">ParseSettings -&gt; DecodeEntities
</span><a href="Text.XML.Stream.Parse.html#psDecodeEntities"><span class="hs-identifier hs-var hs-var">psDecodeEntities</span></a></span></span><span>          </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#DecodeEntities"><span class="hs-identifier hs-type">DecodeEntities</span></a></span><span>
</span><span id="line-441"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="psRetainNamespaces"><span class="annot"><span class="annottext">ParseSettings -&gt; Bool
</span><a href="Text.XML.Stream.Parse.html#psRetainNamespaces"><span class="hs-identifier hs-var hs-var">psRetainNamespaces</span></a></span></span><span>        </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-442"></span><span>    </span><span class="hs-comment">-- ^ Whether the original xmlns attributes should be retained in the parsed</span><span>
</span><span id="line-443"></span><span>    </span><span class="hs-comment">-- values. For more information on motivation, see:</span><span>
</span><span id="line-444"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-445"></span><span>    </span><span class="hs-comment">-- &lt;https://github.com/snoyberg/xml/issues/38&gt;</span><span>
</span><span id="line-446"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-447"></span><span>    </span><span class="hs-comment">-- Default: False</span><span>
</span><span id="line-448"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-449"></span><span>    </span><span class="hs-comment">-- Since 1.2.1</span><span>
</span><span id="line-450"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="psDecodeIllegalCharacters"><span class="annot"><span class="annottext">ParseSettings -&gt; DecodeIllegalCharacters
</span><a href="Text.XML.Stream.Parse.html#psDecodeIllegalCharacters"><span class="hs-identifier hs-var hs-var">psDecodeIllegalCharacters</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#DecodeIllegalCharacters"><span class="hs-identifier hs-type">DecodeIllegalCharacters</span></a></span><span>
</span><span id="line-451"></span><span>    </span><span class="hs-comment">-- ^ How to decode illegal character references (@&amp;#[0-9]+;@ or @&amp;#x[0-9a-fA-F]+;@).</span><span>
</span><span id="line-452"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-453"></span><span>    </span><span class="hs-comment">-- Character references within the legal ranges defined by &lt;https://www.w3.org/TR/REC-xml/#NT-Char the standard&gt; are automatically parsed.</span><span>
</span><span id="line-454"></span><span>    </span><span class="hs-comment">-- Others are passed to this function.</span><span>
</span><span id="line-455"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-456"></span><span>    </span><span class="hs-comment">-- Default: @const Nothing@</span><span>
</span><span id="line-457"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-458"></span><span>    </span><span class="hs-comment">-- Since 1.7.1</span><span>
</span><span id="line-459"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="psEntityExpansionSizeLimit"><span class="annot"><span class="annottext">ParseSettings -&gt; Int
</span><a href="Text.XML.Stream.Parse.html#psEntityExpansionSizeLimit"><span class="hs-identifier hs-var hs-var">psEntityExpansionSizeLimit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-460"></span><span>    </span><span class="hs-comment">-- ^ Maximum number of characters allowed in expanding an</span><span>
</span><span id="line-461"></span><span>    </span><span class="hs-comment">-- internal entity.  This is intended to protect against the</span><span>
</span><span id="line-462"></span><span>    </span><span class="hs-comment">-- billion laughs attack.</span><span>
</span><span id="line-463"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-464"></span><span>    </span><span class="hs-comment">-- Default: @8192@</span><span>
</span><span id="line-465"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-466"></span><span>    </span><span class="hs-comment">-- Since 1.9.1</span><span>
</span><span id="line-467"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-468"></span><span>
</span><span id="line-469"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-470"></span><span>    </span><span id="local-6989586621679093446"><span class="annot"><span class="annottext">def :: ParseSettings
</span><a href="#local-6989586621679093446"><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ParseSettings :: DecodeEntities
-&gt; Bool -&gt; DecodeIllegalCharacters -&gt; Int -&gt; ParseSettings
</span><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span>
</span><span id="line-471"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">psDecodeEntities :: DecodeEntities
</span><a href="Text.XML.Stream.Parse.html#psDecodeEntities"><span class="hs-identifier hs-var">psDecodeEntities</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DecodeEntities
</span><a href="Text.XML.Stream.Parse.html#decodeXmlEntities"><span class="hs-identifier hs-var">decodeXmlEntities</span></a></span><span>
</span><span id="line-472"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psRetainNamespaces :: Bool
</span><a href="Text.XML.Stream.Parse.html#psRetainNamespaces"><span class="hs-identifier hs-var">psRetainNamespaces</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-473"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psDecodeIllegalCharacters :: DecodeIllegalCharacters
</span><a href="Text.XML.Stream.Parse.html#psDecodeIllegalCharacters"><span class="hs-identifier hs-var">psDecodeIllegalCharacters</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Char -&gt; DecodeIllegalCharacters
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Maybe Char
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-474"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">psEntityExpansionSizeLimit :: Int
</span><a href="Text.XML.Stream.Parse.html#psEntityExpansionSizeLimit"><span class="hs-identifier hs-var">psEntityExpansionSizeLimit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8192</span></span><span>
</span><span id="line-475"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-476"></span><span>
</span><span id="line-477"></span><span id="local-6989586621679094071"><span class="annot"><a href="Text.XML.Stream.Parse.html#conduitToken"><span class="hs-identifier hs-type">conduitToken</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679094071"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">PositionRange</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Text.XML.Stream.Token.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679094071"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-478"></span><span id="conduitToken"><span class="annot"><span class="annottext">conduitToken :: ParseSettings -&gt; ConduitT Text (PositionRange, Token) m ()
</span><a href="Text.XML.Stream.Parse.html#conduitToken"><span class="hs-identifier hs-var hs-var">conduitToken</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parser Text Token -&gt; ConduitT Text (PositionRange, Token) m ()
forall a (m :: * -&gt; *) b.
(AttoparsecInput a, MonadThrow m) =&gt;
Parser a b -&gt; ConduitT a (PositionRange, b) m ()
</span><span class="hs-identifier hs-var">conduitParser</span></span><span> </span><span class="annot"><span class="annottext">(Parser Text Token -&gt; ConduitT Text (PositionRange, Token) m ())
-&gt; (ParseSettings -&gt; Parser Text Token)
-&gt; ParseSettings
-&gt; ConduitT Text (PositionRange, Token) m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ParseSettings -&gt; Parser Text Token
</span><a href="Text.XML.Stream.Parse.html#parseToken"><span class="hs-identifier hs-var">parseToken</span></a></span><span>
</span><span id="line-479"></span><span>
</span><span id="line-480"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#parseToken"><span class="hs-identifier hs-type">parseToken</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Parser</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Token.html#Token"><span class="hs-identifier hs-type">Token</span></a></span><span>
</span><span id="line-481"></span><span id="parseToken"><span class="annot"><span class="annottext">parseToken :: ParseSettings -&gt; Parser Text Token
</span><a href="Text.XML.Stream.Parse.html#parseToken"><span class="hs-identifier hs-var hs-var">parseToken</span></a></span></span><span> </span><span id="local-6989586621679093444"><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093444"><span class="hs-identifier hs-var">settings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-482"></span><span>  </span><span id="local-6989586621679093443"><span class="annot"><span class="annottext">Maybe Char
</span><a href="#local-6989586621679093443"><span class="hs-identifier hs-var">mbc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser (Maybe Char)
</span><span class="hs-identifier hs-var">peekChar</span></span><span>
</span><span id="line-483"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Char
</span><a href="#local-6989586621679093443"><span class="hs-identifier hs-var">mbc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-484"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&lt;'</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Parser Char
</span><span class="hs-identifier hs-var">char</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&lt;'</span></span><span> </span><span class="annot"><span class="annottext">Parser Char -&gt; Parser Text Token -&gt; Parser Text Token
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text Token
</span><a href="#local-6989586621679093442"><span class="hs-identifier hs-var">parseLt</span></a></span><span>
</span><span id="line-485"></span><span>    </span><span class="annot"><span class="annottext">Maybe Char
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Content -&gt; Token
</span><a href="Text.XML.Stream.Token.html#TokenContent"><span class="hs-identifier hs-var">TokenContent</span></a></span><span> </span><span class="annot"><span class="annottext">(Content -&gt; Token) -&gt; Parser Text Content -&gt; Parser Text Token
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ParseSettings -&gt; Bool -&gt; Bool -&gt; Parser Text Content
</span><a href="Text.XML.Stream.Parse.html#parseContent"><span class="hs-identifier hs-var">parseContent</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093444"><span class="hs-identifier hs-var">settings</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-486"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-487"></span><span>    </span><span id="local-6989586621679093442"><span class="annot"><span class="annottext">parseLt :: Parser Text Token
</span><a href="#local-6989586621679093442"><span class="hs-identifier hs-var hs-var">parseLt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-488"></span><span>        </span><span id="local-6989586621679093440"><span class="annot"><span class="annottext">Maybe Char
</span><a href="#local-6989586621679093440"><span class="hs-identifier hs-var">mbc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser (Maybe Char)
</span><span class="hs-identifier hs-var">peekChar</span></span><span>
</span><span id="line-489"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Char
</span><a href="#local-6989586621679093440"><span class="hs-identifier hs-var">mbc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-490"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'?'</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'?'</span></span><span> </span><span class="annot"><span class="annottext">Parser Text () -&gt; Parser Text Token -&gt; Parser Text Token
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text Token
</span><a href="#local-6989586621679093438"><span class="hs-identifier hs-var">parseInstr</span></a></span><span>
</span><span id="line-491"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'!'</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'!'</span></span><span> </span><span class="annot"><span class="annottext">Parser Text () -&gt; Parser Text Token -&gt; Parser Text Token
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span>
</span><span id="line-492"></span><span>                        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parser Text Token
</span><a href="#local-6989586621679093437"><span class="hs-identifier hs-var">parseComment</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text Token -&gt; Parser Text Token -&gt; Parser Text Token
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text Token
</span><a href="#local-6989586621679093436"><span class="hs-identifier hs-var">parseCdata</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text Token -&gt; Parser Text Token -&gt; Parser Text Token
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text Token
</span><a href="#local-6989586621679093435"><span class="hs-identifier hs-var">parseDoctype</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-493"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'/'</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'/'</span></span><span> </span><span class="annot"><span class="annottext">Parser Text () -&gt; Parser Text Token -&gt; Parser Text Token
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text Token
</span><a href="#local-6989586621679093434"><span class="hs-identifier hs-var">parseEnd</span></a></span><span>
</span><span id="line-494"></span><span>          </span><span class="annot"><span class="annottext">Maybe Char
</span><span class="hs-identifier">_</span></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Parser Text Token
</span><a href="#local-6989586621679093433"><span class="hs-identifier hs-var">parseBegin</span></a></span><span>
</span><span id="line-495"></span><span>    </span><span id="local-6989586621679093438"><span class="annot"><span class="annottext">parseInstr :: Parser Text Token
</span><a href="#local-6989586621679093438"><span class="hs-identifier hs-var hs-var">parseInstr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-496"></span><span>        </span><span id="local-6989586621679093432"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093432"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser Text
</span><a href="Text.XML.Stream.Parse.html#parseIdent"><span class="hs-identifier hs-var">parseIdent</span></a></span><span>
</span><span id="line-497"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093432"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;xml&quot;</span></span><span>
</span><span id="line-498"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-499"></span><span>                </span><span id="local-6989586621679093430"><span class="annot"><span class="annottext">[TAttribute]
</span><a href="#local-6989586621679093430"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser Text TAttribute -&gt; Parser Text [TAttribute]
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f [a]
</span><span class="hs-identifier hs-var">A.many</span></span><span> </span><span class="annot"><span class="annottext">(Parser Text TAttribute -&gt; Parser Text [TAttribute])
-&gt; Parser Text TAttribute -&gt; Parser Text [TAttribute]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ParseSettings -&gt; Parser Text TAttribute
</span><a href="Text.XML.Stream.Parse.html#parseAttribute"><span class="hs-identifier hs-var">parseAttribute</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093444"><span class="hs-identifier hs-var">settings</span></a></span><span>
</span><span id="line-500"></span><span>                </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-501"></span><span>                </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'?'</span></span><span>
</span><span id="line-502"></span><span>                </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&gt;'</span></span><span>
</span><span id="line-503"></span><span>                </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#newline"><span class="hs-identifier hs-var">newline</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text () -&gt; Parser Text () -&gt; Parser Text ()
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; Parser Text ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-504"></span><span>                </span><span class="annot"><span class="annottext">Token -&gt; Parser Text Token
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Parser Text Token) -&gt; Token -&gt; Parser Text Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TAttribute] -&gt; Token
</span><a href="Text.XML.Stream.Token.html#TokenXMLDeclaration"><span class="hs-identifier hs-var">TokenXMLDeclaration</span></a></span><span> </span><span class="annot"><span class="annottext">[TAttribute]
</span><a href="#local-6989586621679093430"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-505"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-506"></span><span>                </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-507"></span><span>                </span><span id="local-6989586621679093425"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093425"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; Parser Text String -&gt; Parser Text
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Char -&gt; Parser Text -&gt; Parser Text String
forall (f :: * -&gt; *) a b. Alternative f =&gt; f a -&gt; f b -&gt; f [a]
</span><span class="hs-identifier hs-var">manyTill</span></span><span> </span><span class="annot"><span class="annottext">Parser Char
</span><span class="hs-identifier hs-var">anyChar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Parser Text
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;?&gt;&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-508"></span><span>                </span><span class="annot"><span class="annottext">Token -&gt; Parser Text Token
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Parser Text Token) -&gt; Token -&gt; Parser Text Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Instruction -&gt; Token
</span><a href="Text.XML.Stream.Token.html#TokenInstruction"><span class="hs-identifier hs-var">TokenInstruction</span></a></span><span> </span><span class="annot"><span class="annottext">(Instruction -&gt; Token) -&gt; Instruction -&gt; Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Instruction
</span><span class="hs-identifier hs-var">Instruction</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093432"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093425"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-509"></span><span>          </span><span class="annot"><span class="annottext">Parser Text Token -&gt; String -&gt; Parser Text Token
forall i a. Parser i a -&gt; String -&gt; Parser i a
</span><span class="hs-operator hs-var">&lt;?&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;instruction&quot;</span></span><span>
</span><span id="line-510"></span><span>    </span><span id="local-6989586621679093437"><span class="annot"><span class="annottext">parseComment :: Parser Text Token
</span><a href="#local-6989586621679093437"><span class="hs-identifier hs-var hs-var">parseComment</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-511"></span><span>        </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'-'</span></span><span>
</span><span id="line-512"></span><span>        </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'-'</span></span><span>
</span><span id="line-513"></span><span>        </span><span id="local-6989586621679093423"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093423"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; Parser Text String -&gt; Parser Text
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Char -&gt; Parser Text -&gt; Parser Text String
forall (f :: * -&gt; *) a b. Alternative f =&gt; f a -&gt; f b -&gt; f [a]
</span><span class="hs-identifier hs-var">manyTill</span></span><span> </span><span class="annot"><span class="annottext">Parser Char
</span><span class="hs-identifier hs-var">anyChar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Parser Text
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;--&gt;&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-514"></span><span>        </span><span class="annot"><span class="annottext">Token -&gt; Parser Text Token
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Parser Text Token) -&gt; Token -&gt; Parser Text Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Token
</span><a href="Text.XML.Stream.Token.html#TokenComment"><span class="hs-identifier hs-var">TokenComment</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093423"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text Token -&gt; String -&gt; Parser Text Token
forall i a. Parser i a -&gt; String -&gt; Parser i a
</span><span class="hs-operator hs-var">&lt;?&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;comment&quot;</span></span><span>
</span><span id="line-515"></span><span>    </span><span id="local-6989586621679093436"><span class="annot"><span class="annottext">parseCdata :: Parser Text Token
</span><a href="#local-6989586621679093436"><span class="hs-identifier hs-var hs-var">parseCdata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-516"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser Text
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;[CDATA[&quot;</span></span><span>
</span><span id="line-517"></span><span>        </span><span id="local-6989586621679093422"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093422"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; Parser Text String -&gt; Parser Text
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Char -&gt; Parser Text -&gt; Parser Text String
forall (f :: * -&gt; *) a b. Alternative f =&gt; f a -&gt; f b -&gt; f [a]
</span><span class="hs-identifier hs-var">manyTill</span></span><span> </span><span class="annot"><span class="annottext">Parser Char
</span><span class="hs-identifier hs-var">anyChar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Parser Text
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;]]&gt;&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-518"></span><span>        </span><span class="annot"><span class="annottext">Token -&gt; Parser Text Token
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Parser Text Token) -&gt; Token -&gt; Parser Text Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Token
</span><a href="Text.XML.Stream.Token.html#TokenCDATA"><span class="hs-identifier hs-var">TokenCDATA</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093422"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text Token -&gt; String -&gt; Parser Text Token
forall i a. Parser i a -&gt; String -&gt; Parser i a
</span><span class="hs-operator hs-var">&lt;?&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CDATA&quot;</span></span><span>
</span><span id="line-519"></span><span>    </span><span id="local-6989586621679093435"><span class="annot"><span class="annottext">parseDoctype :: Parser Text Token
</span><a href="#local-6989586621679093435"><span class="hs-identifier hs-var hs-var">parseDoctype</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-520"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser Text
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DOCTYPE&quot;</span></span><span>
</span><span id="line-521"></span><span>        </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-522"></span><span>        </span><span id="local-6989586621679093421"><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093421"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser TName
</span><a href="Text.XML.Stream.Parse.html#parseName"><span class="hs-identifier hs-var">parseName</span></a></span><span>
</span><span id="line-523"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679093419"><span class="annot"><span class="annottext">i :: Text
</span><a href="#local-6989586621679093419"><span class="hs-identifier hs-var hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-524"></span><span>                </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093421"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-525"></span><span>                    </span><span class="annot"><a href="Text.XML.Stream.Token.html#TName"><span class="hs-identifier hs-type">TName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span id="local-6989586621679093418"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093418"><span class="hs-identifier hs-var">x</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093418"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-526"></span><span>                    </span><span class="annot"><a href="Text.XML.Stream.Token.html#TName"><span class="hs-identifier hs-type">TName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093417"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093417"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679093416"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093416"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.concat</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093417"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;:&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093416"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-527"></span><span>        </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-528"></span><span>        </span><span id="local-6989586621679093414"><span class="annot"><span class="annottext">Maybe ExternalID
</span><a href="#local-6989586621679093414"><span class="hs-identifier hs-var">eid</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ExternalID -&gt; Maybe ExternalID)
-&gt; Parser Text ExternalID -&gt; Parser Text (Maybe ExternalID)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ExternalID -&gt; Maybe ExternalID
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Parser Text ExternalID
</span><a href="#local-6989586621679093413"><span class="hs-identifier hs-var">parsePublicID</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text (Maybe ExternalID)
-&gt; Parser Text (Maybe ExternalID) -&gt; Parser Text (Maybe ExternalID)
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span>
</span><span id="line-529"></span><span>               </span><span class="annot"><span class="annottext">(ExternalID -&gt; Maybe ExternalID)
-&gt; Parser Text ExternalID -&gt; Parser Text (Maybe ExternalID)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ExternalID -&gt; Maybe ExternalID
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Parser Text ExternalID
</span><a href="#local-6989586621679093412"><span class="hs-identifier hs-var">parseSystemID</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text (Maybe ExternalID)
-&gt; Parser Text (Maybe ExternalID) -&gt; Parser Text (Maybe ExternalID)
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span>
</span><span id="line-530"></span><span>               </span><span class="annot"><span class="annottext">Maybe ExternalID -&gt; Parser Text (Maybe ExternalID)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe ExternalID
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-531"></span><span>        </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-532"></span><span>        </span><span id="local-6989586621679093411"><span class="annot"><span class="annottext">Maybe Char
</span><a href="#local-6989586621679093411"><span class="hs-identifier hs-var">mbc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser (Maybe Char)
</span><span class="hs-identifier hs-var">peekChar</span></span><span>
</span><span id="line-533"></span><span>        </span><span id="local-6989586621679093410"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093410"><span class="hs-identifier hs-var">ents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Char
</span><a href="#local-6989586621679093411"><span class="hs-identifier hs-var">mbc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-534"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'['</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-535"></span><span>                    </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'['</span></span><span>
</span><span id="line-536"></span><span>                       </span><span id="local-6989586621679093409"><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093409"><span class="hs-identifier hs-var">ents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(EntityTable -&gt; EntityTable) -&gt; Parser Text EntityTable
forall b. (EntityTable -&gt; b) -&gt; Parser Text b
</span><a href="#local-6989586621679093408"><span class="hs-identifier hs-var">parseDeclarations</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable -&gt; EntityTable
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-537"></span><span>                       </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-538"></span><span>                       </span><span class="annot"><span class="annottext">EntityTable -&gt; Parser Text EntityTable
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093409"><span class="hs-identifier hs-var">ents</span></a></span><span>
</span><span id="line-539"></span><span>                  </span><span class="annot"><span class="annottext">Maybe Char
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">EntityTable -&gt; Parser Text EntityTable
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-540"></span><span>        </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&gt;'</span></span><span>
</span><span id="line-541"></span><span>        </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#newline"><span class="hs-identifier hs-var">newline</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text () -&gt; Parser Text () -&gt; Parser Text ()
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; Parser Text ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-542"></span><span>        </span><span class="annot"><span class="annottext">Token -&gt; Parser Text Token
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Parser Text Token) -&gt; Token -&gt; Parser Text Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe ExternalID -&gt; EntityTable -&gt; Token
</span><a href="Text.XML.Stream.Token.html#TokenDoctype"><span class="hs-identifier hs-var">TokenDoctype</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093419"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ExternalID
</span><a href="#local-6989586621679093414"><span class="hs-identifier hs-var">eid</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable
</span><a href="#local-6989586621679093410"><span class="hs-identifier hs-var">ents</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text Token -&gt; String -&gt; Parser Text Token
forall i a. Parser i a -&gt; String -&gt; Parser i a
</span><span class="hs-operator hs-var">&lt;?&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;DOCTYPE&quot;</span></span><span>
</span><span id="line-543"></span><span>    </span><span id="local-6989586621679093408"><span class="annot"><span class="annottext">parseDeclarations :: (EntityTable -&gt; b) -&gt; Parser Text b
</span><a href="#local-6989586621679093408"><span class="hs-identifier hs-var hs-var">parseDeclarations</span></a></span></span><span> </span><span id="local-6989586621679093407"><span class="annot"><span class="annottext">EntityTable -&gt; b
</span><a href="#local-6989586621679093407"><span class="hs-identifier hs-var">front</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="hs-comment">-- we ignore everything but ENTITY</span><span>
</span><span id="line-544"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">']'</span></span><span> </span><span class="annot"><span class="annottext">Parser Text () -&gt; Parser Text b -&gt; Parser Text b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; Parser Text b
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable -&gt; b
</span><a href="#local-6989586621679093407"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text b -&gt; Parser Text b -&gt; Parser Text b
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span>
</span><span id="line-545"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parser Text (EntityTable -&gt; EntityTable)
</span><a href="#local-6989586621679093406"><span class="hs-identifier hs-var">parseEntity</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text (EntityTable -&gt; EntityTable)
-&gt; ((EntityTable -&gt; EntityTable) -&gt; Parser Text b) -&gt; Parser Text b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679093405"><span class="annot"><span class="annottext">EntityTable -&gt; EntityTable
</span><a href="#local-6989586621679093405"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(EntityTable -&gt; b) -&gt; Parser Text b
</span><a href="#local-6989586621679093408"><span class="hs-identifier hs-var">parseDeclarations</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EntityTable -&gt; b
</span><a href="#local-6989586621679093407"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">(EntityTable -&gt; b)
-&gt; (EntityTable -&gt; EntityTable) -&gt; EntityTable -&gt; b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">EntityTable -&gt; EntityTable
</span><a href="#local-6989586621679093405"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text b -&gt; Parser Text b -&gt; Parser Text b
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span>
</span><span id="line-546"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Parser Text
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;&lt;!--&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text -&gt; Parser Text String -&gt; Parser Text String
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Char -&gt; Parser Text -&gt; Parser Text String
forall (f :: * -&gt; *) a b. Alternative f =&gt; f a -&gt; f b -&gt; f [a]
</span><span class="hs-identifier hs-var">manyTill</span></span><span> </span><span class="annot"><span class="annottext">Parser Char
</span><span class="hs-identifier hs-var">anyChar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Parser Text
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;--&gt;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text String -&gt; Parser Text b -&gt; Parser Text b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span>
</span><span id="line-547"></span><span>           </span><span class="annot"><span class="annottext">(EntityTable -&gt; b) -&gt; Parser Text b
</span><a href="#local-6989586621679093408"><span class="hs-identifier hs-var">parseDeclarations</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable -&gt; b
</span><a href="#local-6989586621679093407"><span class="hs-identifier hs-var">front</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text b -&gt; Parser Text b -&gt; Parser Text b
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span>
</span><span id="line-548"></span><span>         </span><span class="hs-comment">-- this clause handles directives like &lt;!ELEMENT</span><span>
</span><span id="line-549"></span><span>         </span><span class="hs-comment">-- and processing instructions:</span><span>
</span><span id="line-550"></span><span>        </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&lt;'</span></span><span>
</span><span id="line-551"></span><span>            </span><span class="annot"><span class="annottext">Parser Text () -&gt; Parser Text ()
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">skipMany</span></span><span>
</span><span id="line-552"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parser Text -&gt; Parser Text ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Parser Text
</span><span class="hs-identifier hs-var">takeWhile1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Char -&gt; Bool
</span><span class="hs-identifier hs-var">notInClass</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;]&lt;&gt;'\&quot;&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text () -&gt; Parser Text () -&gt; Parser Text ()
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text -&gt; Parser Text ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">Parser Text
</span><a href="#local-6989586621679093404"><span class="hs-identifier hs-var">quotedText</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-553"></span><span>            </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&gt;'</span></span><span>
</span><span id="line-554"></span><span>            </span><span class="annot"><span class="annottext">(EntityTable -&gt; b) -&gt; Parser Text b
</span><a href="#local-6989586621679093408"><span class="hs-identifier hs-var">parseDeclarations</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable -&gt; b
</span><a href="#local-6989586621679093407"><span class="hs-identifier hs-var">front</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text b -&gt; Parser Text b -&gt; Parser Text b
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span>
</span><span id="line-555"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Parser Char -&gt; Parser Text ()
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">skipMany1</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Parser Char
</span><span class="hs-identifier hs-var">satisfy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Char -&gt; Bool
</span><span class="hs-identifier hs-var">notInClass</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;]&lt;&gt;&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text () -&gt; Parser Text b -&gt; Parser Text b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span>
</span><span id="line-556"></span><span>            </span><span class="annot"><span class="annottext">(EntityTable -&gt; b) -&gt; Parser Text b
</span><a href="#local-6989586621679093408"><span class="hs-identifier hs-var">parseDeclarations</span></a></span><span> </span><span class="annot"><span class="annottext">EntityTable -&gt; b
</span><a href="#local-6989586621679093407"><span class="hs-identifier hs-var">front</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-557"></span><span>    </span><span id="local-6989586621679093406"><span class="annot"><span class="annottext">parseEntity :: Parser Text (EntityTable -&gt; EntityTable)
</span><a href="#local-6989586621679093406"><span class="hs-identifier hs-var hs-var">parseEntity</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-558"></span><span>        </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser Text
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;&lt;!ENTITY&quot;</span></span><span>
</span><span id="line-559"></span><span>        </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-560"></span><span>        </span><span id="local-6989586621679093403"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093403"><span class="hs-identifier hs-var">isParameterEntity</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Parser Text Bool -&gt; Parser Text Bool
forall (f :: * -&gt; *) a. Alternative f =&gt; a -&gt; f a -&gt; f a
</span><span class="hs-identifier hs-var">AT.option</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Parser Text () -&gt; Parser Text Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&lt;$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'%'</span></span><span> </span><span class="annot"><span class="annottext">Parser Text () -&gt; Parser Text () -&gt; Parser Text ()
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-561"></span><span>        </span><span id="local-6989586621679093400"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093400"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser Text
</span><a href="Text.XML.Stream.Parse.html#parseIdent"><span class="hs-identifier hs-var">parseIdent</span></a></span><span>
</span><span id="line-562"></span><span>        </span><span id="local-6989586621679093399"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093399"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser Text
</span><a href="#local-6989586621679093404"><span class="hs-identifier hs-var">quotedText</span></a></span><span>
</span><span id="line-563"></span><span>        </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-564"></span><span>        </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&gt;'</span></span><span>
</span><span id="line-565"></span><span>        </span><span class="annot"><span class="annottext">(EntityTable -&gt; EntityTable)
-&gt; Parser Text (EntityTable -&gt; EntityTable)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((EntityTable -&gt; EntityTable)
 -&gt; Parser Text (EntityTable -&gt; EntityTable))
-&gt; (EntityTable -&gt; EntityTable)
-&gt; Parser Text (EntityTable -&gt; EntityTable)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-566"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093403"><span class="hs-identifier hs-var">isParameterEntity</span></a></span><span>
</span><span id="line-567"></span><span>             </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">EntityTable -&gt; EntityTable
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-568"></span><span>             </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093400"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093399"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">(Text, Text) -&gt; EntityTable -&gt; EntityTable
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text (EntityTable -&gt; EntityTable)
-&gt; String -&gt; Parser Text (EntityTable -&gt; EntityTable)
forall i a. Parser i a -&gt; String -&gt; Parser i a
</span><span class="hs-operator hs-var">&lt;?&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;entity&quot;</span></span><span>
</span><span id="line-569"></span><span>    </span><span id="local-6989586621679093413"><span class="annot"><span class="annottext">parsePublicID :: Parser Text ExternalID
</span><a href="#local-6989586621679093413"><span class="hs-identifier hs-var hs-var">parsePublicID</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; ExternalID
</span><span class="hs-identifier hs-var">PublicID</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Text -&gt; ExternalID)
-&gt; Parser Text -&gt; Parser Text (Text -&gt; ExternalID)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Parser Text
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;PUBLIC&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text -&gt; Parser Text -&gt; Parser Text
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text
</span><a href="#local-6989586621679093404"><span class="hs-identifier hs-var">quotedText</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text (Text -&gt; ExternalID)
-&gt; Parser Text -&gt; Parser Text ExternalID
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text
</span><a href="#local-6989586621679093404"><span class="hs-identifier hs-var">quotedText</span></a></span><span>
</span><span id="line-570"></span><span>    </span><span id="local-6989586621679093412"><span class="annot"><span class="annottext">parseSystemID :: Parser Text ExternalID
</span><a href="#local-6989586621679093412"><span class="hs-identifier hs-var hs-var">parseSystemID</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ExternalID
</span><span class="hs-identifier hs-var">SystemID</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ExternalID) -&gt; Parser Text -&gt; Parser Text ExternalID
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Parser Text
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;SYSTEM&quot;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text -&gt; Parser Text -&gt; Parser Text
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text
</span><a href="#local-6989586621679093404"><span class="hs-identifier hs-var">quotedText</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-571"></span><span>    </span><span id="local-6989586621679093404"><span class="annot"><span class="annottext">quotedText :: Parser Text
</span><a href="#local-6989586621679093404"><span class="hs-identifier hs-var hs-var">quotedText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-572"></span><span>        </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-573"></span><span>        </span><span class="annot"><span class="annottext">Char -&gt; Parser Text
</span><a href="#local-6989586621679093396"><span class="hs-identifier hs-var">between</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&quot;'</span></span><span> </span><span class="annot"><span class="annottext">Parser Text -&gt; Parser Text -&gt; Parser Text
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Parser Text
</span><a href="#local-6989586621679093396"><span class="hs-identifier hs-var">between</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\''</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text -&gt; String -&gt; Parser Text
forall i a. Parser i a -&gt; String -&gt; Parser i a
</span><span class="hs-operator hs-var">&lt;?&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;quoted text&quot;</span></span><span>
</span><span id="line-574"></span><span>    </span><span id="local-6989586621679093396"><span class="annot"><span class="annottext">between :: Char -&gt; Parser Text
</span><a href="#local-6989586621679093396"><span class="hs-identifier hs-var hs-var">between</span></a></span></span><span> </span><span id="local-6989586621679093395"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679093395"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-575"></span><span>        </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679093395"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-576"></span><span>        </span><span id="local-6989586621679093394"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093394"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Parser Text
</span><span class="hs-identifier hs-var">takeWhile</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679093395"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-577"></span><span>        </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679093395"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-578"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; Parser Text
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093394"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-579"></span><span>    </span><span id="local-6989586621679093434"><span class="annot"><span class="annottext">parseEnd :: Parser Text Token
</span><a href="#local-6989586621679093434"><span class="hs-identifier hs-var hs-var">parseEnd</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-580"></span><span>        </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-581"></span><span>        </span><span id="local-6989586621679093393"><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093393"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser TName
</span><a href="Text.XML.Stream.Parse.html#parseName"><span class="hs-identifier hs-var">parseName</span></a></span><span>
</span><span id="line-582"></span><span>        </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-583"></span><span>        </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&gt;'</span></span><span>
</span><span id="line-584"></span><span>        </span><span class="annot"><span class="annottext">Token -&gt; Parser Text Token
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Parser Text Token) -&gt; Token -&gt; Parser Text Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TName -&gt; Token
</span><a href="Text.XML.Stream.Token.html#TokenEndElement"><span class="hs-identifier hs-var">TokenEndElement</span></a></span><span> </span><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093393"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text Token -&gt; String -&gt; Parser Text Token
forall i a. Parser i a -&gt; String -&gt; Parser i a
</span><span class="hs-operator hs-var">&lt;?&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;close tag&quot;</span></span><span>
</span><span id="line-585"></span><span>    </span><span id="local-6989586621679093433"><span class="annot"><span class="annottext">parseBegin :: Parser Text Token
</span><a href="#local-6989586621679093433"><span class="hs-identifier hs-var hs-var">parseBegin</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-586"></span><span>        </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-587"></span><span>        </span><span id="local-6989586621679093392"><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093392"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser TName
</span><a href="Text.XML.Stream.Parse.html#parseName"><span class="hs-identifier hs-var">parseName</span></a></span><span>
</span><span id="line-588"></span><span>        </span><span id="local-6989586621679093391"><span class="annot"><span class="annottext">[TAttribute]
</span><a href="#local-6989586621679093391"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser Text TAttribute -&gt; Parser Text [TAttribute]
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f [a]
</span><span class="hs-identifier hs-var">A.many</span></span><span> </span><span class="annot"><span class="annottext">(Parser Text TAttribute -&gt; Parser Text [TAttribute])
-&gt; Parser Text TAttribute -&gt; Parser Text [TAttribute]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ParseSettings -&gt; Parser Text TAttribute
</span><a href="Text.XML.Stream.Parse.html#parseAttribute"><span class="hs-identifier hs-var">parseAttribute</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093444"><span class="hs-identifier hs-var">settings</span></a></span><span>
</span><span id="line-589"></span><span>        </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-590"></span><span>        </span><span id="local-6989586621679093390"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093390"><span class="hs-identifier hs-var">isClose</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Parser Char
</span><span class="hs-identifier hs-var">char</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'/'</span></span><span> </span><span class="annot"><span class="annottext">Parser Char -&gt; Parser Text () -&gt; Parser Text ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text () -&gt; Parser Text Bool -&gt; Parser Text Bool
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Parser Text Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text Bool -&gt; Parser Text Bool -&gt; Parser Text Bool
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Parser Text Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-591"></span><span>        </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&gt;'</span></span><span>
</span><span id="line-592"></span><span>        </span><span class="annot"><span class="annottext">Token -&gt; Parser Text Token
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Token -&gt; Parser Text Token) -&gt; Token -&gt; Parser Text Token
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TName -&gt; [TAttribute] -&gt; Bool -&gt; Int -&gt; Token
</span><a href="Text.XML.Stream.Token.html#TokenBeginElement"><span class="hs-identifier hs-var">TokenBeginElement</span></a></span><span> </span><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093392"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">[TAttribute]
</span><a href="#local-6989586621679093391"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093390"><span class="hs-identifier hs-var">isClose</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text Token -&gt; String -&gt; Parser Text Token
forall i a. Parser i a -&gt; String -&gt; Parser i a
</span><span class="hs-operator hs-var">&lt;?&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;open tag&quot;</span></span><span>
</span><span id="line-593"></span><span>
</span><span id="line-594"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#parseAttribute"><span class="hs-identifier hs-type">parseAttribute</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Parser</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Token.html#TAttribute"><span class="hs-identifier hs-type">TAttribute</span></a></span><span>
</span><span id="line-595"></span><span id="parseAttribute"><span class="annot"><span class="annottext">parseAttribute :: ParseSettings -&gt; Parser Text TAttribute
</span><a href="Text.XML.Stream.Parse.html#parseAttribute"><span class="hs-identifier hs-var hs-var">parseAttribute</span></a></span></span><span> </span><span id="local-6989586621679093389"><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093389"><span class="hs-identifier hs-var">settings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span>
</span><span id="line-596"></span><span>    </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-597"></span><span>    </span><span id="local-6989586621679093388"><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093388"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser TName
</span><a href="Text.XML.Stream.Parse.html#parseName"><span class="hs-identifier hs-var">parseName</span></a></span><span>
</span><span id="line-598"></span><span>    </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-599"></span><span>    </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'='</span></span><span>
</span><span id="line-600"></span><span>    </span><span class="annot"><span class="annottext">Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var">skipSpace</span></a></span><span>
</span><span id="line-601"></span><span>    </span><span id="local-6989586621679093387"><span class="annot"><span class="annottext">[Content]
</span><a href="#local-6989586621679093387"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser Text [Content]
</span><a href="#local-6989586621679093386"><span class="hs-identifier hs-var">squoted</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text [Content]
-&gt; Parser Text [Content] -&gt; Parser Text [Content]
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text [Content]
</span><a href="#local-6989586621679093385"><span class="hs-identifier hs-var">dquoted</span></a></span><span>
</span><span id="line-602"></span><span>    </span><span class="annot"><span class="annottext">TAttribute -&gt; Parser Text TAttribute
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TName
</span><a href="#local-6989586621679093388"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Content]
</span><a href="#local-6989586621679093387"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Text TAttribute -&gt; String -&gt; Parser Text TAttribute
forall i a. Parser i a -&gt; String -&gt; Parser i a
</span><span class="hs-operator hs-var">&lt;?&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;attribute&quot;</span></span><span>
</span><span id="line-603"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-604"></span><span>    </span><span id="local-6989586621679093386"><span class="annot"><span class="annottext">squoted :: Parser Text [Content]
</span><a href="#local-6989586621679093386"><span class="hs-identifier hs-var hs-var">squoted</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Parser Char
</span><span class="hs-identifier hs-var">char</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\''</span></span><span> </span><span class="annot"><span class="annottext">Parser Char -&gt; Parser Text [Content] -&gt; Parser Text [Content]
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text Content -&gt; Parser Char -&gt; Parser Text [Content]
forall (f :: * -&gt; *) a b. Alternative f =&gt; f a -&gt; f b -&gt; f [a]
</span><span class="hs-identifier hs-var">manyTill</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParseSettings -&gt; Bool -&gt; Bool -&gt; Parser Text Content
</span><a href="Text.XML.Stream.Parse.html#parseContent"><span class="hs-identifier hs-var">parseContent</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093389"><span class="hs-identifier hs-var">settings</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Parser Char
</span><span class="hs-identifier hs-var">char</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\''</span></span><span class="hs-special">)</span><span>
</span><span id="line-605"></span><span>    </span><span id="local-6989586621679093385"><span class="annot"><span class="annottext">dquoted :: Parser Text [Content]
</span><a href="#local-6989586621679093385"><span class="hs-identifier hs-var hs-var">dquoted</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Parser Char
</span><span class="hs-identifier hs-var">char</span></span><span>  </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&quot;'</span></span><span> </span><span class="annot"><span class="annottext">Parser Char -&gt; Parser Text [Content] -&gt; Parser Text [Content]
forall (f :: * -&gt; *) a b. Applicative f =&gt; f a -&gt; f b -&gt; f b
</span><span class="hs-operator hs-var">*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text Content -&gt; Parser Char -&gt; Parser Text [Content]
forall (f :: * -&gt; *) a b. Alternative f =&gt; f a -&gt; f b -&gt; f [a]
</span><span class="hs-identifier hs-var">manyTill</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParseSettings -&gt; Bool -&gt; Bool -&gt; Parser Text Content
</span><a href="Text.XML.Stream.Parse.html#parseContent"><span class="hs-identifier hs-var">parseContent</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093389"><span class="hs-identifier hs-var">settings</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Parser Char
</span><span class="hs-identifier hs-var">char</span></span><span>  </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&quot;'</span></span><span class="hs-special">)</span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#parseName"><span class="hs-identifier hs-type">parseName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Parser</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Token.html#TName"><span class="hs-identifier hs-type">TName</span></a></span><span>
</span><span id="line-608"></span><span id="parseName"><span class="annot"><span class="annottext">parseName :: Parser TName
</span><a href="Text.XML.Stream.Parse.html#parseName"><span class="hs-identifier hs-var hs-var">parseName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-609"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text -&gt; TName
</span><a href="#local-6989586621679093384"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Maybe Text -&gt; TName)
-&gt; Parser Text -&gt; Parser Text (Maybe Text -&gt; TName)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text
</span><a href="Text.XML.Stream.Parse.html#parseIdent"><span class="hs-identifier hs-var">parseIdent</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text (Maybe Text -&gt; TName)
-&gt; Parser Text (Maybe Text) -&gt; Parser TName
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text -&gt; Parser Text (Maybe Text)
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f (Maybe a)
</span><span class="hs-identifier hs-var">A.optional</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Parser Char
</span><span class="hs-identifier hs-var">char</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">':'</span></span><span> </span><span class="annot"><span class="annottext">Parser Char -&gt; Parser Text -&gt; Parser Text
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text
</span><a href="Text.XML.Stream.Parse.html#parseIdent"><span class="hs-identifier hs-var">parseIdent</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser TName -&gt; String -&gt; Parser TName
forall i a. Parser i a -&gt; String -&gt; Parser i a
</span><span class="hs-operator hs-var">&lt;?&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;name&quot;</span></span><span>
</span><span id="line-610"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-611"></span><span>    </span><span id="local-6989586621679093384"><span class="annot"><span class="annottext">name :: Text -&gt; Maybe Text -&gt; TName
</span><a href="#local-6989586621679093384"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679093382"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093382"><span class="hs-identifier hs-var">i1</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><span class="hs-identifier hs-var">Nothing</span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; Text -&gt; TName
</span><a href="Text.XML.Stream.Token.html#TName"><span class="hs-identifier hs-var">TName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093382"><span class="hs-identifier hs-var">i1</span></a></span><span>
</span><span id="line-612"></span><span>    </span><span class="annot"><a href="#local-6989586621679093384"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span id="local-6989586621679093381"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093381"><span class="hs-identifier hs-var">i1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093380"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093380"><span class="hs-identifier hs-var">i2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; Text -&gt; TName
</span><a href="Text.XML.Stream.Token.html#TName"><span class="hs-identifier hs-var">TName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093381"><span class="hs-identifier hs-var">i1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093380"><span class="hs-identifier hs-var">i2</span></a></span><span>
</span><span id="line-613"></span><span>
</span><span id="line-614"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#parseIdent"><span class="hs-identifier hs-type">parseIdent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Parser</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-615"></span><span id="parseIdent"><span class="annot"><span class="annottext">parseIdent :: Parser Text
</span><a href="Text.XML.Stream.Parse.html#parseIdent"><span class="hs-identifier hs-var hs-var">parseIdent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Parser Text
</span><span class="hs-identifier hs-var">takeWhile1</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679093379"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text -&gt; String -&gt; Parser Text
forall i a. Parser i a -&gt; String -&gt; Parser i a
</span><span class="hs-operator hs-var">&lt;?&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;identifier&quot;</span></span><span>
</span><span id="line-616"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-617"></span><span>    </span><span id="local-6989586621679093379"><span class="annot"><span class="annottext">valid :: Char -&gt; Bool
</span><a href="#local-6989586621679093379"><span class="hs-identifier hs-var hs-var">valid</span></a></span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&amp;'</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-618"></span><span>    </span><span class="annot"><a href="#local-6989586621679093379"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&lt;'</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-619"></span><span>    </span><span class="annot"><a href="#local-6989586621679093379"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&gt;'</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-620"></span><span>    </span><span class="annot"><a href="#local-6989586621679093379"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">':'</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-621"></span><span>    </span><span class="annot"><a href="#local-6989586621679093379"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'?'</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-622"></span><span>    </span><span class="annot"><a href="#local-6989586621679093379"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'='</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-623"></span><span>    </span><span class="annot"><a href="#local-6989586621679093379"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&quot;'</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-624"></span><span>    </span><span class="annot"><a href="#local-6989586621679093379"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\''</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-625"></span><span>    </span><span class="annot"><a href="#local-6989586621679093379"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'/'</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-626"></span><span>    </span><span class="annot"><a href="#local-6989586621679093379"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">';'</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-627"></span><span>    </span><span class="annot"><a href="#local-6989586621679093379"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'#'</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-628"></span><span>    </span><span class="annot"><a href="#local-6989586621679093379"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span id="local-6989586621679093378"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679093378"><span class="hs-identifier hs-var">c</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="Text.XML.Stream.Parse.html#isXMLSpace"><span class="hs-identifier hs-var">isXMLSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679093378"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-629"></span><span>
</span><span id="line-630"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#parseContent"><span class="hs-identifier hs-type">parseContent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span>
</span><span id="line-631"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- break on double quote</span><span>
</span><span id="line-632"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- break on single quote</span><span>
</span><span id="line-633"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Parser</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Content</span></span><span>
</span><span id="line-634"></span><span id="parseContent"><span class="annot"><span class="annottext">parseContent :: ParseSettings -&gt; Bool -&gt; Bool -&gt; Parser Text Content
</span><a href="Text.XML.Stream.Parse.html#parseContent"><span class="hs-identifier hs-var hs-var">parseContent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span> </span><span id="local-6989586621679093376"><span class="annot"><span class="annottext">DecodeEntities
</span><a href="#local-6989586621679093376"><span class="hs-identifier hs-var">decodeEntities</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679093375"><span class="annot"><span class="annottext">DecodeIllegalCharacters
</span><a href="#local-6989586621679093375"><span class="hs-identifier hs-var">decodeIllegalCharacters</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679093374"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093374"><span class="hs-identifier hs-var">breakDouble</span></a></span></span><span> </span><span id="local-6989586621679093373"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093373"><span class="hs-identifier hs-var">breakSingle</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parser Text Content
</span><a href="#local-6989586621679093372"><span class="hs-identifier hs-var">parseReference</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text Content -&gt; Parser Text Content -&gt; Parser Text Content
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text Content
</span><a href="#local-6989586621679093371"><span class="hs-identifier hs-var">parseTextContent</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-635"></span><span>  </span><span id="local-6989586621679093372"><span class="annot"><span class="annottext">parseReference :: Parser Text Content
</span><a href="#local-6989586621679093372"><span class="hs-identifier hs-var hs-var">parseReference</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-636"></span><span>    </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&amp;'</span></span><span>
</span><span id="line-637"></span><span>    </span><span id="local-6989586621679093370"><span class="annot"><span class="annottext">Content
</span><a href="#local-6989586621679093370"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser Text Content
</span><a href="#local-6989586621679093369"><span class="hs-identifier hs-var">parseEntityRef</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text Content -&gt; Parser Text Content -&gt; Parser Text Content
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text Content
</span><a href="#local-6989586621679093368"><span class="hs-identifier hs-var">parseHexCharRef</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text Content -&gt; Parser Text Content -&gt; Parser Text Content
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser Text Content
</span><a href="#local-6989586621679093367"><span class="hs-identifier hs-var">parseDecCharRef</span></a></span><span>
</span><span id="line-638"></span><span>    </span><span class="annot"><span class="annottext">Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var">char'</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">';'</span></span><span>
</span><span id="line-639"></span><span>    </span><span class="annot"><span class="annottext">Content -&gt; Parser Text Content
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Content
</span><a href="#local-6989586621679093370"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-640"></span><span>  </span><span id="local-6989586621679093369"><span class="annot"><span class="annottext">parseEntityRef :: Parser Text Content
</span><a href="#local-6989586621679093369"><span class="hs-identifier hs-var hs-var">parseEntityRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-641"></span><span>    </span><span class="annot"><a href="Text.XML.Stream.Token.html#TName"><span class="hs-identifier hs-type">TName</span></a></span><span> </span><span id="local-6989586621679093366"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679093366"><span class="hs-identifier hs-var">ma</span></a></span></span><span> </span><span id="local-6989586621679093365"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093365"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser TName
</span><a href="Text.XML.Stream.Parse.html#parseName"><span class="hs-identifier hs-var">parseName</span></a></span><span>
</span><span id="line-642"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679093364"><span class="annot"><span class="annottext">name :: Text
</span><a href="#local-6989586621679093364"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; (Text -&gt; Text) -&gt; Maybe Text -&gt; Text
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
</span><span class="hs-operator hs-var">`T.append`</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;:&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621679093366"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
</span><span class="hs-operator hs-var">`T.append`</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093365"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-643"></span><span>    </span><span class="annot"><span class="annottext">Content -&gt; Parser Text Content
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Content -&gt; Parser Text Content) -&gt; Content -&gt; Parser Text Content
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093364"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-644"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;lt&quot;</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DecodeEntities
</span><span class="hs-identifier hs-var">ContentText</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;&lt;&quot;</span></span><span>
</span><span id="line-645"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;gt&quot;</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DecodeEntities
</span><span class="hs-identifier hs-var">ContentText</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;&gt;&quot;</span></span><span>
</span><span id="line-646"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;amp&quot;</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DecodeEntities
</span><span class="hs-identifier hs-var">ContentText</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;&amp;&quot;</span></span><span>
</span><span id="line-647"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;quot&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DecodeEntities
</span><span class="hs-identifier hs-var">ContentText</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\&quot;&quot;</span></span><span>
</span><span id="line-648"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;apos&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DecodeEntities
</span><span class="hs-identifier hs-var">ContentText</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;'&quot;</span></span><span>
</span><span id="line-649"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DecodeEntities
</span><a href="#local-6989586621679093376"><span class="hs-identifier hs-var">decodeEntities</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093364"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-650"></span><span>  </span><span id="local-6989586621679093368"><span class="annot"><span class="annottext">parseHexCharRef :: Parser Text Content
</span><a href="#local-6989586621679093368"><span class="hs-identifier hs-var hs-var">parseHexCharRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-651"></span><span>    </span><span class="annot"><span class="annottext">Parser Text -&gt; Parser Text ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(Parser Text -&gt; Parser Text ()) -&gt; Parser Text -&gt; Parser Text ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser Text
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;#x&quot;</span></span><span>
</span><span id="line-652"></span><span>    </span><span id="local-6989586621679093363"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093363"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser Int
forall a. (Integral a, Bits a) =&gt; Parser a
</span><span class="hs-identifier hs-var">AT.hexadecimal</span></span><span>
</span><span id="line-653"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DecodeIllegalCharacters
</span><a href="Text.XML.Stream.Parse.html#toValidXmlChar"><span class="hs-identifier hs-var">toValidXmlChar</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093363"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Char -&gt; Maybe Char -&gt; Maybe Char
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">DecodeIllegalCharacters
</span><a href="#local-6989586621679093375"><span class="hs-identifier hs-var">decodeIllegalCharacters</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093363"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-654"></span><span>      </span><span class="annot"><span class="annottext">Maybe Char
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser Text Content
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Invalid character from hexadecimal character reference.&quot;</span></span><span>
</span><span id="line-655"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093360"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679093360"><span class="hs-identifier hs-var">c</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Content -&gt; Parser Text Content
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Content -&gt; Parser Text Content) -&gt; Content -&gt; Parser Text Content
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DecodeEntities
</span><span class="hs-identifier hs-var">ContentText</span></span><span> </span><span class="annot"><span class="annottext">DecodeEntities -&gt; DecodeEntities
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Text
</span><span class="hs-identifier hs-var">T.singleton</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679093360"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-656"></span><span>  </span><span id="local-6989586621679093367"><span class="annot"><span class="annottext">parseDecCharRef :: Parser Text Content
</span><a href="#local-6989586621679093367"><span class="hs-identifier hs-var hs-var">parseDecCharRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-657"></span><span>    </span><span class="annot"><span class="annottext">Parser Text -&gt; Parser Text ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(Parser Text -&gt; Parser Text ()) -&gt; Parser Text -&gt; Parser Text ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Parser Text
</span><span class="hs-identifier hs-var">string</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;#&quot;</span></span><span>
</span><span id="line-658"></span><span>    </span><span id="local-6989586621679093358"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093358"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Parser Int
forall a. Integral a =&gt; Parser a
</span><span class="hs-identifier hs-var">AT.decimal</span></span><span>
</span><span id="line-659"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DecodeIllegalCharacters
</span><a href="Text.XML.Stream.Parse.html#toValidXmlChar"><span class="hs-identifier hs-var">toValidXmlChar</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093358"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Char -&gt; Maybe Char -&gt; Maybe Char
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">DecodeIllegalCharacters
</span><a href="#local-6989586621679093375"><span class="hs-identifier hs-var">decodeIllegalCharacters</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093358"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-660"></span><span>      </span><span class="annot"><span class="annottext">Maybe Char
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser Text Content
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Invalid character from decimal character reference.&quot;</span></span><span>
</span><span id="line-661"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093356"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679093356"><span class="hs-identifier hs-var">c</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Content -&gt; Parser Text Content
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Content -&gt; Parser Text Content) -&gt; Content -&gt; Parser Text Content
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DecodeEntities
</span><span class="hs-identifier hs-var">ContentText</span></span><span> </span><span class="annot"><span class="annottext">DecodeEntities -&gt; DecodeEntities
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Text
</span><span class="hs-identifier hs-var">T.singleton</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621679093356"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-662"></span><span>  </span><span id="local-6989586621679093371"><span class="annot"><span class="annottext">parseTextContent :: Parser Text Content
</span><a href="#local-6989586621679093371"><span class="hs-identifier hs-var hs-var">parseTextContent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DecodeEntities
</span><span class="hs-identifier hs-var">ContentText</span></span><span> </span><span class="annot"><span class="annottext">DecodeEntities -&gt; Parser Text -&gt; Parser Text Content
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Parser Text
</span><span class="hs-identifier hs-var">takeWhile1</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="#local-6989586621679093355"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Parser Text Content -&gt; String -&gt; Parser Text Content
forall i a. Parser i a -&gt; String -&gt; Parser i a
</span><span class="hs-operator hs-var">&lt;?&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;text content&quot;</span></span><span>
</span><span id="line-663"></span><span>  </span><span id="local-6989586621679093355"><span class="annot"><span class="annottext">valid :: Char -&gt; Bool
</span><a href="#local-6989586621679093355"><span class="hs-identifier hs-var hs-var">valid</span></a></span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&quot;'</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093374"><span class="hs-identifier hs-var">breakDouble</span></a></span><span>
</span><span id="line-664"></span><span>  </span><span class="annot"><a href="#local-6989586621679093355"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\''</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679093373"><span class="hs-identifier hs-var">breakSingle</span></a></span><span>
</span><span id="line-665"></span><span>  </span><span class="annot"><a href="#local-6989586621679093355"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&amp;'</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-comment">-- amp</span><span>
</span><span id="line-666"></span><span>  </span><span class="annot"><a href="#local-6989586621679093355"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'&lt;'</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-comment">-- lt</span><span>
</span><span id="line-667"></span><span>  </span><span class="annot"><a href="#local-6989586621679093355"><span class="hs-identifier hs-var">valid</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-668"></span><span>
</span><span id="line-669"></span><span class="hs-comment">-- | Is this codepoint a valid XML character? See</span><span>
</span><span id="line-670"></span><span class="hs-comment">-- &lt;https://www.w3.org/TR/xml/#charsets&gt;. This is proudly XML 1.0 only.</span><span>
</span><span id="line-671"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#toValidXmlChar"><span class="hs-identifier hs-type">toValidXmlChar</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span>
</span><span id="line-672"></span><span id="toValidXmlChar"><span class="annot"><span class="annottext">toValidXmlChar :: DecodeIllegalCharacters
</span><a href="Text.XML.Stream.Parse.html#toValidXmlChar"><span class="hs-identifier hs-var hs-var">toValidXmlChar</span></a></span></span><span> </span><span id="local-6989586621679093354"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093354"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-673"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">((Int, Int) -&gt; Bool) -&gt; [(Int, Int)] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; Bool
</span><a href="#local-6989586621679093352"><span class="hs-identifier hs-var">checkRange</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621679093351"><span class="hs-identifier hs-var">ranges</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Maybe Char
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Char
forall a. Enum a =&gt; Int -&gt; a
</span><span class="hs-identifier hs-var">toEnum</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093354"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-674"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Char
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-675"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-676"></span><span>    </span><span class="hs-comment">--Inclusive lower bound, inclusive upper bound.</span><span>
</span><span id="line-677"></span><span>    </span><span class="annot"><a href="#local-6989586621679093351"><span class="hs-identifier hs-type">ranges</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-678"></span><span>    </span><span id="local-6989586621679093351"><span class="annot"><span class="annottext">ranges :: [(Int, Int)]
</span><a href="#local-6989586621679093351"><span class="hs-identifier hs-var hs-var">ranges</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-679"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0x9</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0xA</span></span><span class="hs-special">)</span><span>
</span><span id="line-680"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0xD</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0xD</span></span><span class="hs-special">)</span><span>
</span><span id="line-681"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0x20</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0xD7FF</span></span><span class="hs-special">)</span><span>
</span><span id="line-682"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0xE000</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0xFFFD</span></span><span class="hs-special">)</span><span>
</span><span id="line-683"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0x10000</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0x10FFFF</span></span><span class="hs-special">)</span><span>
</span><span id="line-684"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-685"></span><span>    </span><span id="local-6989586621679093352"><span class="annot"><span class="annottext">checkRange :: (Int, Int) -&gt; Bool
</span><a href="#local-6989586621679093352"><span class="hs-identifier hs-var hs-var">checkRange</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679093349"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093349"><span class="hs-identifier hs-var">lb</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093348"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093348"><span class="hs-identifier hs-var">ub</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093349"><span class="hs-identifier hs-var">lb</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093354"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093354"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679093348"><span class="hs-identifier hs-var">ub</span></a></span><span>
</span><span id="line-686"></span><span>
</span><span id="line-687"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-type">skipSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Parser</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-688"></span><span id="skipSpace"><span class="annot"><span class="annottext">skipSpace :: Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#skipSpace"><span class="hs-identifier hs-var hs-var">skipSpace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Parser Text ()
</span><span class="hs-identifier hs-var">skipWhile</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><a href="Text.XML.Stream.Parse.html#isXMLSpace"><span class="hs-identifier hs-var">isXMLSpace</span></a></span><span>
</span><span id="line-689"></span><span>
</span><span id="line-690"></span><span class="hs-comment">-- | Determines whether a character is an XML white space. The list of</span><span>
</span><span id="line-691"></span><span class="hs-comment">-- white spaces is given by</span><span>
</span><span id="line-692"></span><span class="hs-comment">--</span><span>
</span><span id="line-693"></span><span class="hs-comment">-- &gt;  S ::= (#x20 | #x9 | #xD | #xA)+</span><span>
</span><span id="line-694"></span><span class="hs-comment">--</span><span>
</span><span id="line-695"></span><span class="hs-comment">-- in &lt;http://www.w3.org/TR/2008/REC-xml-20081126/#sec-common-syn&gt;.</span><span>
</span><span id="line-696"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#isXMLSpace"><span class="hs-identifier hs-type">isXMLSpace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-697"></span><span id="isXMLSpace"><span class="annot"><span class="annottext">isXMLSpace :: Char -&gt; Bool
</span><a href="Text.XML.Stream.Parse.html#isXMLSpace"><span class="hs-identifier hs-var hs-var">isXMLSpace</span></a></span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-698"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#isXMLSpace"><span class="hs-identifier hs-var">isXMLSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\t'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-699"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#isXMLSpace"><span class="hs-identifier hs-var">isXMLSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\r'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-700"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#isXMLSpace"><span class="hs-identifier hs-var">isXMLSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-701"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#isXMLSpace"><span class="hs-identifier hs-var">isXMLSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-702"></span><span>
</span><span id="line-703"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#newline"><span class="hs-identifier hs-type">newline</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Parser</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span id="newline"><span class="annot"><span class="annottext">newline :: Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#newline"><span class="hs-identifier hs-var hs-var">newline</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parser Char -&gt; Parser Text ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(Parser Char -&gt; Parser Text ()) -&gt; Parser Char -&gt; Parser Text ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Parser Char
</span><span class="hs-identifier hs-var">char</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\r'</span></span><span> </span><span class="annot"><span class="annottext">Parser Char -&gt; Parser Char -&gt; Parser Char
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Parser Char
</span><span class="hs-identifier hs-var">char</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Parser Char -&gt; Parser Char -&gt; Parser Char
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Parser Char
</span><span class="hs-identifier hs-var">char</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\n'</span></span><span>
</span><span id="line-705"></span><span>
</span><span id="line-706"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-type">char'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Char</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Parser</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-707"></span><span id="char%27"><span class="annot"><span class="annottext">char' :: Char -&gt; Parser Text ()
</span><a href="Text.XML.Stream.Parse.html#char%27"><span class="hs-identifier hs-var hs-var">char'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Parser Char -&gt; Parser Text ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(Parser Char -&gt; Parser Text ())
-&gt; (Char -&gt; Parser Char) -&gt; Char -&gt; Parser Text ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Parser Char
</span><span class="hs-identifier hs-var">char</span></span><span>
</span><span id="line-708"></span><span>
</span><span id="line-709"></span><span class="hs-keyword">data</span><span> </span><span id="ContentType"><span class="annot"><a href="Text.XML.Stream.Parse.html#ContentType"><span class="hs-identifier hs-var">ContentType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Ignore"><span class="annot"><a href="Text.XML.Stream.Parse.html#Ignore"><span class="hs-identifier hs-var">Ignore</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="IsContent"><span class="annot"><a href="Text.XML.Stream.Parse.html#IsContent"><span class="hs-identifier hs-var">IsContent</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="IsError"><span class="annot"><a href="Text.XML.Stream.Parse.html#IsError"><span class="hs-identifier hs-var">IsError</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="NotContent"><span class="annot"><a href="Text.XML.Stream.Parse.html#NotContent"><span class="hs-identifier hs-var">NotContent</span></a></span></span><span>
</span><span id="line-710"></span><span>
</span><span id="line-711"></span><span class="hs-comment">-- | Grabs the next piece of content if available. This function skips over any</span><span>
</span><span id="line-712"></span><span class="hs-comment">-- comments, instructions or entities, and concatenates all content until the next start</span><span>
</span><span id="line-713"></span><span class="hs-comment">-- or end tag.</span><span>
</span><span id="line-714"></span><span id="local-6989586621679094016"><span id="local-6989586621679094017"><span class="annot"><a href="Text.XML.Stream.Parse.html#contentMaybe"><span class="hs-identifier hs-type">contentMaybe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679094017"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679094016"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679094017"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-715"></span><span id="contentMaybe"><span class="annot"><span class="annottext">contentMaybe :: ConduitT Event o m (Maybe Text)
</span><a href="Text.XML.Stream.Parse.html#contentMaybe"><span class="hs-identifier hs-var hs-var">contentMaybe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-716"></span><span>    </span><span id="local-6989586621679093342"><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093342"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe Event)
forall (m :: * -&gt; *) a o. Monad m =&gt; ConduitT a o m (Maybe a)
</span><span class="hs-identifier hs-var">peekC</span></span><span>
</span><span id="line-717"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Event -&gt; ContentType
</span><a href="#local-6989586621679093340"><span class="hs-identifier hs-var">pc'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093342"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-718"></span><span>        </span><span class="annot"><span class="annottext">ContentType
</span><a href="Text.XML.Stream.Parse.html#Ignore"><span class="hs-identifier hs-var">Ignore</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ConduitT Event o m ()
forall (m :: * -&gt; *) a o. Monad m =&gt; Int -&gt; ConduitT a o m ()
</span><span class="hs-identifier hs-var">dropC</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m ()
-&gt; ConduitT Event o m (Maybe Text)
-&gt; ConduitT Event o m (Maybe Text)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe Text)
forall (m :: * -&gt; *) o.
MonadThrow m =&gt;
ConduitT Event o m (Maybe Text)
</span><a href="Text.XML.Stream.Parse.html#contentMaybe"><span class="hs-identifier hs-var">contentMaybe</span></a></span><span>
</span><span id="line-719"></span><span>        </span><span class="annot"><a href="Text.XML.Stream.Parse.html#IsContent"><span class="hs-identifier hs-type">IsContent</span></a></span><span> </span><span id="local-6989586621679093338"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093338"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ConduitT Event o m ()
forall (m :: * -&gt; *) a o. Monad m =&gt; Int -&gt; ConduitT a o m ()
</span><span class="hs-identifier hs-var">dropC</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m ()
-&gt; ConduitT Event o m (Maybe Text)
-&gt; ConduitT Event o m (Maybe Text)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Maybe Text)
-&gt; ConduitT Event o m Text -&gt; ConduitT Event o m (Maybe Text)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([Text] -&gt; [Text]) -&gt; ConduitT Event o m Text
forall (m :: * -&gt; *) o.
MonadThrow m =&gt;
([Text] -&gt; [Text]) -&gt; ConduitT Event o m Text
</span><a href="#local-6989586621679093337"><span class="hs-identifier hs-var">takeContents</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093338"><span class="hs-identifier hs-var">t</span></a></span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; [Text]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-720"></span><span>        </span><span class="annot"><a href="Text.XML.Stream.Parse.html#IsError"><span class="hs-identifier hs-type">IsError</span></a></span><span> </span><span id="local-6989586621679093336"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093336"><span class="hs-identifier hs-var">e</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m (Maybe Text) -&gt; ConduitT Event o m (Maybe Text)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe Text) -&gt; ConduitT Event o m (Maybe Text))
-&gt; m (Maybe Text) -&gt; ConduitT Event o m (Maybe Text)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XmlException -&gt; m (Maybe Text)
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">(XmlException -&gt; m (Maybe Text)) -&gt; XmlException -&gt; m (Maybe Text)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe Event -&gt; XmlException
</span><a href="Text.XML.Stream.Parse.html#InvalidEntity"><span class="hs-identifier hs-var">InvalidEntity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093336"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093342"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-721"></span><span>        </span><span class="annot"><span class="annottext">ContentType
</span><a href="Text.XML.Stream.Parse.html#NotContent"><span class="hs-identifier hs-var">NotContent</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; ConduitT Event o m (Maybe Text)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-722"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-723"></span><span>    </span><span id="local-6989586621679093340"><span class="annot"><span class="annottext">pc' :: Maybe Event -&gt; ContentType
</span><a href="#local-6989586621679093340"><span class="hs-identifier hs-var hs-var">pc'</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ContentType
</span><a href="Text.XML.Stream.Parse.html#NotContent"><span class="hs-identifier hs-var">NotContent</span></a></span><span>
</span><span id="line-724"></span><span>    </span><span class="annot"><a href="#local-6989586621679093340"><span class="hs-identifier hs-var">pc'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093334"><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093334"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Event -&gt; ContentType
</span><a href="#local-6989586621679093333"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093334"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-725"></span><span>    </span><span id="local-6989586621679093333"><span class="annot"><span class="annottext">pc :: Event -&gt; ContentType
</span><a href="#local-6989586621679093333"><span class="hs-identifier hs-var hs-var">pc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EventContent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ContentText</span></span><span> </span><span id="local-6989586621679093332"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093332"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ContentType
</span><a href="Text.XML.Stream.Parse.html#IsContent"><span class="hs-identifier hs-var">IsContent</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093332"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-726"></span><span>    </span><span class="annot"><a href="#local-6989586621679093333"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EventContent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ContentEntity</span></span><span> </span><span id="local-6989586621679093331"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093331"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ContentType
</span><a href="Text.XML.Stream.Parse.html#IsError"><span class="hs-identifier hs-var">IsError</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; ContentType) -&gt; String -&gt; ContentType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unknown entity: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093331"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-727"></span><span>    </span><span class="annot"><a href="#local-6989586621679093333"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EventCDATA</span></span><span> </span><span id="local-6989586621679093329"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093329"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ContentType
</span><a href="Text.XML.Stream.Parse.html#IsContent"><span class="hs-identifier hs-var">IsContent</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093329"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-728"></span><span>    </span><span class="annot"><a href="#local-6989586621679093333"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EventBeginElement</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ContentType
</span><a href="Text.XML.Stream.Parse.html#NotContent"><span class="hs-identifier hs-var">NotContent</span></a></span><span>
</span><span id="line-729"></span><span>    </span><span class="annot"><a href="#local-6989586621679093333"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EventEndElement</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ContentType
</span><a href="Text.XML.Stream.Parse.html#NotContent"><span class="hs-identifier hs-var">NotContent</span></a></span><span>
</span><span id="line-730"></span><span>    </span><span class="annot"><a href="#local-6989586621679093333"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EventBeginDocument</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ContentType
</span><a href="Text.XML.Stream.Parse.html#Ignore"><span class="hs-identifier hs-var">Ignore</span></a></span><span>
</span><span id="line-731"></span><span>    </span><span class="annot"><a href="#local-6989586621679093333"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="annot"><span class="annottext">Event
</span><span class="hs-identifier hs-var">EventEndDocument</span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ContentType
</span><a href="Text.XML.Stream.Parse.html#Ignore"><span class="hs-identifier hs-var">Ignore</span></a></span><span>
</span><span id="line-732"></span><span>    </span><span class="annot"><a href="#local-6989586621679093333"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EventBeginDoctype</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ContentType
</span><a href="Text.XML.Stream.Parse.html#Ignore"><span class="hs-identifier hs-var">Ignore</span></a></span><span>
</span><span id="line-733"></span><span>    </span><span class="annot"><a href="#local-6989586621679093333"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="annot"><span class="annottext">Event
</span><span class="hs-identifier hs-var">EventEndDoctype</span></span><span>                  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ContentType
</span><a href="Text.XML.Stream.Parse.html#Ignore"><span class="hs-identifier hs-var">Ignore</span></a></span><span>
</span><span id="line-734"></span><span>    </span><span class="annot"><a href="#local-6989586621679093333"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EventInstruction</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ContentType
</span><a href="Text.XML.Stream.Parse.html#Ignore"><span class="hs-identifier hs-var">Ignore</span></a></span><span>
</span><span id="line-735"></span><span>    </span><span class="annot"><a href="#local-6989586621679093333"><span class="hs-identifier hs-var">pc</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EventComment</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ContentType
</span><a href="Text.XML.Stream.Parse.html#Ignore"><span class="hs-identifier hs-var">Ignore</span></a></span><span>
</span><span id="line-736"></span><span>    </span><span id="local-6989586621679093337"><span class="annot"><span class="annottext">takeContents :: ([Text] -&gt; [Text]) -&gt; ConduitT Event o m Text
</span><a href="#local-6989586621679093337"><span class="hs-identifier hs-var hs-var">takeContents</span></a></span></span><span> </span><span id="local-6989586621679093328"><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679093328"><span class="hs-identifier hs-var">front</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-737"></span><span>        </span><span id="local-6989586621679093327"><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093327"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe Event)
forall (m :: * -&gt; *) a o. Monad m =&gt; ConduitT a o m (Maybe a)
</span><span class="hs-identifier hs-var">peekC</span></span><span>
</span><span id="line-738"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Event -&gt; ContentType
</span><a href="#local-6989586621679093340"><span class="hs-identifier hs-var">pc'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093327"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-739"></span><span>            </span><span class="annot"><span class="annottext">ContentType
</span><a href="Text.XML.Stream.Parse.html#Ignore"><span class="hs-identifier hs-var">Ignore</span></a></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ConduitT Event o m ()
forall (m :: * -&gt; *) a o. Monad m =&gt; Int -&gt; ConduitT a o m ()
</span><span class="hs-identifier hs-var">dropC</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m ()
-&gt; ConduitT Event o m Text -&gt; ConduitT Event o m Text
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; [Text]) -&gt; ConduitT Event o m Text
</span><a href="#local-6989586621679093337"><span class="hs-identifier hs-var">takeContents</span></a></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679093328"><span class="hs-identifier hs-var">front</span></a></span><span>
</span><span id="line-740"></span><span>            </span><span class="annot"><a href="Text.XML.Stream.Parse.html#IsContent"><span class="hs-identifier hs-type">IsContent</span></a></span><span> </span><span id="local-6989586621679093326"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093326"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ConduitT Event o m ()
forall (m :: * -&gt; *) a o. Monad m =&gt; Int -&gt; ConduitT a o m ()
</span><span class="hs-identifier hs-var">dropC</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m ()
-&gt; ConduitT Event o m Text -&gt; ConduitT Event o m Text
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; [Text]) -&gt; ConduitT Event o m Text
</span><a href="#local-6989586621679093337"><span class="hs-identifier hs-var">takeContents</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679093328"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; [Text]) -&gt; ([Text] -&gt; [Text]) -&gt; [Text] -&gt; [Text]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">:</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093326"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-741"></span><span>            </span><span class="annot"><a href="Text.XML.Stream.Parse.html#IsError"><span class="hs-identifier hs-type">IsError</span></a></span><span> </span><span id="local-6989586621679093325"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093325"><span class="hs-identifier hs-var">e</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m Text -&gt; ConduitT Event o m Text
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m Text -&gt; ConduitT Event o m Text)
-&gt; m Text -&gt; ConduitT Event o m Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XmlException -&gt; m Text
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">(XmlException -&gt; m Text) -&gt; XmlException -&gt; m Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe Event -&gt; XmlException
</span><a href="Text.XML.Stream.Parse.html#InvalidEntity"><span class="hs-identifier hs-var">InvalidEntity</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093325"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093327"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-742"></span><span>            </span><span class="annot"><span class="annottext">ContentType
</span><a href="Text.XML.Stream.Parse.html#NotContent"><span class="hs-identifier hs-var">NotContent</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ConduitT Event o m Text
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ConduitT Event o m Text)
-&gt; Text -&gt; ConduitT Event o m Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.concat</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; [Text] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text]
</span><a href="#local-6989586621679093328"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-743"></span><span>
</span><span id="line-744"></span><span class="hs-comment">-- | Grabs the next piece of content. If none if available, returns 'T.empty'.</span><span>
</span><span id="line-745"></span><span class="hs-comment">-- This is simply a wrapper around 'contentMaybe'.</span><span>
</span><span id="line-746"></span><span id="local-6989586621679093323"><span id="local-6989586621679093324"><span class="annot"><a href="Text.XML.Stream.Parse.html#content"><span class="hs-identifier hs-type">content</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093324"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093323"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093324"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span></span></span><span>
</span><span id="line-747"></span><span id="content"><span class="annot"><span class="annottext">content :: ConduitT Event o m Text
</span><a href="Text.XML.Stream.Parse.html#content"><span class="hs-identifier hs-var hs-var">content</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text -&gt; Text
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier hs-var">T.empty</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Text -&gt; Text)
-&gt; ConduitT Event o m (Maybe Text) -&gt; ConduitT Event o m Text
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe Text)
forall (m :: * -&gt; *) o.
MonadThrow m =&gt;
ConduitT Event o m (Maybe Text)
</span><a href="Text.XML.Stream.Parse.html#contentMaybe"><span class="hs-identifier hs-var">contentMaybe</span></a></span><span>
</span><span id="line-748"></span><span>
</span><span id="line-749"></span><span>
</span><span id="line-750"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#isWhitespace"><span class="hs-identifier hs-type">isWhitespace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-751"></span><span id="isWhitespace"><span class="annot"><span class="annottext">isWhitespace :: Event -&gt; Bool
</span><a href="Text.XML.Stream.Parse.html#isWhitespace"><span class="hs-identifier hs-var hs-var">isWhitespace</span></a></span></span><span> </span><span class="annot"><span class="annottext">Event
</span><span class="hs-identifier hs-var">EventBeginDocument</span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-752"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#isWhitespace"><span class="hs-identifier hs-var">isWhitespace</span></a></span><span> </span><span class="annot"><span class="annottext">Event
</span><span class="hs-identifier hs-var">EventEndDocument</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-753"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#isWhitespace"><span class="hs-identifier hs-var">isWhitespace</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EventBeginDoctype</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-754"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#isWhitespace"><span class="hs-identifier hs-var">isWhitespace</span></a></span><span> </span><span class="annot"><span class="annottext">Event
</span><span class="hs-identifier hs-var">EventEndDoctype</span></span><span>                </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-755"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#isWhitespace"><span class="hs-identifier hs-var">isWhitespace</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EventInstruction</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-756"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#isWhitespace"><span class="hs-identifier hs-var">isWhitespace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EventContent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ContentText</span></span><span> </span><span id="local-6989586621679093320"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093320"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; Bool
</span><span class="hs-identifier hs-var">T.all</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isSpace</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093320"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-757"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#isWhitespace"><span class="hs-identifier hs-var">isWhitespace</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">EventComment</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-758"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#isWhitespace"><span class="hs-identifier hs-var">isWhitespace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EventCDATA</span></span><span> </span><span id="local-6989586621679093318"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093318"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Text -&gt; Bool
</span><span class="hs-identifier hs-var">T.all</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Bool
</span><span class="hs-identifier hs-var">isSpace</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093318"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-759"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#isWhitespace"><span class="hs-identifier hs-var">isWhitespace</span></a></span><span> </span><span class="annot"><span class="annottext">Event
</span><span class="hs-identifier">_</span></span><span>                              </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-760"></span><span>
</span><span id="line-761"></span><span>
</span><span id="line-762"></span><span class="hs-comment">-- | The most generic way to parse a tag. It takes a 'NameMatcher' to check whether</span><span>
</span><span id="line-763"></span><span class="hs-comment">-- this is a correct tag name, an 'AttrParser' to handle attributes, and</span><span>
</span><span id="line-764"></span><span class="hs-comment">-- then a parser to deal with content.</span><span>
</span><span id="line-765"></span><span class="hs-comment">--</span><span>
</span><span id="line-766"></span><span class="hs-comment">-- 'Events' are consumed if and only if the tag name and its attributes match.</span><span>
</span><span id="line-767"></span><span class="hs-comment">--</span><span>
</span><span id="line-768"></span><span class="hs-comment">-- This function automatically absorbs its balancing closing tag, and will</span><span>
</span><span id="line-769"></span><span class="hs-comment">-- throw an exception if not all of the attributes or child elements are</span><span>
</span><span id="line-770"></span><span class="hs-comment">-- consumed. If you want to allow extra attributes, see 'ignoreAttrs'.</span><span>
</span><span id="line-771"></span><span class="hs-comment">--</span><span>
</span><span id="line-772"></span><span class="hs-comment">-- This function automatically ignores comments, instructions and whitespace.</span><span>
</span><span id="line-773"></span><span id="local-6989586621679093977"><span id="local-6989586621679093978"><span id="local-6989586621679093979"><span id="local-6989586621679093980"><span id="local-6989586621679093981"><span class="annot"><a href="Text.XML.Stream.Parse.html#tag"><span class="hs-identifier hs-type">tag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093981"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-774"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093980"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-comment">-- ^ Check if this is a correct tag name</span><span>
</span><span id="line-775"></span><span>                     </span><span class="hs-comment">--   and return a value that can be used to get an @AttrParser@.</span><span>
</span><span id="line-776"></span><span>                     </span><span class="hs-comment">--   If this fails, the function will return @Nothing@</span><span>
</span><span id="line-777"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679093980"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093979"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ Given the value returned by the name checker, this function will</span><span>
</span><span id="line-778"></span><span>                           </span><span class="hs-comment">--   be used to get an @AttrParser@ appropriate for the specific tag.</span><span>
</span><span id="line-779"></span><span>                           </span><span class="hs-comment">--   If the @AttrParser@ fails, the function will also return @Nothing@</span><span>
</span><span id="line-780"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679093979"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093978"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093981"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093977"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ Handler function to handle the attributes and children</span><span>
</span><span id="line-781"></span><span>                                   </span><span class="hs-comment">--   of a tag, given the value return from the @AttrParser@</span><span>
</span><span id="line-782"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093978"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093981"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093977"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-783"></span><span id="tag"><span class="annot"><span class="annottext">tag :: NameMatcher a
-&gt; (a -&gt; AttrParser b)
-&gt; (b -&gt; ConduitT Event o m c)
-&gt; ConduitT Event o m (Maybe c)
</span><a href="Text.XML.Stream.Parse.html#tag"><span class="hs-identifier hs-var hs-var">tag</span></a></span></span><span> </span><span id="local-6989586621679093317"><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093317"><span class="hs-identifier hs-var">nameMatcher</span></a></span></span><span> </span><span id="local-6989586621679093316"><span class="annot"><span class="annottext">a -&gt; AttrParser b
</span><a href="#local-6989586621679093316"><span class="hs-identifier hs-var">attrParser</span></a></span></span><span> </span><span id="local-6989586621679093315"><span class="annot"><span class="annottext">b -&gt; ConduitT Event o m c
</span><a href="#local-6989586621679093315"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-784"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621679093314"><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093314"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093313"><span class="annot"><span class="annottext">[Event]
</span><a href="#local-6989586621679093313"><span class="hs-identifier hs-var">leftovers</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Event] -&gt; ConduitT Event o m (Maybe Event, [Event])
forall (m :: * -&gt; *) o.
Monad m =&gt;
[Event] -&gt; ConduitT Event o m (Maybe Event, [Event])
</span><a href="#local-6989586621679093312"><span class="hs-identifier hs-var">dropWS</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-785"></span><span>  </span><span id="local-6989586621679093311"><span class="annot"><span class="annottext">Maybe c
</span><a href="#local-6989586621679093311"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093314"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-786"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EventBeginElement</span></span><span> </span><span id="local-6989586621679093310"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093310"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679093309"><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093309"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NameMatcher a -&gt; Name -&gt; Maybe a
forall a. NameMatcher a -&gt; Name -&gt; Maybe a
</span><a href="Text.XML.Stream.Parse.html#runNameMatcher"><span class="hs-identifier hs-var hs-var">runNameMatcher</span></a></span><span> </span><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093317"><span class="hs-identifier hs-var">nameMatcher</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093310"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-787"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093307"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679093307"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AttrParser b -&gt; [(Name, [Content])] -&gt; Either SomeException b
forall b.
AttrParser b -&gt; [(Name, [Content])] -&gt; Either SomeException b
</span><a href="#local-6989586621679093306"><span class="hs-identifier hs-var">runAttrParser'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; AttrParser b
</span><a href="#local-6989586621679093316"><span class="hs-identifier hs-var">attrParser</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679093307"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093309"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-788"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe c -&gt; ConduitT Event o m (Maybe c)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe c
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-789"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679093305"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679093305"><span class="hs-identifier hs-var">z</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-790"></span><span>          </span><span id="local-6989586621679093304"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679093304"><span class="hs-identifier hs-var">z'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">b -&gt; ConduitT Event o m c
</span><a href="#local-6989586621679093315"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679093305"><span class="hs-identifier hs-var">z</span></a></span><span>
</span><span id="line-791"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679093303"><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093303"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093302"><span class="annot"><span class="annottext">[Event]
</span><a href="#local-6989586621679093302"><span class="hs-identifier hs-var">_leftovers'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Event] -&gt; ConduitT Event o m (Maybe Event, [Event])
forall (m :: * -&gt; *) o.
Monad m =&gt;
[Event] -&gt; ConduitT Event o m (Maybe Event, [Event])
</span><a href="#local-6989586621679093312"><span class="hs-identifier hs-var">dropWS</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-792"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093303"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-793"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EventEndElement</span></span><span> </span><span id="local-6989586621679093301"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093301"><span class="hs-identifier hs-var">name'</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-794"></span><span>              </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093310"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093301"><span class="hs-identifier hs-var">name'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe c -&gt; ConduitT Event o m (Maybe c)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">c -&gt; Maybe c
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621679093304"><span class="hs-identifier hs-var">z'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-795"></span><span>            </span><span class="annot"><span class="annottext">Maybe Event
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m (Maybe c) -&gt; ConduitT Event o m (Maybe c)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe c) -&gt; ConduitT Event o m (Maybe c))
-&gt; m (Maybe c) -&gt; ConduitT Event o m (Maybe c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XmlException -&gt; m (Maybe c)
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">(XmlException -&gt; m (Maybe c)) -&gt; XmlException -&gt; m (Maybe c)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Event -&gt; XmlException
</span><a href="Text.XML.Stream.Parse.html#InvalidEndElement"><span class="hs-identifier hs-var">InvalidEndElement</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093310"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093303"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-796"></span><span>      </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe c -&gt; ConduitT Event o m (Maybe c)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe c
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-797"></span><span>    </span><span class="annot"><span class="annottext">Maybe Event
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe c -&gt; ConduitT Event o m (Maybe c)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe c
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-798"></span><span>
</span><span id="line-799"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe c
</span><a href="#local-6989586621679093311"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-800"></span><span>    </span><span class="hs-comment">-- Did not parse, put back all of the leading whitespace events and the</span><span>
</span><span id="line-801"></span><span>    </span><span class="hs-comment">-- final observed event generated by dropWS</span><span>
</span><span id="line-802"></span><span>    </span><span class="annot"><span class="annottext">Maybe c
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Event -&gt; ConduitT Event o m ())
-&gt; [Event] -&gt; ConduitT Event o m ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">Event -&gt; ConduitT Event o m ()
forall i o (m :: * -&gt; *). i -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">leftover</span></span><span> </span><span class="annot"><span class="annottext">[Event]
</span><a href="#local-6989586621679093313"><span class="hs-identifier hs-var">leftovers</span></a></span><span>
</span><span id="line-803"></span><span>    </span><span class="hs-comment">-- Parse succeeded, discard all of those whitespace events and the</span><span>
</span><span id="line-804"></span><span>    </span><span class="hs-comment">-- first parsed event</span><span>
</span><span id="line-805"></span><span>    </span><span class="annot"><span class="annottext">Maybe c
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; ConduitT Event o m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-806"></span><span>
</span><span id="line-807"></span><span>  </span><span class="annot"><span class="annottext">Maybe c -&gt; ConduitT Event o m (Maybe c)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe c
</span><a href="#local-6989586621679093311"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-808"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-809"></span><span>    </span><span class="hs-comment">-- Drop Events until we encounter a non-whitespace element. Return all of</span><span>
</span><span id="line-810"></span><span>    </span><span class="hs-comment">-- the events consumed here (including the first non-whitespace event) so</span><span>
</span><span id="line-811"></span><span>    </span><span class="hs-comment">-- that the calling function can treat them as leftovers if the parse fails</span><span>
</span><span id="line-812"></span><span>    </span><span id="local-6989586621679093312"><span class="annot"><span class="annottext">dropWS :: [Event] -&gt; ConduitT Event o m (Maybe Event, [Event])
</span><a href="#local-6989586621679093312"><span class="hs-identifier hs-var hs-var">dropWS</span></a></span></span><span> </span><span id="local-6989586621679093299"><span class="annot"><span class="annottext">[Event]
</span><a href="#local-6989586621679093299"><span class="hs-identifier hs-var">leftovers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-813"></span><span>        </span><span id="local-6989586621679093298"><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093298"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe Event)
forall (m :: * -&gt; *) i. Monad m =&gt; Consumer i m (Maybe i)
</span><span class="hs-identifier hs-var">await</span></span><span>
</span><span id="line-814"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679093297"><span class="annot"><span class="annottext">leftovers' :: [Event]
</span><a href="#local-6989586621679093297"><span class="hs-identifier hs-var hs-var">leftovers'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Event] -&gt; [Event])
-&gt; (Event -&gt; [Event] -&gt; [Event])
-&gt; Maybe Event
-&gt; [Event]
-&gt; [Event]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">[Event] -&gt; [Event]
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">:</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093298"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">[Event]
</span><a href="#local-6989586621679093299"><span class="hs-identifier hs-var">leftovers</span></a></span><span>
</span><span id="line-815"></span><span>
</span><span id="line-816"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Event -&gt; Bool
</span><a href="Text.XML.Stream.Parse.html#isWhitespace"><span class="hs-identifier hs-var">isWhitespace</span></a></span><span> </span><span class="annot"><span class="annottext">(Event -&gt; Bool) -&gt; Maybe Event -&gt; Maybe Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093298"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-817"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Event] -&gt; ConduitT Event o m (Maybe Event, [Event])
</span><a href="#local-6989586621679093312"><span class="hs-identifier hs-var">dropWS</span></a></span><span> </span><span class="annot"><span class="annottext">[Event]
</span><a href="#local-6989586621679093297"><span class="hs-identifier hs-var">leftovers'</span></a></span><span>
</span><span id="line-818"></span><span>          </span><span class="annot"><span class="annottext">Maybe Bool
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Maybe Event, [Event]) -&gt; ConduitT Event o m (Maybe Event, [Event])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093298"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Event]
</span><a href="#local-6989586621679093297"><span class="hs-identifier hs-var">leftovers'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-819"></span><span>    </span><span id="local-6989586621679093306"><span class="annot"><span class="annottext">runAttrParser' :: AttrParser b -&gt; [(Name, [Content])] -&gt; Either SomeException b
</span><a href="#local-6989586621679093306"><span class="hs-identifier hs-var hs-var">runAttrParser'</span></a></span></span><span> </span><span id="local-6989586621679093296"><span class="annot"><span class="annottext">AttrParser b
</span><a href="#local-6989586621679093296"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679093295"><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093295"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-820"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AttrParser b
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], b)
forall a.
AttrParser a
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], a)
</span><a href="Text.XML.Stream.Parse.html#runAttrParser"><span class="hs-identifier hs-var hs-var">runAttrParser</span></a></span><span> </span><span class="annot"><span class="annottext">AttrParser b
</span><a href="#local-6989586621679093296"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093295"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-821"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679093293"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679093293"><span class="hs-identifier hs-var">e</span></a></span></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Either SomeException b
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679093293"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-822"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093292"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679093292"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b -&gt; Either SomeException b
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679093292"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-823"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679093291"><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093291"><span class="hs-identifier hs-var">attr'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Either SomeException b
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; Either SomeException b)
-&gt; SomeException -&gt; Either SomeException b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XmlException -&gt; SomeException
forall e. Exception e =&gt; e -&gt; SomeException
</span><span class="hs-identifier hs-var">toException</span></span><span> </span><span class="annot"><span class="annottext">(XmlException -&gt; SomeException) -&gt; XmlException -&gt; SomeException
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])] -&gt; XmlException
</span><a href="Text.XML.Stream.Parse.html#UnparsedAttributes"><span class="hs-identifier hs-var">UnparsedAttributes</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093291"><span class="hs-identifier hs-var">attr'</span></a></span><span>
</span><span id="line-824"></span><span>
</span><span id="line-825"></span><span class="hs-comment">-- | A simplified version of 'tag' where the 'NameMatcher' result isn't forwarded to the attributes parser.</span><span>
</span><span id="line-826"></span><span class="hs-comment">--</span><span>
</span><span id="line-827"></span><span class="hs-comment">-- Since 1.5.0</span><span>
</span><span id="line-828"></span><span id="local-6989586621679093968"><span id="local-6989586621679093969"><span id="local-6989586621679093970"><span id="local-6989586621679093971"><span id="local-6989586621679093972"><span class="annot"><a href="Text.XML.Stream.Parse.html#tag%27"><span class="hs-identifier hs-type">tag'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093972"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-829"></span><span>     </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093971"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093970"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679093970"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093969"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093972"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093968"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-830"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093969"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093972"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093968"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-831"></span><span id="tag%27"><span class="annot"><span class="annottext">tag' :: NameMatcher a
-&gt; AttrParser b
-&gt; (b -&gt; ConduitT Event o m c)
-&gt; ConduitT Event o m (Maybe c)
</span><a href="Text.XML.Stream.Parse.html#tag%27"><span class="hs-identifier hs-var hs-var">tag'</span></a></span></span><span> </span><span id="local-6989586621679093288"><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093288"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679093287"><span class="annot"><span class="annottext">AttrParser b
</span><a href="#local-6989586621679093287"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameMatcher a
-&gt; (a -&gt; AttrParser b)
-&gt; (b -&gt; ConduitT Event o m c)
-&gt; ConduitT Event o m (Maybe c)
forall (m :: * -&gt; *) a b o c.
MonadThrow m =&gt;
NameMatcher a
-&gt; (a -&gt; AttrParser b)
-&gt; (b -&gt; ConduitT Event o m c)
-&gt; ConduitT Event o m (Maybe c)
</span><a href="Text.XML.Stream.Parse.html#tag"><span class="hs-identifier hs-var">tag</span></a></span><span> </span><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093288"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AttrParser b -&gt; a -&gt; AttrParser b
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">AttrParser b
</span><a href="#local-6989586621679093287"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-832"></span><span>
</span><span id="line-833"></span><span class="hs-comment">-- | A further simplified tag parser, which requires that no attributes exist.</span><span>
</span><span id="line-834"></span><span id="local-6989586621679093283"><span id="local-6989586621679093284"><span id="local-6989586621679093285"><span id="local-6989586621679093286"><span class="annot"><a href="Text.XML.Stream.Parse.html#tagNoAttr"><span class="hs-identifier hs-type">tagNoAttr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093286"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-835"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093285"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-comment">-- ^ Check if this is a correct tag name</span><span>
</span><span id="line-836"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093284"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093286"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093283"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-comment">-- ^ Handler function to handle the children of the matched tag</span><span>
</span><span id="line-837"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093284"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093286"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093283"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-838"></span><span id="tagNoAttr"><span class="annot"><span class="annottext">tagNoAttr :: NameMatcher a
-&gt; ConduitT Event o m b -&gt; ConduitT Event o m (Maybe b)
</span><a href="Text.XML.Stream.Parse.html#tagNoAttr"><span class="hs-identifier hs-var hs-var">tagNoAttr</span></a></span></span><span> </span><span id="local-6989586621679093282"><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093282"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679093281"><span class="annot"><span class="annottext">ConduitT Event o m b
</span><a href="#local-6989586621679093281"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameMatcher a
-&gt; AttrParser ()
-&gt; (() -&gt; ConduitT Event o m b)
-&gt; ConduitT Event o m (Maybe b)
forall (m :: * -&gt; *) a b o c.
MonadThrow m =&gt;
NameMatcher a
-&gt; AttrParser b
-&gt; (b -&gt; ConduitT Event o m c)
-&gt; ConduitT Event o m (Maybe c)
</span><a href="Text.XML.Stream.Parse.html#tag%27"><span class="hs-identifier hs-var">tag'</span></a></span><span> </span><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093282"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; AttrParser ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((() -&gt; ConduitT Event o m b) -&gt; ConduitT Event o m (Maybe b))
-&gt; (() -&gt; ConduitT Event o m b) -&gt; ConduitT Event o m (Maybe b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m b -&gt; () -&gt; ConduitT Event o m b
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m b
</span><a href="#local-6989586621679093281"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-839"></span><span>
</span><span id="line-840"></span><span>
</span><span id="line-841"></span><span class="hs-comment">-- | A further simplified tag parser, which ignores all attributes, if any exist</span><span>
</span><span id="line-842"></span><span id="local-6989586621679093957"><span id="local-6989586621679093958"><span id="local-6989586621679093959"><span id="local-6989586621679093960"><span class="annot"><a href="Text.XML.Stream.Parse.html#tagIgnoreAttrs"><span class="hs-identifier hs-type">tagIgnoreAttrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093960"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-843"></span><span>               </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093959"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-comment">-- ^ Check if this is a correct tag name</span><span>
</span><span id="line-844"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093958"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093960"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093957"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-comment">-- ^ Handler function to handle the children of the matched tag</span><span>
</span><span id="line-845"></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093958"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093960"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093957"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-846"></span><span id="tagIgnoreAttrs"><span class="annot"><span class="annottext">tagIgnoreAttrs :: NameMatcher a
-&gt; ConduitT Event o m b -&gt; ConduitT Event o m (Maybe b)
</span><a href="Text.XML.Stream.Parse.html#tagIgnoreAttrs"><span class="hs-identifier hs-var hs-var">tagIgnoreAttrs</span></a></span></span><span> </span><span id="local-6989586621679093280"><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093280"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679093279"><span class="annot"><span class="annottext">ConduitT Event o m b
</span><a href="#local-6989586621679093279"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameMatcher a
-&gt; AttrParser ()
-&gt; (() -&gt; ConduitT Event o m b)
-&gt; ConduitT Event o m (Maybe b)
forall (m :: * -&gt; *) a b o c.
MonadThrow m =&gt;
NameMatcher a
-&gt; AttrParser b
-&gt; (b -&gt; ConduitT Event o m c)
-&gt; ConduitT Event o m (Maybe c)
</span><a href="Text.XML.Stream.Parse.html#tag%27"><span class="hs-identifier hs-var">tag'</span></a></span><span> </span><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093280"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">AttrParser ()
</span><a href="Text.XML.Stream.Parse.html#ignoreAttrs"><span class="hs-identifier hs-var">ignoreAttrs</span></a></span><span> </span><span class="annot"><span class="annottext">((() -&gt; ConduitT Event o m b) -&gt; ConduitT Event o m (Maybe b))
-&gt; (() -&gt; ConduitT Event o m b) -&gt; ConduitT Event o m (Maybe b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m b -&gt; () -&gt; ConduitT Event o m b
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m b
</span><a href="#local-6989586621679093279"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-847"></span><span>
</span><span id="line-848"></span><span>
</span><span id="line-849"></span><span class="hs-comment">-- | Ignore an empty tag and all of its attributes.</span><span>
</span><span id="line-850"></span><span class="hs-comment">--   This does not ignore the tag recursively</span><span>
</span><span id="line-851"></span><span class="hs-comment">--   (i.e. it assumes there are no child elements).</span><span>
</span><span id="line-852"></span><span class="hs-comment">--   This function returns @Just ()@ if the tag matched.</span><span>
</span><span id="line-853"></span><span class="hs-comment">--</span><span>
</span><span id="line-854"></span><span class="hs-comment">-- Since 1.5.0</span><span>
</span><span id="line-855"></span><span id="local-6989586621679093276"><span id="local-6989586621679093277"><span id="local-6989586621679093278"><span class="annot"><a href="Text.XML.Stream.Parse.html#ignoreEmptyTag"><span class="hs-identifier hs-type">ignoreEmptyTag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093278"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-856"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093277"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-comment">-- ^ Check if this is a correct tag name</span><span>
</span><span id="line-857"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093276"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093278"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-858"></span><span id="ignoreEmptyTag"><span class="annot"><span class="annottext">ignoreEmptyTag :: NameMatcher a -&gt; ConduitT Event o m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#ignoreEmptyTag"><span class="hs-identifier hs-var hs-var">ignoreEmptyTag</span></a></span></span><span> </span><span id="local-6989586621679093275"><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093275"><span class="hs-identifier hs-var">nameMatcher</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameMatcher a
-&gt; ConduitT Event o m () -&gt; ConduitT Event o m (Maybe ())
forall (m :: * -&gt; *) a o b.
MonadThrow m =&gt;
NameMatcher a
-&gt; ConduitT Event o m b -&gt; ConduitT Event o m (Maybe b)
</span><a href="Text.XML.Stream.Parse.html#tagIgnoreAttrs"><span class="hs-identifier hs-var">tagIgnoreAttrs</span></a></span><span> </span><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093275"><span class="hs-identifier hs-var">nameMatcher</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; ConduitT Event o m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-859"></span><span>
</span><span id="line-860"></span><span>
</span><span id="line-861"></span><span id="local-6989586621679093937"><span id="local-6989586621679093938"><span id="local-6989586621679093939"><span class="annot"><a href="Text.XML.Stream.Parse.html#ignored"><span class="hs-identifier hs-type">ignored</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679093939"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><a href="#local-6989586621679093938"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093937"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093939"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-862"></span><span id="ignored"><span class="annot"><span class="annottext">ignored :: ConduitT i o m ()
</span><a href="Text.XML.Stream.Parse.html#ignored"><span class="hs-identifier hs-var hs-var">ignored</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ConduitT i o m () -&gt; ConduitT i o m ()) -&gt; ConduitT i o m ()
forall a. (a -&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">fix</span></span><span> </span><span class="annot"><span class="annottext">((ConduitT i o m () -&gt; ConduitT i o m ()) -&gt; ConduitT i o m ())
-&gt; (ConduitT i o m () -&gt; ConduitT i o m ()) -&gt; ConduitT i o m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679093273"><span class="annot"><span class="annottext">ConduitT i o m ()
</span><a href="#local-6989586621679093273"><span class="hs-identifier hs-var">recurse</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-863"></span><span>  </span><span id="local-6989586621679093272"><span class="annot"><span class="annottext">Maybe i
</span><a href="#local-6989586621679093272"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ConduitT i o m (Maybe i)
forall (m :: * -&gt; *) i. Monad m =&gt; Consumer i m (Maybe i)
</span><span class="hs-identifier hs-var">await</span></span><span>
</span><span id="line-864"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe i
</span><a href="#local-6989586621679093272"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-865"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">i
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConduitT i o m ()
</span><a href="#local-6989586621679093273"><span class="hs-identifier hs-var">recurse</span></a></span><span>
</span><span id="line-866"></span><span>    </span><span class="annot"><span class="annottext">Maybe i
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; ConduitT i o m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-867"></span><span>
</span><span id="line-868"></span><span>
</span><span id="line-869"></span><span class="hs-comment">-- | Same as `takeTree`, without yielding `Event`s.</span><span>
</span><span id="line-870"></span><span class="hs-comment">--</span><span>
</span><span id="line-871"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;&lt;a&gt;content&lt;/a&gt;&lt;b&gt;&lt;/b&gt;&quot; .| (ignoreTree &quot;a&quot; ignoreAttrs &gt;&gt; sinkList)</span><span>
</span><span id="line-872"></span><span class="hs-comment">-- [EventBeginElement (Name {nameLocalName = &quot;b&quot;, ...}) [],EventEndElement (Name {nameLocalName = &quot;b&quot;, ...}),EventEndDocument]</span><span>
</span><span id="line-873"></span><span class="hs-comment">--</span><span>
</span><span id="line-874"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;&lt;a&gt;content&lt;/a&gt;&quot; .| (ignoreTree &quot;b&quot; ignoreAttrs &gt;&gt; sinkList)</span><span>
</span><span id="line-875"></span><span class="hs-comment">-- [EventBeginElement (Name {nameLocalName = &quot;a&quot;, ...}) [],EventContent (ContentText &quot;content&quot;),EventEndElement (Name {nameLocalName = &quot;a&quot;, ...}),EventEndDocument]</span><span>
</span><span id="line-876"></span><span class="hs-comment">--</span><span>
</span><span id="line-877"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;content&lt;a&gt;&lt;/a&gt;&quot; .| (ignoreTree anyName ignoreAttrs &gt;&gt; sinkList)</span><span>
</span><span id="line-878"></span><span class="hs-comment">-- [EventContent (ContentText &quot;content&quot;),EventBeginElement (Name {nameLocalName = &quot;a&quot;, ...}) [],EventEndElement (Name {nameLocalName = &quot;a&quot;, ...}),EventEndDocument]</span><span>
</span><span id="line-879"></span><span class="hs-comment">--</span><span>
</span><span id="line-880"></span><span class="hs-comment">-- Since 1.9.0</span><span>
</span><span id="line-881"></span><span id="local-6989586621679093268"><span id="local-6989586621679093269"><span id="local-6989586621679093270"><span id="local-6989586621679093271"><span class="annot"><a href="Text.XML.Stream.Parse.html#ignoreTree"><span class="hs-identifier hs-type">ignoreTree</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093271"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093270"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093269"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093268"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093271"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-882"></span><span id="ignoreTree"><span class="annot"><span class="annottext">ignoreTree :: NameMatcher a -&gt; AttrParser b -&gt; ConduitT Event o m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#ignoreTree"><span class="hs-identifier hs-var hs-var">ignoreTree</span></a></span></span><span> </span><span id="local-6989586621679093267"><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093267"><span class="hs-identifier hs-var">nameMatcher</span></a></span></span><span> </span><span id="local-6989586621679093266"><span class="annot"><span class="annottext">AttrParser b
</span><a href="#local-6989586621679093266"><span class="hs-identifier hs-var">attrParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe ())
-&gt; Conduit Event m o -&gt; ConduitT Event o m (Maybe ())
forall (m :: * -&gt; *) a b r c.
Monad m =&gt;
ConduitT a b m r -&gt; Conduit b m c -&gt; ConduitT a c m r
</span><span class="hs-identifier hs-var">fuseUpstream</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameMatcher a -&gt; AttrParser b -&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a b.
MonadThrow m =&gt;
NameMatcher a -&gt; AttrParser b -&gt; ConduitT Event Event m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#takeTree"><span class="hs-identifier hs-var">takeTree</span></a></span><span> </span><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093267"><span class="hs-identifier hs-var">nameMatcher</span></a></span><span> </span><span class="annot"><span class="annottext">AttrParser b
</span><a href="#local-6989586621679093266"><span class="hs-identifier hs-var">attrParser</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Conduit Event m o
forall (m :: * -&gt; *) i o. Monad m =&gt; ConduitT i o m ()
</span><a href="Text.XML.Stream.Parse.html#ignored"><span class="hs-identifier hs-var">ignored</span></a></span><span>
</span><span id="line-883"></span><span>
</span><span id="line-884"></span><span class="hs-comment">-- | Same as `takeContent`, without yielding `Event`s.</span><span>
</span><span id="line-885"></span><span class="hs-comment">--</span><span>
</span><span id="line-886"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;&lt;a&gt;content&lt;/a&gt;&quot; .| (ignoreContent &gt;&gt; sinkList)</span><span>
</span><span id="line-887"></span><span class="hs-comment">-- [EventBeginElement (Name {nameLocalName = &quot;a&quot;, ...}) [],EventContent (ContentText &quot;content&quot;),EventEndElement (Name {nameLocalName = &quot;a&quot;, ...}),EventEndDocument]</span><span>
</span><span id="line-888"></span><span class="hs-comment">--</span><span>
</span><span id="line-889"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;content&lt;a&gt;&lt;/a&gt;&quot; .| (ignoreContent &gt;&gt; sinkList)</span><span>
</span><span id="line-890"></span><span class="hs-comment">-- [EventBeginElement (Name {nameLocalName = &quot;a&quot;, ...}) [],EventEndElement (Name {nameLocalName = &quot;a&quot;, ...}),EventEndDocument]</span><span>
</span><span id="line-891"></span><span class="hs-comment">--</span><span>
</span><span id="line-892"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;content&lt;a&gt;&lt;/a&gt;&quot; .| (ignoreContent &gt;&gt; sinkList)</span><span>
</span><span id="line-893"></span><span class="hs-comment">-- [EventBeginElement (Name {nameLocalName = &quot;a&quot;, ...}) [],EventEndElement (Name {nameLocalName = &quot;a&quot;, ...}),EventEndDocument]</span><span>
</span><span id="line-894"></span><span class="hs-comment">--</span><span>
</span><span id="line-895"></span><span class="hs-comment">-- Since 1.9.0</span><span>
</span><span id="line-896"></span><span id="local-6989586621679093263"><span id="local-6989586621679093264"><span class="annot"><a href="Text.XML.Stream.Parse.html#ignoreContent"><span class="hs-identifier hs-type">ignoreContent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093264"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093263"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093264"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-897"></span><span id="ignoreContent"><span class="annot"><span class="annottext">ignoreContent :: ConduitT Event o m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#ignoreContent"><span class="hs-identifier hs-var hs-var">ignoreContent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe ())
-&gt; Conduit Event m o -&gt; ConduitT Event o m (Maybe ())
forall (m :: * -&gt; *) a b r c.
Monad m =&gt;
ConduitT a b m r -&gt; Conduit b m c -&gt; ConduitT a c m r
</span><span class="hs-identifier hs-var">fuseUpstream</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *).
MonadThrow m =&gt;
ConduitT Event Event m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#takeContent"><span class="hs-identifier hs-var">takeContent</span></a></span><span> </span><span class="annot"><span class="annottext">Conduit Event m o
forall (m :: * -&gt; *) i o. Monad m =&gt; ConduitT i o m ()
</span><a href="Text.XML.Stream.Parse.html#ignored"><span class="hs-identifier hs-var">ignored</span></a></span><span>
</span><span id="line-898"></span><span>
</span><span id="line-899"></span><span>
</span><span id="line-900"></span><span class="hs-comment">-- | Same as `takeTreeContent`, without yielding `Event`s.</span><span>
</span><span id="line-901"></span><span class="hs-comment">--</span><span>
</span><span id="line-902"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;&lt;a&gt;content&lt;/a&gt;&lt;b&gt;&lt;/b&gt;&quot; .| (ignoreTreeContent &quot;a&quot; ignoreAttrs &gt;&gt; sinkList)</span><span>
</span><span id="line-903"></span><span class="hs-comment">-- [EventBeginElement (Name {nameLocalName = &quot;b&quot;, ...}) [],EventEndElement (Name {nameLocalName = &quot;b&quot;, ...}),EventEndDocument]</span><span>
</span><span id="line-904"></span><span class="hs-comment">--</span><span>
</span><span id="line-905"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;&lt;a&gt;content&lt;/a&gt;&quot; .| (ignoreTreeContent &quot;b&quot; ignoreAttrs &gt;&gt; sinkList)</span><span>
</span><span id="line-906"></span><span class="hs-comment">-- [EventBeginElement (Name {nameLocalName = &quot;a&quot;, ...}) [],EventContent (ContentText &quot;content&quot;),EventEndElement (Name {nameLocalName = &quot;a&quot;, ...}),EventEndDocument]</span><span>
</span><span id="line-907"></span><span class="hs-comment">--</span><span>
</span><span id="line-908"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;content&lt;a&gt;&lt;/a&gt;&quot; .| (ignoreTreeContent anyName ignoreAttrs &gt;&gt; sinkList)</span><span>
</span><span id="line-909"></span><span class="hs-comment">-- [EventBeginElement (Name {nameLocalName = &quot;a&quot;, ...}) [],EventEndElement (Name {nameLocalName = &quot;a&quot;, ...}),EventEndDocument]</span><span>
</span><span id="line-910"></span><span class="hs-comment">--</span><span>
</span><span id="line-911"></span><span class="hs-comment">-- Since 1.5.0</span><span>
</span><span id="line-912"></span><span id="local-6989586621679093259"><span id="local-6989586621679093260"><span id="local-6989586621679093261"><span id="local-6989586621679093262"><span class="annot"><a href="Text.XML.Stream.Parse.html#ignoreTreeContent"><span class="hs-identifier hs-type">ignoreTreeContent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093262"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093261"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093260"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093259"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093262"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-913"></span><span id="ignoreTreeContent"><span class="annot"><span class="annottext">ignoreTreeContent :: NameMatcher a -&gt; AttrParser b -&gt; ConduitT Event o m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#ignoreTreeContent"><span class="hs-identifier hs-var hs-var">ignoreTreeContent</span></a></span></span><span> </span><span id="local-6989586621679093258"><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093258"><span class="hs-identifier hs-var">namePred</span></a></span></span><span> </span><span id="local-6989586621679093257"><span class="annot"><span class="annottext">AttrParser b
</span><a href="#local-6989586621679093257"><span class="hs-identifier hs-var">attrParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe ())
-&gt; Conduit Event m o -&gt; ConduitT Event o m (Maybe ())
forall (m :: * -&gt; *) a b r c.
Monad m =&gt;
ConduitT a b m r -&gt; Conduit b m c -&gt; ConduitT a c m r
</span><span class="hs-identifier hs-var">fuseUpstream</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameMatcher a -&gt; AttrParser b -&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a b.
MonadThrow m =&gt;
NameMatcher a -&gt; AttrParser b -&gt; ConduitT Event Event m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#takeTreeContent"><span class="hs-identifier hs-var">takeTreeContent</span></a></span><span> </span><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093258"><span class="hs-identifier hs-var">namePred</span></a></span><span> </span><span class="annot"><span class="annottext">AttrParser b
</span><a href="#local-6989586621679093257"><span class="hs-identifier hs-var">attrParser</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Conduit Event m o
forall (m :: * -&gt; *) i o. Monad m =&gt; ConduitT i o m ()
</span><a href="Text.XML.Stream.Parse.html#ignored"><span class="hs-identifier hs-var">ignored</span></a></span><span>
</span><span id="line-914"></span><span>
</span><span id="line-915"></span><span>
</span><span id="line-916"></span><span class="hs-comment">-- | Same as `takeAnyTreeContent`, without yielding `Event`s.</span><span>
</span><span id="line-917"></span><span class="hs-comment">--</span><span>
</span><span id="line-918"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;&lt;a&gt;content&lt;/a&gt;&lt;b&gt;&lt;/b&gt;&quot; .| (ignoreAnyTreeContent &gt;&gt; sinkList)</span><span>
</span><span id="line-919"></span><span class="hs-comment">-- [EventBeginElement (Name {nameLocalName = &quot;b&quot;, ...}) [],EventEndElement (Name {nameLocalName = &quot;b&quot;, ...}),EventEndDocument]</span><span>
</span><span id="line-920"></span><span class="hs-comment">--</span><span>
</span><span id="line-921"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;text&lt;b&gt;&lt;/b&gt;&quot; .| (ignoreAnyTreeContent &gt;&gt; sinkList)</span><span>
</span><span id="line-922"></span><span class="hs-comment">-- [EventBeginElement (Name {nameLocalName = &quot;b&quot;, ...}) [],EventEndElement (Name {nameLocalName = &quot;b&quot;, ...}),EventEndDocument]</span><span>
</span><span id="line-923"></span><span class="hs-comment">--</span><span>
</span><span id="line-924"></span><span class="hs-comment">-- Since 1.5.0</span><span>
</span><span id="line-925"></span><span id="local-6989586621679093805"><span id="local-6989586621679093806"><span class="annot"><a href="Text.XML.Stream.Parse.html#ignoreAnyTreeContent"><span class="hs-identifier hs-type">ignoreAnyTreeContent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093806"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093805"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093806"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-926"></span><span id="ignoreAnyTreeContent"><span class="annot"><span class="annottext">ignoreAnyTreeContent :: ConduitT Event o m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#ignoreAnyTreeContent"><span class="hs-identifier hs-var hs-var">ignoreAnyTreeContent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe ())
-&gt; Conduit Event m o -&gt; ConduitT Event o m (Maybe ())
forall (m :: * -&gt; *) a b r c.
Monad m =&gt;
ConduitT a b m r -&gt; Conduit b m c -&gt; ConduitT a c m r
</span><span class="hs-identifier hs-var">fuseUpstream</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *).
MonadThrow m =&gt;
ConduitT Event Event m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#takeAnyTreeContent"><span class="hs-identifier hs-var">takeAnyTreeContent</span></a></span><span> </span><span class="annot"><span class="annottext">Conduit Event m o
forall (m :: * -&gt; *) i o. Monad m =&gt; ConduitT i o m ()
</span><a href="Text.XML.Stream.Parse.html#ignored"><span class="hs-identifier hs-var">ignored</span></a></span><span>
</span><span id="line-927"></span><span>
</span><span id="line-928"></span><span>
</span><span id="line-929"></span><span class="hs-comment">-- | Get the value of the first parser which returns 'Just'. If no parsers</span><span>
</span><span id="line-930"></span><span class="hs-comment">-- succeed (i.e., return @Just@), this function returns 'Nothing'.</span><span>
</span><span id="line-931"></span><span class="hs-comment">--</span><span>
</span><span id="line-932"></span><span class="hs-comment">-- &gt; orE a b = choose [a, b]</span><span>
</span><span id="line-933"></span><span class="hs-comment">--</span><span>
</span><span id="line-934"></span><span class="hs-comment">-- Warning: `orE` doesn't backtrack. See 'choose' for detailed explanation.</span><span>
</span><span id="line-935"></span><span id="local-6989586621679093254"><span id="local-6989586621679093255"><span id="local-6989586621679093256"><span class="annot"><a href="Text.XML.Stream.Parse.html#orE"><span class="hs-identifier hs-type">orE</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679093256"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-936"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093255"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093256"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093254"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ The first (preferred) parser</span><span>
</span><span id="line-937"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093255"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093256"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093254"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ The second parser, only executed if the first parser fails</span><span>
</span><span id="line-938"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093255"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093256"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093254"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-939"></span><span id="orE"><span class="annot"><span class="annottext">orE :: ConduitT Event o m (Maybe a)
-&gt; ConduitT Event o m (Maybe a) -&gt; ConduitT Event o m (Maybe a)
</span><a href="Text.XML.Stream.Parse.html#orE"><span class="hs-identifier hs-var hs-var">orE</span></a></span></span><span> </span><span id="local-6989586621679093253"><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
</span><a href="#local-6989586621679093253"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679093252"><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
</span><a href="#local-6989586621679093252"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
</span><a href="#local-6989586621679093253"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
-&gt; (Maybe a -&gt; ConduitT Event o m (Maybe a))
-&gt; ConduitT Event o m (Maybe a)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679093251"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621679093251"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
-&gt; (a -&gt; ConduitT Event o m (Maybe a))
-&gt; Maybe a
-&gt; ConduitT Event o m (Maybe a)
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
</span><a href="#local-6989586621679093252"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a) -&gt; a -&gt; ConduitT Event o m (Maybe a)
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(ConduitT Event o m (Maybe a) -&gt; a -&gt; ConduitT Event o m (Maybe a))
-&gt; ConduitT Event o m (Maybe a)
-&gt; a
-&gt; ConduitT Event o m (Maybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; ConduitT Event o m (Maybe a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621679093251"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621679093251"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-940"></span><span>
</span><span id="line-941"></span><span class="hs-comment">-- | Get the value of the first parser which returns 'Just'. If no parsers</span><span>
</span><span id="line-942"></span><span class="hs-comment">-- succeed (i.e., return 'Just'), this function returns 'Nothing'.</span><span>
</span><span id="line-943"></span><span class="hs-comment">--</span><span>
</span><span id="line-944"></span><span class="hs-comment">-- Warning: 'choose' doesn't backtrack. If a parser consumed some events,</span><span>
</span><span id="line-945"></span><span class="hs-comment">-- subsequent parsers will continue from the following events. This can be a</span><span>
</span><span id="line-946"></span><span class="hs-comment">-- problem if parsers share an accepted prefix of events, so an earlier</span><span>
</span><span id="line-947"></span><span class="hs-comment">-- (failing) parser will discard the events that the later parser could</span><span>
</span><span id="line-948"></span><span class="hs-comment">-- potentially succeed on.</span><span>
</span><span id="line-949"></span><span class="hs-comment">--</span><span>
</span><span id="line-950"></span><span class="hs-comment">-- An other problematic case is using 'choose' to implement order-independent</span><span>
</span><span id="line-951"></span><span class="hs-comment">-- parsing using a set of parsers, with a final trailing ignore-anything-else</span><span>
</span><span id="line-952"></span><span class="hs-comment">-- action.  In this case, certain trees might be skipped.</span><span>
</span><span id="line-953"></span><span class="hs-comment">--</span><span>
</span><span id="line-954"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-955"></span><span class="hs-comment">-- let parse2Tags name1 name2 = do</span><span>
</span><span id="line-956"></span><span class="hs-comment">--       tag1 &lt;- tagNoAttr name1 (pure ())</span><span>
</span><span id="line-957"></span><span class="hs-comment">--       tag2 &lt;- tagNoAttr name2 (pure tag1)</span><span>
</span><span id="line-958"></span><span class="hs-comment">--       return $ join tag2</span><span>
</span><span id="line-959"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-960"></span><span class="hs-comment">--</span><span>
</span><span id="line-961"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-962"></span><span class="hs-comment">-- runConduit $ parseLBS def &quot;&lt;a&gt;&lt;/a&gt;&lt;b&gt;&lt;/b&gt;&quot; .| choose</span><span>
</span><span id="line-963"></span><span class="hs-comment">--   [ parse2Tags &quot;a&quot; &quot;b&quot;</span><span>
</span><span id="line-964"></span><span class="hs-comment">--   , parse2Tags &quot;a&quot; &quot;c&quot;</span><span>
</span><span id="line-965"></span><span class="hs-comment">--   ]</span><span>
</span><span id="line-966"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-967"></span><span class="hs-comment">-- Just ()</span><span>
</span><span id="line-968"></span><span class="hs-comment">--</span><span>
</span><span id="line-969"></span><span class="hs-comment">-- &gt;&gt;&gt; :{</span><span>
</span><span id="line-970"></span><span class="hs-comment">-- runConduit $ parseLBS def &quot;&lt;a&gt;&lt;/a&gt;&lt;b&gt;&lt;/b&gt;&quot; .| choose</span><span>
</span><span id="line-971"></span><span class="hs-comment">--   [ parse2Tags &quot;a&quot; &quot;c&quot;</span><span>
</span><span id="line-972"></span><span class="hs-comment">--   , parse2Tags &quot;a&quot; &quot;b&quot;</span><span>
</span><span id="line-973"></span><span class="hs-comment">--   ]</span><span>
</span><span id="line-974"></span><span class="hs-comment">-- :}</span><span>
</span><span id="line-975"></span><span class="hs-comment">-- Nothing</span><span>
</span><span id="line-976"></span><span id="local-6989586621679093919"><span id="local-6989586621679093920"><span id="local-6989586621679093921"><span class="annot"><a href="Text.XML.Stream.Parse.html#choose"><span class="hs-identifier hs-type">choose</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679093921"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-977"></span><span>       </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093920"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093921"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093919"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- ^ List of parsers that will be tried in order.</span><span>
</span><span id="line-978"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093920"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093921"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093919"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- ^ Result of the first parser to succeed, or @Nothing@</span><span>
</span><span id="line-979"></span><span>                                         </span><span class="hs-comment">--   if no parser succeeded</span></span></span></span><span>
</span><span id="line-980"></span><span id="choose"><span class="annot"><span class="annottext">choose :: [ConduitT Event o m (Maybe a)] -&gt; ConduitT Event o m (Maybe a)
</span><a href="Text.XML.Stream.Parse.html#choose"><span class="hs-identifier hs-var hs-var">choose</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; ConduitT Event o m (Maybe a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-981"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#choose"><span class="hs-identifier hs-var">choose</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679093250"><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
</span><a href="#local-6989586621679093250"><span class="hs-identifier hs-var">i</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679093249"><span class="annot"><span class="annottext">[ConduitT Event o m (Maybe a)]
</span><a href="#local-6989586621679093249"><span class="hs-identifier hs-var">is</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
</span><a href="#local-6989586621679093250"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
-&gt; (Maybe a -&gt; ConduitT Event o m (Maybe a))
-&gt; ConduitT Event o m (Maybe a)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
-&gt; (a -&gt; ConduitT Event o m (Maybe a))
-&gt; Maybe a
-&gt; ConduitT Event o m (Maybe a)
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ConduitT Event o m (Maybe a)] -&gt; ConduitT Event o m (Maybe a)
forall (m :: * -&gt; *) o a.
Monad m =&gt;
[ConduitT Event o m (Maybe a)] -&gt; ConduitT Event o m (Maybe a)
</span><a href="Text.XML.Stream.Parse.html#choose"><span class="hs-identifier hs-var">choose</span></a></span><span> </span><span class="annot"><span class="annottext">[ConduitT Event o m (Maybe a)]
</span><a href="#local-6989586621679093249"><span class="hs-identifier hs-var">is</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe a -&gt; ConduitT Event o m (Maybe a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; ConduitT Event o m (Maybe a))
-&gt; (a -&gt; Maybe a) -&gt; a -&gt; ConduitT Event o m (Maybe a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span class="hs-special">)</span><span>
</span><span id="line-982"></span><span>
</span><span id="line-983"></span><span class="hs-comment">-- | Force an optional parser into a required parser. All of the 'tag'</span><span>
</span><span id="line-984"></span><span class="hs-comment">-- functions, 'attr', 'choose' and 'many' deal with 'Maybe' parsers. Use this when you</span><span>
</span><span id="line-985"></span><span class="hs-comment">-- want to finally force something to happen.</span><span>
</span><span id="line-986"></span><span id="local-6989586621679093826"><span id="local-6989586621679093827"><span class="annot"><a href="Text.XML.Stream.Parse.html#force"><span class="hs-identifier hs-type">force</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093827"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-987"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-comment">-- ^ Error message</span><span>
</span><span id="line-988"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679093827"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093826"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ Optional parser to be forced</span><span>
</span><span id="line-989"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679093827"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093826"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-990"></span><span id="force"><span class="annot"><span class="annottext">force :: String -&gt; m (Maybe a) -&gt; m a
</span><a href="Text.XML.Stream.Parse.html#force"><span class="hs-identifier hs-var hs-var">force</span></a></span></span><span> </span><span id="local-6989586621679093248"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093248"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679093247"><span class="annot"><span class="annottext">m (Maybe a)
</span><a href="#local-6989586621679093247"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Maybe a)
</span><a href="#local-6989586621679093247"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">m (Maybe a) -&gt; (Maybe a -&gt; m a) -&gt; m a
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">m a -&gt; (a -&gt; m a) -&gt; Maybe a -&gt; m a
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">XmlException -&gt; m a
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">(XmlException -&gt; m a) -&gt; XmlException -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe Event -&gt; XmlException
</span><a href="Text.XML.Stream.Parse.html#XmlException"><span class="hs-identifier hs-var">XmlException</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093248"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Event
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-991"></span><span>
</span><span id="line-992"></span><span class="hs-comment">-- | A helper function which reads a file from disk using 'enumFile', detects</span><span>
</span><span id="line-993"></span><span class="hs-comment">-- character encoding using 'detectUtf', parses the XML using 'parseBytes', and</span><span>
</span><span id="line-994"></span><span class="hs-comment">-- then hands off control to your supplied parser.</span><span>
</span><span id="line-995"></span><span id="local-6989586621679093244"><span id="local-6989586621679093245"><span class="annot"><a href="Text.XML.Stream.Parse.html#parseFile"><span class="hs-identifier hs-type">parseFile</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadResource</span></span><span> </span><span class="annot"><a href="#local-6989586621679093245"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-996"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span>
</span><span id="line-997"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-998"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><a href="#local-6989586621679093244"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093245"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-999"></span><span id="parseFile"><span class="annot"><span class="annottext">parseFile :: ParseSettings -&gt; String -&gt; ConduitT i Event m ()
</span><a href="Text.XML.Stream.Parse.html#parseFile"><span class="hs-identifier hs-var hs-var">parseFile</span></a></span></span><span> </span><span id="local-6989586621679093242"><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093242"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679093241"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093241"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ConduitT i ByteString m ()
forall (m :: * -&gt; *) i.
MonadResource m =&gt;
String -&gt; ConduitT i ByteString m ()
</span><span class="hs-identifier hs-var">sourceFile</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093241"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT i ByteString m ()
-&gt; ConduitM ByteString Event m () -&gt; ConduitT i Event m ()
forall (m :: * -&gt; *) a b c r.
Monad m =&gt;
ConduitM a b m () -&gt; ConduitM b c m r -&gt; ConduitM a c m r
</span><span class="hs-operator hs-var">.|</span></span><span> </span><span class="annot"><span class="annottext">(forall a. IO a -&gt; m a)
-&gt; ConduitT ByteString Event IO ()
-&gt; ConduitM ByteString Event m ()
forall (m :: * -&gt; *) (n :: * -&gt; *) i o r.
Monad m =&gt;
(forall a. m a -&gt; n a) -&gt; ConduitT i o m r -&gt; ConduitT i o n r
</span><span class="hs-identifier hs-var">transPipe</span></span><span> </span><span class="annot"><span class="annottext">forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ParseSettings -&gt; ConduitT ByteString Event IO ()
forall (m :: * -&gt; *).
MonadThrow m =&gt;
ParseSettings -&gt; ConduitT ByteString Event m ()
</span><a href="Text.XML.Stream.Parse.html#parseBytes"><span class="hs-identifier hs-var">parseBytes</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093242"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1000"></span><span>
</span><span id="line-1001"></span><span class="hs-comment">-- | Parse an event stream from a lazy 'L.ByteString'.</span><span>
</span><span id="line-1002"></span><span id="local-6989586621679093237"><span id="local-6989586621679093238"><span class="annot"><a href="Text.XML.Stream.Parse.html#parseLBS"><span class="hs-identifier hs-type">parseLBS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093238"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-1003"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#ParseSettings"><span class="hs-identifier hs-type">ParseSettings</span></a></span><span>
</span><span id="line-1004"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">L.ByteString</span></span><span>
</span><span id="line-1005"></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><a href="#local-6989586621679093237"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093238"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1006"></span><span id="parseLBS"><span class="annot"><span class="annottext">parseLBS :: ParseSettings -&gt; ByteString -&gt; ConduitT i Event m ()
</span><a href="Text.XML.Stream.Parse.html#parseLBS"><span class="hs-identifier hs-var hs-var">parseLBS</span></a></span></span><span> </span><span id="local-6989586621679093236"><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093236"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621679093235"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093235"><span class="hs-identifier hs-var">lbs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ConduitT i ByteString m ()
forall (m :: * -&gt; *) lazy strict i.
(Monad m, LazySequence lazy strict) =&gt;
lazy -&gt; ConduitT i strict m ()
</span><span class="hs-identifier hs-var">sourceLazy</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679093235"><span class="hs-identifier hs-var">lbs</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT i ByteString m ()
-&gt; ConduitM ByteString Event m () -&gt; ConduitT i Event m ()
forall (m :: * -&gt; *) a b c r.
Monad m =&gt;
ConduitM a b m () -&gt; ConduitM b c m r -&gt; ConduitM a c m r
</span><span class="hs-operator hs-var">.|</span></span><span> </span><span class="annot"><span class="annottext">ParseSettings -&gt; ConduitM ByteString Event m ()
forall (m :: * -&gt; *).
MonadThrow m =&gt;
ParseSettings -&gt; ConduitT ByteString Event m ()
</span><a href="Text.XML.Stream.Parse.html#parseBytes"><span class="hs-identifier hs-var">parseBytes</span></a></span><span> </span><span class="annot"><span class="annottext">ParseSettings
</span><a href="#local-6989586621679093236"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1007"></span><span>
</span><span id="line-1008"></span><span class="hs-keyword">data</span><span> </span><span id="XmlException"><span class="annot"><a href="Text.XML.Stream.Parse.html#XmlException"><span class="hs-identifier hs-var">XmlException</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="XmlException"><span class="annot"><a href="Text.XML.Stream.Parse.html#XmlException"><span class="hs-identifier hs-var">XmlException</span></a></span></span><span>
</span><span id="line-1009"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="xmlErrorMessage"><span class="annot"><span class="annottext">XmlException -&gt; String
</span><a href="Text.XML.Stream.Parse.html#xmlErrorMessage"><span class="hs-identifier hs-var hs-var">xmlErrorMessage</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-1010"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="xmlBadInput"><span class="annot"><span class="annottext">XmlException -&gt; Maybe Event
</span><a href="Text.XML.Stream.Parse.html#xmlBadInput"><span class="hs-identifier hs-var hs-var">xmlBadInput</span></a></span></span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span>
</span><span id="line-1011"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1012"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="InvalidEndElement"><span class="annot"><a href="Text.XML.Stream.Parse.html#InvalidEndElement"><span class="hs-identifier hs-var">InvalidEndElement</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span class="hs-special">)</span><span>
</span><span id="line-1013"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="InvalidEntity"><span class="annot"><a href="Text.XML.Stream.Parse.html#InvalidEntity"><span class="hs-identifier hs-var">InvalidEntity</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span class="hs-special">)</span><span>
</span><span id="line-1014"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="MissingAttribute"><span class="annot"><a href="Text.XML.Stream.Parse.html#MissingAttribute"><span class="hs-identifier hs-var">MissingAttribute</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-1015"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span id="UnparsedAttributes"><span class="annot"><a href="Text.XML.Stream.Parse.html#UnparsedAttributes"><span class="hs-identifier hs-var">UnparsedAttributes</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Content</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1016"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679093225"><span id="local-6989586621679093227"><span id="local-6989586621679093229"><span class="annot"><span class="annottext">Int -&gt; XmlException -&gt; String -&gt; String
[XmlException] -&gt; String -&gt; String
XmlException -&gt; String
(Int -&gt; XmlException -&gt; String -&gt; String)
-&gt; (XmlException -&gt; String)
-&gt; ([XmlException] -&gt; String -&gt; String)
-&gt; Show XmlException
forall a.
(Int -&gt; a -&gt; String -&gt; String)
-&gt; (a -&gt; String) -&gt; ([a] -&gt; String -&gt; String) -&gt; Show a
showList :: [XmlException] -&gt; String -&gt; String
$cshowList :: [XmlException] -&gt; String -&gt; String
show :: XmlException -&gt; String
$cshow :: XmlException -&gt; String
showsPrec :: Int -&gt; XmlException -&gt; String -&gt; String
$cshowsPrec :: Int -&gt; XmlException -&gt; String -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">)</span><span>
</span><span id="line-1017"></span><span>
</span><span id="line-1018"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679093218"><span id="local-6989586621679093220"><span class="annot"><span class="hs-identifier hs-type">Exception</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#XmlException"><span class="hs-identifier hs-type">XmlException</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span class="hs-cpp">
#if MIN_VERSION_base(4, 8, 0)
</span><span>  </span><span id="local-6989586621679093215"><span class="annot"><span class="annottext">displayException :: XmlException -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">displayException</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Parse.html#XmlException"><span class="hs-identifier hs-type">XmlException</span></a></span><span> </span><span id="local-6989586621679093213"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093213"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093212"><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093212"><span class="hs-identifier hs-var">event</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error while parsing XML event &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Event -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093212"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093213"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1021"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Parse.html#XmlException"><span class="hs-identifier hs-type">XmlException</span></a></span><span> </span><span id="local-6989586621679093211"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093211"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error while parsing XML: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093211"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1022"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Parse.html#InvalidEndElement"><span class="hs-identifier hs-type">InvalidEndElement</span></a></span><span> </span><span id="local-6989586621679093210"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093210"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093209"><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093209"><span class="hs-identifier hs-var">event</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error while parsing XML event: expected &lt;/&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Text
</span><span class="hs-identifier hs-var hs-var">nameLocalName</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093210"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&gt;, got &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Event -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093209"><span class="hs-identifier hs-var">event</span></a></span><span>
</span><span id="line-1023"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Parse.html#InvalidEndElement"><span class="hs-identifier hs-type">InvalidEndElement</span></a></span><span> </span><span id="local-6989586621679093206"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093206"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error while parsing XML event: expected &lt;/&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093206"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&gt;, got nothing&quot;</span></span><span>
</span><span id="line-1024"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Parse.html#InvalidEntity"><span class="hs-identifier hs-type">InvalidEntity</span></a></span><span> </span><span id="local-6989586621679093205"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093205"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093204"><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093204"><span class="hs-identifier hs-var">event</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error while parsing XML entity &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Event -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093204"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093205"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1025"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Parse.html#InvalidEntity"><span class="hs-identifier hs-type">InvalidEntity</span></a></span><span> </span><span id="local-6989586621679093203"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093203"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Error while parsing XML entity: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093203"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1026"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Parse.html#MissingAttribute"><span class="hs-identifier hs-type">MissingAttribute</span></a></span><span> </span><span id="local-6989586621679093202"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093202"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Missing required attribute: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093202"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-1027"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">displayException</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Parse.html#UnparsedAttributes"><span class="hs-identifier hs-type">UnparsedAttributes</span></a></span><span> </span><span id="local-6989586621679093201"><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093201"><span class="hs-identifier hs-var">attrs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Name, [Content])] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093201"><span class="hs-identifier hs-var">attrs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; remaining unparsed attributes: \n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name, [Content]) -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">((Name, [Content]) -&gt; String) -&gt; [(Name, [Content])] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093201"><span class="hs-identifier hs-var">attrs</span></a></span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span>
</span><span id="line-1030"></span><span>
</span><span id="line-1031"></span><span class="hs-comment">-- | A @NameMatcher@ describes which names a tag parser is allowed to match.</span><span>
</span><span id="line-1032"></span><span class="hs-comment">--</span><span>
</span><span id="line-1033"></span><span class="hs-comment">-- Since 1.5.0</span><span>
</span><span id="line-1034"></span><span class="hs-keyword">newtype</span><span> </span><span id="NameMatcher"><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-var">NameMatcher</span></a></span></span><span> </span><span id="local-6989586621679093991"><span class="annot"><a href="#local-6989586621679093991"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NameMatcher"><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-var">NameMatcher</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="runNameMatcher"><span class="annot"><span class="annottext">NameMatcher a -&gt; Name -&gt; Maybe a
</span><a href="Text.XML.Stream.Parse.html#runNameMatcher"><span class="hs-identifier hs-var hs-var">runNameMatcher</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093991"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1035"></span><span>
</span><span id="line-1036"></span><span id="local-6989586621679093195"><span id="local-6989586621679093197"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span></span></span><span>
</span><span id="line-1037"></span><span>
</span><span id="line-1038"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679093185"><span id="local-6989586621679093187"><span id="local-6989586621679093189"><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1039"></span><span>  </span><span id="local-6989586621679093183"><span class="annot"><span class="annottext">pure :: a -&gt; NameMatcher a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></span></span><span> </span><span id="local-6989586621679093182"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679093182"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Maybe a) -&gt; NameMatcher a
forall a. (Name -&gt; Maybe a) -&gt; NameMatcher a
</span><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-var">NameMatcher</span></a></span><span> </span><span class="annot"><span class="annottext">((Name -&gt; Maybe a) -&gt; NameMatcher a)
-&gt; (Name -&gt; Maybe a) -&gt; NameMatcher a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; Name -&gt; Maybe a
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; Name -&gt; Maybe a) -&gt; Maybe a -&gt; Name -&gt; Maybe a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679093182"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-1040"></span><span>  </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span id="local-6989586621679093181"><span class="annot"><span class="annottext">Name -&gt; Maybe (a -&gt; b)
</span><a href="#local-6989586621679093181"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679093180"><span class="annot"><span class="annottext">&lt;*&gt; :: NameMatcher (a -&gt; b) -&gt; NameMatcher a -&gt; NameMatcher b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;*&gt;</span></span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span id="local-6989586621679093179"><span class="annot"><span class="annottext">Name -&gt; Maybe a
</span><a href="#local-6989586621679093179"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Maybe b) -&gt; NameMatcher b
forall a. (Name -&gt; Maybe a) -&gt; NameMatcher a
</span><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-var">NameMatcher</span></a></span><span> </span><span class="annot"><span class="annottext">((Name -&gt; Maybe b) -&gt; NameMatcher b)
-&gt; (Name -&gt; Maybe b) -&gt; NameMatcher b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679093178"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093178"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe (a -&gt; b)
</span><a href="#local-6989586621679093181"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093178"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe a
</span><a href="#local-6989586621679093179"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093178"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-1041"></span><span>
</span><span id="line-1042"></span><span class="hs-comment">-- | 'NameMatcher's can be combined with @\&lt;|\&gt;@</span><span>
</span><span id="line-1043"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679093171"><span id="local-6989586621679093173"><span class="annot"><span class="hs-identifier hs-type">Alternative</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1044"></span><span>  </span><span id="local-6989586621679093169"><span class="annot"><span class="annottext">empty :: NameMatcher a
</span><a href="#local-6989586621679093169"><span class="hs-identifier hs-var hs-var hs-var hs-var">empty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Maybe a) -&gt; NameMatcher a
forall a. (Name -&gt; Maybe a) -&gt; NameMatcher a
</span><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-var">NameMatcher</span></a></span><span> </span><span class="annot"><span class="annottext">((Name -&gt; Maybe a) -&gt; NameMatcher a)
-&gt; (Name -&gt; Maybe a) -&gt; NameMatcher a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; Name -&gt; Maybe a
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1045"></span><span>  </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span id="local-6989586621679093168"><span class="annot"><span class="annottext">Name -&gt; Maybe a
</span><a href="#local-6989586621679093168"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679093167"><span class="annot"><span class="annottext">&lt;|&gt; :: NameMatcher a -&gt; NameMatcher a -&gt; NameMatcher a
</span><a href="#local-6989586621679093167"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;|&gt;</span></a></span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span id="local-6989586621679093166"><span class="annot"><span class="annottext">Name -&gt; Maybe a
</span><a href="#local-6989586621679093166"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Maybe a) -&gt; NameMatcher a
forall a. (Name -&gt; Maybe a) -&gt; NameMatcher a
</span><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-var">NameMatcher</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679093165"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093165"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe a
</span><a href="#local-6989586621679093168"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093165"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; Maybe a -&gt; Maybe a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe a
</span><a href="#local-6989586621679093166"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093165"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1046"></span><span>
</span><span id="line-1047"></span><span class="hs-comment">-- | Match a single 'Name' in a concise way.</span><span>
</span><span id="line-1048"></span><span class="hs-comment">-- Note that 'Name' is namespace sensitive: when using the 'IsString' instance,</span><span>
</span><span id="line-1049"></span><span class="hs-comment">-- use @&quot;{http:\/\/a\/b}c&quot;@ to match the tag @c@ in the XML namespace @http://a/b@</span><span>
</span><span id="line-1050"></span><span id="local-6989586621679093164"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679093164"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><span class="hs-glyph hs-type">~</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093164"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1051"></span><span>  </span><span id="local-6989586621679093161"><span class="annot"><span class="annottext">fromString :: String -&gt; NameMatcher a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromString</span></span></span><span> </span><span id="local-6989586621679093160"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093160"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; NameMatcher Name
</span><a href="Text.XML.Stream.Parse.html#matching"><span class="hs-identifier hs-var">matching</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Name
forall a. IsString a =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">fromString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093160"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1052"></span><span>
</span><span id="line-1053"></span><span class="hs-comment">-- | @matching f@ matches @name@ iff @f name@ is true. Returns the matched 'Name'.</span><span>
</span><span id="line-1054"></span><span class="hs-comment">--</span><span>
</span><span id="line-1055"></span><span class="hs-comment">-- Since 1.5.0</span><span>
</span><span id="line-1056"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#matching"><span class="hs-identifier hs-type">matching</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1057"></span><span id="matching"><span class="annot"><span class="annottext">matching :: (Name -&gt; Bool) -&gt; NameMatcher Name
</span><a href="Text.XML.Stream.Parse.html#matching"><span class="hs-identifier hs-var hs-var">matching</span></a></span></span><span> </span><span id="local-6989586621679093159"><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="#local-6989586621679093159"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Maybe Name) -&gt; NameMatcher Name
forall a. (Name -&gt; Maybe a) -&gt; NameMatcher a
</span><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-var">NameMatcher</span></a></span><span> </span><span class="annot"><span class="annottext">((Name -&gt; Maybe Name) -&gt; NameMatcher Name)
-&gt; (Name -&gt; Maybe Name) -&gt; NameMatcher Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679093158"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093158"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="#local-6989586621679093159"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093158"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Name
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093158"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe Name
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1058"></span><span>
</span><span id="line-1059"></span><span class="hs-comment">-- | Matches any 'Name'. Returns the matched 'Name'.</span><span>
</span><span id="line-1060"></span><span class="hs-comment">--</span><span>
</span><span id="line-1061"></span><span class="hs-comment">-- Since 1.5.0</span><span>
</span><span id="line-1062"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#anyName"><span class="hs-identifier hs-type">anyName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1063"></span><span id="anyName"><span class="annot"><span class="annottext">anyName :: NameMatcher Name
</span><a href="Text.XML.Stream.Parse.html#anyName"><span class="hs-identifier hs-var hs-var">anyName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; NameMatcher Name
</span><a href="Text.XML.Stream.Parse.html#matching"><span class="hs-identifier hs-var">matching</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Name -&gt; Bool
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-1064"></span><span>
</span><span id="line-1065"></span><span class="hs-comment">-- | Matches any 'Name' from the given list. Returns the matched 'Name'.</span><span>
</span><span id="line-1066"></span><span class="hs-comment">--</span><span>
</span><span id="line-1067"></span><span class="hs-comment">-- Since 1.5.0</span><span>
</span><span id="line-1068"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#anyOf"><span class="hs-identifier hs-type">anyOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-1069"></span><span id="anyOf"><span class="annot"><span class="annottext">anyOf :: [Name] -&gt; NameMatcher Name
</span><a href="Text.XML.Stream.Parse.html#anyOf"><span class="hs-identifier hs-var hs-var">anyOf</span></a></span></span><span> </span><span id="local-6989586621679093157"><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679093157"><span class="hs-identifier hs-var">values</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool) -&gt; NameMatcher Name
</span><a href="Text.XML.Stream.Parse.html#matching"><span class="hs-identifier hs-var">matching</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; [Name] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[Name]
</span><a href="#local-6989586621679093157"><span class="hs-identifier hs-var">values</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1070"></span><span>
</span><span id="line-1071"></span><span>
</span><span id="line-1072"></span><span class="hs-comment">-- | A monad for parsing attributes. By default, it requires you to deal with</span><span>
</span><span id="line-1073"></span><span class="hs-comment">-- all attributes present on an element, and will throw an exception if there</span><span>
</span><span id="line-1074"></span><span class="hs-comment">-- are unhandled attributes. Use the 'requireAttr', 'attr' et al</span><span>
</span><span id="line-1075"></span><span class="hs-comment">-- functions for handling an attribute, and 'ignoreAttrs' if you would like to</span><span>
</span><span id="line-1076"></span><span class="hs-comment">-- skip the rest of the attributes on an element.</span><span>
</span><span id="line-1077"></span><span class="hs-comment">--</span><span>
</span><span id="line-1078"></span><span class="hs-comment">-- 'Alternative' instance behaves like 'First' monoid: it chooses first</span><span>
</span><span id="line-1079"></span><span class="hs-comment">-- parser which doesn't fail.</span><span>
</span><span id="line-1080"></span><span class="hs-keyword">newtype</span><span> </span><span id="AttrParser"><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-var">AttrParser</span></a></span></span><span> </span><span id="local-6989586621679093988"><span class="annot"><a href="#local-6989586621679093988"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="AttrParser"><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-var">AttrParser</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="runAttrParser"><span class="annot"><span class="annottext">AttrParser a
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], a)
</span><a href="Text.XML.Stream.Parse.html#runAttrParser"><span class="hs-identifier hs-var hs-var">runAttrParser</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Content</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Content</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679093988"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1081"></span><span>
</span><span id="line-1082"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679093151"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1083"></span><span>    </span><span id="local-6989586621679093148"><span class="annot"><span class="annottext">return :: a -&gt; AttrParser a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">return</span></span></span><span> </span><span id="local-6989586621679093147"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679093147"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
forall a.
([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
</span><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-var">AttrParser</span></a></span><span> </span><span class="annot"><span class="annottext">(([(Name, [Content])]
  -&gt; Either SomeException ([(Name, [Content])], a))
 -&gt; AttrParser a)
-&gt; ([(Name, [Content])]
    -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679093146"><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093146"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])], a)
-&gt; Either SomeException ([(Name, [Content])], a)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093146"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679093147"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1084"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span id="local-6989586621679093145"><span class="annot"><span class="annottext">[(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], a)
</span><a href="#local-6989586621679093145"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679093144"><span class="annot"><span class="annottext">&gt;&gt;= :: AttrParser a -&gt; (a -&gt; AttrParser b) -&gt; AttrParser b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&gt;&gt;=</span></span></span><span> </span><span id="local-6989586621679093143"><span class="annot"><span class="annottext">a -&gt; AttrParser b
</span><a href="#local-6989586621679093143"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], b))
-&gt; AttrParser b
forall a.
([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
</span><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-var">AttrParser</span></a></span><span> </span><span class="annot"><span class="annottext">(([(Name, [Content])]
  -&gt; Either SomeException ([(Name, [Content])], b))
 -&gt; AttrParser b)
-&gt; ([(Name, [Content])]
    -&gt; Either SomeException ([(Name, [Content])], b))
-&gt; AttrParser b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679093142"><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093142"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1085"></span><span>        </span><span class="annot"><span class="annottext">(SomeException -&gt; Either SomeException ([(Name, [Content])], b))
-&gt; (([(Name, [Content])], a)
    -&gt; Either SomeException ([(Name, [Content])], b))
-&gt; Either SomeException ([(Name, [Content])], a)
-&gt; Either SomeException ([(Name, [Content])], b)
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Either SomeException ([(Name, [Content])], b)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679093141"><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093141"><span class="hs-identifier hs-var">as'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093140"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679093140"><span class="hs-identifier hs-var">f'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">AttrParser b
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], b)
forall a.
AttrParser a
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], a)
</span><a href="Text.XML.Stream.Parse.html#runAttrParser"><span class="hs-identifier hs-var hs-var">runAttrParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; AttrParser b
</span><a href="#local-6989586621679093143"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679093140"><span class="hs-identifier hs-var">f'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093141"><span class="hs-identifier hs-var">as'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], a)
</span><a href="#local-6989586621679093145"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093142"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1086"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679093137"><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1087"></span><span>    </span><span id="local-6989586621679093136"><span class="annot"><span class="annottext">fmap :: (a -&gt; b) -&gt; AttrParser a -&gt; AttrParser b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fmap</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; AttrParser a -&gt; AttrParser b
forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><span class="hs-identifier hs-var">liftM</span></span><span>
</span><span id="line-1088"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679093127"><span id="local-6989586621679093129"><span id="local-6989586621679093131"><span class="annot"><span class="hs-identifier hs-type">Applicative</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1089"></span><span>    </span><span id="local-6989586621679093126"><span class="annot"><span class="annottext">pure :: a -&gt; AttrParser a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">pure</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; AttrParser a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-1090"></span><span>    </span><span id="local-6989586621679093125"><span class="annot"><span class="annottext">&lt;*&gt; :: AttrParser (a -&gt; b) -&gt; AttrParser a -&gt; AttrParser b
</span><span class="hs-operator hs-var hs-var hs-var hs-var">(&lt;*&gt;)</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AttrParser (a -&gt; b) -&gt; AttrParser a -&gt; AttrParser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m (a -&gt; b) -&gt; m a -&gt; m b
</span><span class="hs-identifier hs-var">ap</span></span><span>
</span><span id="line-1091"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679093118"><span id="local-6989586621679093120"><span class="annot"><span class="hs-identifier hs-type">Alternative</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1092"></span><span>    </span><span id="local-6989586621679093117"><span class="annot"><span class="annottext">empty :: AttrParser a
</span><a href="#local-6989586621679093117"><span class="hs-identifier hs-var hs-var hs-var hs-var">empty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
forall a.
([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
</span><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-var">AttrParser</span></a></span><span> </span><span class="annot"><span class="annottext">(([(Name, [Content])]
  -&gt; Either SomeException ([(Name, [Content])], a))
 -&gt; AttrParser a)
-&gt; ([(Name, [Content])]
    -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Either SomeException ([(Name, [Content])], a)
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], a)
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(Either SomeException ([(Name, [Content])], a)
 -&gt; [(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; Either SomeException ([(Name, [Content])], a)
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Either SomeException ([(Name, [Content])], a)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; SomeException -&gt; Either SomeException ([(Name, [Content])], a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XmlException -&gt; SomeException
forall e. Exception e =&gt; e -&gt; SomeException
</span><span class="hs-identifier hs-var">toException</span></span><span> </span><span class="annot"><span class="annottext">(XmlException -&gt; SomeException) -&gt; XmlException -&gt; SomeException
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe Event -&gt; XmlException
</span><a href="Text.XML.Stream.Parse.html#XmlException"><span class="hs-identifier hs-var">XmlException</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;AttrParser.empty&quot;</span></span><span> </span><span class="annot"><span class="annottext">Maybe Event
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1093"></span><span>    </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span id="local-6989586621679093116"><span class="annot"><span class="annottext">[(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], a)
</span><a href="#local-6989586621679093116"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679093115"><span class="annot"><span class="annottext">&lt;|&gt; :: AttrParser a -&gt; AttrParser a -&gt; AttrParser a
</span><a href="#local-6989586621679093115"><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;|&gt;</span></a></span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span id="local-6989586621679093114"><span class="annot"><span class="annottext">[(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], a)
</span><a href="#local-6989586621679093114"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
forall a.
([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
</span><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-var">AttrParser</span></a></span><span> </span><span class="annot"><span class="annottext">(([(Name, [Content])]
  -&gt; Either SomeException ([(Name, [Content])], a))
 -&gt; AttrParser a)
-&gt; ([(Name, [Content])]
    -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679093113"><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093113"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1094"></span><span>        </span><span class="annot"><span class="annottext">(SomeException -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; (([(Name, [Content])], a)
    -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; Either SomeException ([(Name, [Content])], a)
-&gt; Either SomeException ([(Name, [Content])], a)
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Either SomeException ([(Name, [Content])], a)
-&gt; SomeException -&gt; Either SomeException ([(Name, [Content])], a)
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(Either SomeException ([(Name, [Content])], a)
 -&gt; SomeException -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; Either SomeException ([(Name, [Content])], a)
-&gt; SomeException
-&gt; Either SomeException ([(Name, [Content])], a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], a)
</span><a href="#local-6989586621679093114"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093113"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])], a)
-&gt; Either SomeException ([(Name, [Content])], a)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], a)
</span><a href="#local-6989586621679093116"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093113"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1095"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1096"></span><span>    </span><span id="local-6989586621679093109"><span class="annot"><span class="annottext">throwM :: e -&gt; AttrParser a
</span><a href="#local-6989586621679093109"><span class="hs-identifier hs-var hs-var hs-var hs-var">throwM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
forall a.
([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
</span><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-var">AttrParser</span></a></span><span> </span><span class="annot"><span class="annottext">(([(Name, [Content])]
  -&gt; Either SomeException ([(Name, [Content])], a))
 -&gt; AttrParser a)
-&gt; (e
    -&gt; [(Name, [Content])]
    -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; e
-&gt; AttrParser a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Either SomeException ([(Name, [Content])], a)
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], a)
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(Either SomeException ([(Name, [Content])], a)
 -&gt; [(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; (e -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; e
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; Either SomeException ([(Name, [Content])], a)
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span>
</span><span id="line-1097"></span><span>
</span><span id="line-1098"></span><span id="local-6989586621679093828"><span class="annot"><a href="Text.XML.Stream.Parse.html#optionalAttrRaw"><span class="hs-identifier hs-type">optionalAttrRaw</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Content</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093828"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093828"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1099"></span><span id="optionalAttrRaw"><span class="annot"><span class="annottext">optionalAttrRaw :: ((Name, [Content]) -&gt; Maybe b) -&gt; AttrParser (Maybe b)
</span><a href="Text.XML.Stream.Parse.html#optionalAttrRaw"><span class="hs-identifier hs-var hs-var">optionalAttrRaw</span></a></span></span><span> </span><span id="local-6989586621679093108"><span class="annot"><span class="annottext">(Name, [Content]) -&gt; Maybe b
</span><a href="#local-6989586621679093108"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1100"></span><span>    </span><span class="annot"><span class="annottext">([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], Maybe b))
-&gt; AttrParser (Maybe b)
forall a.
([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
</span><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-var">AttrParser</span></a></span><span> </span><span class="annot"><span class="annottext">(([(Name, [Content])]
  -&gt; Either SomeException ([(Name, [Content])], Maybe b))
 -&gt; AttrParser (Maybe b))
-&gt; ([(Name, [Content])]
    -&gt; Either SomeException ([(Name, [Content])], Maybe b))
-&gt; AttrParser (Maybe b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])] -&gt; [(Name, [Content])])
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], Maybe b)
</span><a href="#local-6989586621679093107"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])] -&gt; [(Name, [Content])]
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-1101"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1102"></span><span>    </span><span id="local-6989586621679093107"><span class="annot"><span class="annottext">go :: ([(Name, [Content])] -&gt; [(Name, [Content])])
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], Maybe b)
</span><a href="#local-6989586621679093107"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679093106"><span class="annot"><span class="annottext">[(Name, [Content])] -&gt; [(Name, [Content])]
</span><a href="#local-6989586621679093106"><span class="hs-identifier hs-var">front</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])], Maybe b)
-&gt; Either SomeException ([(Name, [Content])], Maybe b)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Name, [Content])] -&gt; [(Name, [Content])]
</span><a href="#local-6989586621679093106"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe b
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-1103"></span><span>    </span><span class="annot"><a href="#local-6989586621679093107"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679093105"><span class="annot"><span class="annottext">[(Name, [Content])] -&gt; [(Name, [Content])]
</span><a href="#local-6989586621679093105"><span class="hs-identifier hs-var">front</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679093104"><span class="annot"><span class="annottext">(Name, [Content])
</span><a href="#local-6989586621679093104"><span class="hs-identifier hs-var">a</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679093103"><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093103"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1104"></span><span>        </span><span class="annot"><span class="annottext">Either SomeException ([(Name, [Content])], Maybe b)
-&gt; (b -&gt; Either SomeException ([(Name, [Content])], Maybe b))
-&gt; Maybe b
-&gt; Either SomeException ([(Name, [Content])], Maybe b)
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([(Name, [Content])] -&gt; [(Name, [Content])])
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], Maybe b)
</span><a href="#local-6989586621679093107"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Name, [Content])] -&gt; [(Name, [Content])]
</span><a href="#local-6989586621679093105"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])] -&gt; [(Name, [Content])])
-&gt; ([(Name, [Content])] -&gt; [(Name, [Content])])
-&gt; [(Name, [Content])]
-&gt; [(Name, [Content])]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">:</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Name, [Content])
</span><a href="#local-6989586621679093104"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093103"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1105"></span><span>              </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679093102"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679093102"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])], Maybe b)
-&gt; Either SomeException ([(Name, [Content])], Maybe b)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Name, [Content])] -&gt; [(Name, [Content])]
</span><a href="#local-6989586621679093105"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093103"><span class="hs-keyword hs-var">as</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b -&gt; Maybe b
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679093102"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1106"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name, [Content]) -&gt; Maybe b
</span><a href="#local-6989586621679093108"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Name, [Content])
</span><a href="#local-6989586621679093104"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1107"></span><span>
</span><span id="line-1108"></span><span id="local-6989586621679093101"><span class="annot"><a href="Text.XML.Stream.Parse.html#requireAttrRaw"><span class="hs-identifier hs-type">requireAttrRaw</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Content</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093101"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093101"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-1109"></span><span id="requireAttrRaw"><span class="annot"><span class="annottext">requireAttrRaw :: String -&gt; ((Name, [Content]) -&gt; Maybe b) -&gt; AttrParser b
</span><a href="Text.XML.Stream.Parse.html#requireAttrRaw"><span class="hs-identifier hs-var hs-var">requireAttrRaw</span></a></span></span><span> </span><span id="local-6989586621679093100"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093100"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679093099"><span class="annot"><span class="annottext">(Name, [Content]) -&gt; Maybe b
</span><a href="#local-6989586621679093099"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Name, [Content]) -&gt; Maybe b) -&gt; AttrParser (Maybe b)
forall b. ((Name, [Content]) -&gt; Maybe b) -&gt; AttrParser (Maybe b)
</span><a href="Text.XML.Stream.Parse.html#optionalAttrRaw"><span class="hs-identifier hs-var">optionalAttrRaw</span></a></span><span> </span><span class="annot"><span class="annottext">(Name, [Content]) -&gt; Maybe b
</span><a href="#local-6989586621679093099"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">AttrParser (Maybe b) -&gt; (Maybe b -&gt; AttrParser b) -&gt; AttrParser b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span>
</span><span id="line-1110"></span><span>    </span><span class="annot"><span class="annottext">AttrParser b -&gt; (b -&gt; AttrParser b) -&gt; Maybe b -&gt; AttrParser b
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], b))
-&gt; AttrParser b
forall a.
([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
</span><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-var">AttrParser</span></a></span><span> </span><span class="annot"><span class="annottext">(([(Name, [Content])]
  -&gt; Either SomeException ([(Name, [Content])], b))
 -&gt; AttrParser b)
-&gt; ([(Name, [Content])]
    -&gt; Either SomeException ([(Name, [Content])], b))
-&gt; AttrParser b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Either SomeException ([(Name, [Content])], b)
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], b)
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(Either SomeException ([(Name, [Content])], b)
 -&gt; [(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], b))
-&gt; Either SomeException ([(Name, [Content])], b)
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Either SomeException ([(Name, [Content])], b)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; Either SomeException ([(Name, [Content])], b))
-&gt; SomeException -&gt; Either SomeException ([(Name, [Content])], b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XmlException -&gt; SomeException
forall e. Exception e =&gt; e -&gt; SomeException
</span><span class="hs-identifier hs-var">toException</span></span><span> </span><span class="annot"><span class="annottext">(XmlException -&gt; SomeException) -&gt; XmlException -&gt; SomeException
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; XmlException
</span><a href="Text.XML.Stream.Parse.html#MissingAttribute"><span class="hs-identifier hs-var">MissingAttribute</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679093100"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1111"></span><span>          </span><span class="annot"><span class="annottext">b -&gt; AttrParser b
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-1112"></span><span>
</span><span id="line-1113"></span><span class="hs-comment">-- | Return the value for an attribute if present.</span><span>
</span><span id="line-1114"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#attr"><span class="hs-identifier hs-type">attr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-1115"></span><span id="attr"><span class="annot"><span class="annottext">attr :: Name -&gt; AttrParser (Maybe Text)
</span><a href="Text.XML.Stream.Parse.html#attr"><span class="hs-identifier hs-var hs-var">attr</span></a></span></span><span> </span><span id="local-6989586621679093098"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093098"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Name, [Content]) -&gt; Maybe Text) -&gt; AttrParser (Maybe Text)
forall b. ((Name, [Content]) -&gt; Maybe b) -&gt; AttrParser (Maybe b)
</span><a href="Text.XML.Stream.Parse.html#optionalAttrRaw"><span class="hs-identifier hs-var">optionalAttrRaw</span></a></span><span>
</span><span id="line-1116"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679093097"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093097"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679093096"><span class="annot"><span class="annottext">[Content]
</span><a href="#local-6989586621679093096"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093097"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093098"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Content] -&gt; Text
</span><a href="Text.XML.Stream.Parse.html#contentsToText"><span class="hs-identifier hs-var">contentsToText</span></a></span><span> </span><span class="annot"><span class="annottext">[Content]
</span><a href="#local-6989586621679093096"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-1117"></span><span>
</span><span id="line-1118"></span><span class="hs-comment">-- | Shortcut composition of 'force' and 'attr'.</span><span>
</span><span id="line-1119"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#requireAttr"><span class="hs-identifier hs-type">requireAttr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1120"></span><span id="requireAttr"><span class="annot"><span class="annottext">requireAttr :: Name -&gt; AttrParser Text
</span><a href="Text.XML.Stream.Parse.html#requireAttr"><span class="hs-identifier hs-var hs-var">requireAttr</span></a></span></span><span> </span><span id="local-6989586621679093095"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093095"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; AttrParser (Maybe Text) -&gt; AttrParser Text
forall (m :: * -&gt; *) a.
MonadThrow m =&gt;
String -&gt; m (Maybe a) -&gt; m a
</span><a href="Text.XML.Stream.Parse.html#force"><span class="hs-identifier hs-var">force</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Missing attribute: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093095"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(AttrParser (Maybe Text) -&gt; AttrParser Text)
-&gt; AttrParser (Maybe Text) -&gt; AttrParser Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; AttrParser (Maybe Text)
</span><a href="Text.XML.Stream.Parse.html#attr"><span class="hs-identifier hs-var">attr</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093095"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1121"></span><span>
</span><span id="line-1122"></span><span>
</span><span id="line-1123"></span><span class="hs-pragma">{-# DEPRECATED</span><span> </span><span class="hs-pragma">optionalAttr</span><span> </span><span class="hs-pragma">&quot;Please use 'attr'.&quot;</span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-1124"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#optionalAttr"><span class="hs-identifier hs-type">optionalAttr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-1125"></span><span id="optionalAttr"><span class="annot"><span class="annottext">optionalAttr :: Name -&gt; AttrParser (Maybe Text)
</span><a href="Text.XML.Stream.Parse.html#optionalAttr"><span class="hs-identifier hs-var hs-var">optionalAttr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; AttrParser (Maybe Text)
</span><a href="Text.XML.Stream.Parse.html#attr"><span class="hs-identifier hs-var">attr</span></a></span><span>
</span><span id="line-1126"></span><span>
</span><span id="line-1127"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#contentsToText"><span class="hs-identifier hs-type">contentsToText</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Content</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1128"></span><span id="contentsToText"><span class="annot"><span class="annottext">contentsToText :: [Content] -&gt; Text
</span><a href="Text.XML.Stream.Parse.html#contentsToText"><span class="hs-identifier hs-var hs-var">contentsToText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.concat</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; ([Content] -&gt; [Text]) -&gt; [Content] -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Content -&gt; Text) -&gt; [Content] -&gt; [Text]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Content -&gt; Text
</span><a href="#local-6989586621679093094"><span class="hs-identifier hs-var">toText</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1129"></span><span>  </span><span id="local-6989586621679093094"><span class="annot"><span class="annottext">toText :: Content -&gt; Text
</span><a href="#local-6989586621679093094"><span class="hs-identifier hs-var hs-var">toText</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ContentText</span></span><span> </span><span id="local-6989586621679093093"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093093"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093093"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1130"></span><span>  </span><span class="annot"><a href="#local-6989586621679093094"><span class="hs-identifier hs-var">toText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ContentEntity</span></span><span> </span><span id="local-6989586621679093092"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093092"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.concat</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;&amp;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093092"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;;&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-1131"></span><span>
</span><span id="line-1132"></span><span class="hs-comment">-- | Skip the remaining attributes on an element. Since this will clear the</span><span>
</span><span id="line-1133"></span><span class="hs-comment">-- list of attributes, you must call this /after/ any calls to 'requireAttr',</span><span>
</span><span id="line-1134"></span><span class="hs-comment">-- 'optionalAttr', etc.</span><span>
</span><span id="line-1135"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#ignoreAttrs"><span class="hs-identifier hs-type">ignoreAttrs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-1136"></span><span id="ignoreAttrs"><span class="annot"><span class="annottext">ignoreAttrs :: AttrParser ()
</span><a href="Text.XML.Stream.Parse.html#ignoreAttrs"><span class="hs-identifier hs-var hs-var">ignoreAttrs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], ()))
-&gt; AttrParser ()
forall a.
([(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], a))
-&gt; AttrParser a
</span><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-var">AttrParser</span></a></span><span> </span><span class="annot"><span class="annottext">(([(Name, [Content])]
  -&gt; Either SomeException ([(Name, [Content])], ()))
 -&gt; AttrParser ())
-&gt; ([(Name, [Content])]
    -&gt; Either SomeException ([(Name, [Content])], ()))
-&gt; AttrParser ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Either SomeException ([(Name, [Content])], ())
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], ())
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(Either SomeException ([(Name, [Content])], ())
 -&gt; [(Name, [Content])]
 -&gt; Either SomeException ([(Name, [Content])], ()))
-&gt; Either SomeException ([(Name, [Content])], ())
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])], ())
-&gt; Either SomeException ([(Name, [Content])], ())
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1137"></span><span>
</span><span id="line-1138"></span><span class="hs-comment">-- | Keep parsing elements as long as the parser returns 'Just'.</span><span>
</span><span id="line-1139"></span><span id="local-6989586621679093089"><span id="local-6989586621679093090"><span id="local-6989586621679093091"><span class="annot"><a href="Text.XML.Stream.Parse.html#many"><span class="hs-identifier hs-type">many</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679093091"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-1140"></span><span>     </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093090"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093091"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093089"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1141"></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093090"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093091"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679093089"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-1142"></span><span id="many"><span class="annot"><span class="annottext">many :: ConduitT Event o m (Maybe a) -&gt; ConduitT Event o m [a]
</span><a href="Text.XML.Stream.Parse.html#many"><span class="hs-identifier hs-var hs-var">many</span></a></span></span><span> </span><span id="local-6989586621679093088"><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
</span><a href="#local-6989586621679093088"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
-&gt; ConduitT Event o m (Maybe Any) -&gt; ConduitT Event o m [a]
forall (m :: * -&gt; *) o a b.
Monad m =&gt;
ConduitT Event o m (Maybe a)
-&gt; ConduitT Event o m (Maybe b) -&gt; ConduitT Event o m [a]
</span><a href="Text.XML.Stream.Parse.html#manyIgnore"><span class="hs-identifier hs-var">manyIgnore</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
</span><a href="#local-6989586621679093088"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(ConduitT Event o m (Maybe Any) -&gt; ConduitT Event o m [a])
-&gt; ConduitT Event o m (Maybe Any) -&gt; ConduitT Event o m [a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe Any -&gt; ConduitT Event o m (Maybe Any)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe Any
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1143"></span><span>
</span><span id="line-1144"></span><span class="hs-comment">-- | Like 'many' but discards the results without building an intermediate list.</span><span>
</span><span id="line-1145"></span><span class="hs-comment">--</span><span>
</span><span id="line-1146"></span><span class="hs-comment">-- Since 1.5.0</span><span>
</span><span id="line-1147"></span><span id="local-6989586621679093085"><span id="local-6989586621679093086"><span id="local-6989586621679093087"><span class="annot"><a href="Text.XML.Stream.Parse.html#many_"><span class="hs-identifier hs-type">many_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093087"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-1148"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093086"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093087"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093085"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1149"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093086"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093087"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1150"></span><span id="many_"><span class="annot"><span class="annottext">many_ :: ConduitT Event o m (Maybe a) -&gt; ConduitT Event o m ()
</span><a href="Text.XML.Stream.Parse.html#many_"><span class="hs-identifier hs-var hs-var">many_</span></a></span></span><span> </span><span id="local-6989586621679093084"><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
</span><a href="#local-6989586621679093084"><span class="hs-identifier hs-var">consumer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe o)
-&gt; ConduitT Event o m (Maybe ()) -&gt; ConduitT Event o m ()
forall (m :: * -&gt; *) b.
MonadThrow m =&gt;
ConduitT Event b m (Maybe b)
-&gt; ConduitT Event b m (Maybe ()) -&gt; ConduitT Event b m ()
</span><a href="Text.XML.Stream.Parse.html#manyIgnoreYield"><span class="hs-identifier hs-var">manyIgnoreYield</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe o -&gt; ConduitT Event o m (Maybe o)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe o
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe a -&gt; Maybe ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; Maybe ())
-&gt; ConduitT Event o m (Maybe a) -&gt; ConduitT Event o m (Maybe ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
</span><a href="#local-6989586621679093084"><span class="hs-identifier hs-var">consumer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1151"></span><span>
</span><span id="line-1152"></span><span class="hs-comment">-- | Keep parsing elements as long as the parser returns 'Just'</span><span>
</span><span id="line-1153"></span><span class="hs-comment">--   or the ignore parser returns 'Just'.</span><span>
</span><span id="line-1154"></span><span id="local-6989586621679093819"><span id="local-6989586621679093820"><span id="local-6989586621679093821"><span id="local-6989586621679093822"><span class="annot"><a href="Text.XML.Stream.Parse.html#manyIgnore"><span class="hs-identifier hs-type">manyIgnore</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679093822"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-1155"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093821"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093822"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093820"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1156"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093821"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093822"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093819"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1157"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093821"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093822"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679093820"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span></span></span><span>
</span><span id="line-1158"></span><span id="manyIgnore"><span class="annot"><span class="annottext">manyIgnore :: ConduitT Event o m (Maybe a)
-&gt; ConduitT Event o m (Maybe b) -&gt; ConduitT Event o m [a]
</span><a href="Text.XML.Stream.Parse.html#manyIgnore"><span class="hs-identifier hs-var hs-var">manyIgnore</span></a></span></span><span> </span><span id="local-6989586621679093083"><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
</span><a href="#local-6989586621679093083"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621679093082"><span class="annot"><span class="annottext">ConduitT Event o m (Maybe b)
</span><a href="#local-6989586621679093082"><span class="hs-identifier hs-var">ignored'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([a] -&gt; [a]) -&gt; ConduitT Event o m [a]
</span><a href="#local-6989586621679093081"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a]
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1159"></span><span>  </span><span id="local-6989586621679093081"><span class="annot"><span class="annottext">go :: ([a] -&gt; [a]) -&gt; ConduitT Event o m [a]
</span><a href="#local-6989586621679093081"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679093080"><span class="annot"><span class="annottext">[a] -&gt; [a]
</span><a href="#local-6989586621679093080"><span class="hs-identifier hs-var">front</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
</span><a href="#local-6989586621679093083"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
-&gt; (Maybe a -&gt; ConduitT Event o m [a]) -&gt; ConduitT Event o m [a]
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m [a]
-&gt; (a -&gt; ConduitT Event o m [a])
-&gt; Maybe a
-&gt; ConduitT Event o m [a]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([a] -&gt; [a]) -&gt; ConduitT Event o m [a]
</span><a href="#local-6989586621679093079"><span class="hs-identifier hs-var">onFail</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a]
</span><a href="#local-6989586621679093080"><span class="hs-identifier hs-var">front</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679093078"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679093078"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([a] -&gt; [a]) -&gt; ConduitT Event o m [a]
</span><a href="#local-6989586621679093081"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(([a] -&gt; [a]) -&gt; ConduitT Event o m [a])
-&gt; ([a] -&gt; [a]) -&gt; ConduitT Event o m [a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a]
</span><a href="#local-6989586621679093080"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; [a]) -&gt; ([a] -&gt; [a]) -&gt; [a] -&gt; [a]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">:</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679093078"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1160"></span><span>  </span><span class="hs-comment">-- onFail is called if the main parser fails</span><span>
</span><span id="line-1161"></span><span>  </span><span id="local-6989586621679093079"><span class="annot"><span class="annottext">onFail :: ([a] -&gt; [a]) -&gt; ConduitT Event o m [a]
</span><a href="#local-6989586621679093079"><span class="hs-identifier hs-var hs-var">onFail</span></a></span></span><span> </span><span id="local-6989586621679093077"><span class="annot"><span class="annottext">[a] -&gt; [a]
</span><a href="#local-6989586621679093077"><span class="hs-identifier hs-var">front</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe b)
</span><a href="#local-6989586621679093082"><span class="hs-identifier hs-var">ignored'</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe b)
-&gt; (Maybe b -&gt; ConduitT Event o m [a]) -&gt; ConduitT Event o m [a]
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m [a]
-&gt; (b -&gt; ConduitT Event o m [a])
-&gt; Maybe b
-&gt; ConduitT Event o m [a]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[a] -&gt; ConduitT Event o m [a]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; ConduitT Event o m [a]) -&gt; [a] -&gt; ConduitT Event o m [a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a]
</span><a href="#local-6989586621679093077"><span class="hs-identifier hs-var">front</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConduitT Event o m [a] -&gt; b -&gt; ConduitT Event o m [a]
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(ConduitT Event o m [a] -&gt; b -&gt; ConduitT Event o m [a])
-&gt; ConduitT Event o m [a] -&gt; b -&gt; ConduitT Event o m [a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">([a] -&gt; [a]) -&gt; ConduitT Event o m [a]
</span><a href="#local-6989586621679093081"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [a]
</span><a href="#local-6989586621679093077"><span class="hs-identifier hs-var">front</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1162"></span><span>
</span><span id="line-1163"></span><span class="hs-comment">-- | Like @many@, but any tags and content the consumer doesn't match on</span><span>
</span><span id="line-1164"></span><span class="hs-comment">--   are silently ignored.</span><span>
</span><span id="line-1165"></span><span id="local-6989586621679093074"><span id="local-6989586621679093075"><span id="local-6989586621679093076"><span class="annot"><a href="Text.XML.Stream.Parse.html#many%27"><span class="hs-identifier hs-type">many'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093076"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-1166"></span><span>      </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093075"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093076"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093074"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1167"></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093075"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093076"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679093074"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span></span><span>
</span><span id="line-1168"></span><span id="many%27"><span class="annot"><span class="annottext">many' :: ConduitT Event o m (Maybe a) -&gt; ConduitT Event o m [a]
</span><a href="Text.XML.Stream.Parse.html#many%27"><span class="hs-identifier hs-var hs-var">many'</span></a></span></span><span> </span><span id="local-6989586621679093073"><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
</span><a href="#local-6989586621679093073"><span class="hs-identifier hs-var">consumer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
-&gt; ConduitT Event o m (Maybe ()) -&gt; ConduitT Event o m [a]
forall (m :: * -&gt; *) o a b.
Monad m =&gt;
ConduitT Event o m (Maybe a)
-&gt; ConduitT Event o m (Maybe b) -&gt; ConduitT Event o m [a]
</span><a href="Text.XML.Stream.Parse.html#manyIgnore"><span class="hs-identifier hs-var">manyIgnore</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe a)
</span><a href="#local-6989586621679093073"><span class="hs-identifier hs-var">consumer</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event o m (Maybe ())
forall (m :: * -&gt; *) o.
MonadThrow m =&gt;
ConduitT Event o m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#ignoreAnyTreeContent"><span class="hs-identifier hs-var">ignoreAnyTreeContent</span></a></span><span>
</span><span id="line-1169"></span><span>
</span><span id="line-1170"></span><span>
</span><span id="line-1171"></span><span class="hs-comment">-- | Like 'many', but uses 'yield' so the result list can be streamed</span><span>
</span><span id="line-1172"></span><span class="hs-comment">--   to downstream conduits without waiting for 'manyYield' to finish</span><span>
</span><span id="line-1173"></span><span id="local-6989586621679093070"><span id="local-6989586621679093071"><span id="local-6989586621679093072"><span class="annot"><a href="Text.XML.Stream.Parse.html#manyYield"><span class="hs-identifier hs-type">manyYield</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621679093072"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-1174"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><a href="#local-6989586621679093071"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093070"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093072"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093070"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1175"></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><a href="#local-6989586621679093071"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093070"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093072"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1176"></span><span id="manyYield"><span class="annot"><span class="annottext">manyYield :: ConduitT a b m (Maybe b) -&gt; ConduitT a b m ()
</span><a href="Text.XML.Stream.Parse.html#manyYield"><span class="hs-identifier hs-var hs-var">manyYield</span></a></span></span><span> </span><span id="local-6989586621679093069"><span class="annot"><span class="annottext">ConduitT a b m (Maybe b)
</span><a href="#local-6989586621679093069"><span class="hs-identifier hs-var">consumer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ConduitT a b m () -&gt; ConduitT a b m ()) -&gt; ConduitT a b m ()
forall a. (a -&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">fix</span></span><span> </span><span class="annot"><span class="annottext">((ConduitT a b m () -&gt; ConduitT a b m ()) -&gt; ConduitT a b m ())
-&gt; (ConduitT a b m () -&gt; ConduitT a b m ()) -&gt; ConduitT a b m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679093068"><span class="annot"><span class="annottext">ConduitT a b m ()
</span><a href="#local-6989586621679093068"><span class="hs-identifier hs-var">loop</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1177"></span><span>  </span><span class="annot"><span class="annottext">ConduitT a b m (Maybe b)
</span><a href="#local-6989586621679093069"><span class="hs-identifier hs-var">consumer</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT a b m (Maybe b)
-&gt; (Maybe b -&gt; ConduitT a b m ()) -&gt; ConduitT a b m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ConduitT a b m ()
-&gt; (b -&gt; ConduitT a b m ()) -&gt; Maybe b -&gt; ConduitT a b m ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; ConduitT a b m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679093067"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679093067"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b -&gt; ConduitT a b m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">yield</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679093067"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT a b m () -&gt; ConduitT a b m () -&gt; ConduitT a b m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ConduitT a b m ()
</span><a href="#local-6989586621679093068"><span class="hs-identifier hs-var">loop</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1178"></span><span>
</span><span id="line-1179"></span><span class="hs-comment">-- | Like 'manyIgnore', but uses 'yield' so the result list can be streamed</span><span>
</span><span id="line-1180"></span><span class="hs-comment">--   to downstream conduits without waiting for 'manyIgnoreYield' to finish</span><span>
</span><span id="line-1181"></span><span id="local-6989586621679093814"><span id="local-6989586621679093815"><span class="annot"><a href="Text.XML.Stream.Parse.html#manyIgnoreYield"><span class="hs-identifier hs-type">manyIgnoreYield</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093815"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-1182"></span><span>                </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093814"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093815"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093814"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ Consuming parser that generates the result stream</span><span>
</span><span id="line-1183"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093814"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093815"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ Ignore parser that consumes elements to be ignored</span><span>
</span><span id="line-1184"></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093814"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093815"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1185"></span><span id="manyIgnoreYield"><span class="annot"><span class="annottext">manyIgnoreYield :: ConduitT Event b m (Maybe b)
-&gt; ConduitT Event b m (Maybe ()) -&gt; ConduitT Event b m ()
</span><a href="Text.XML.Stream.Parse.html#manyIgnoreYield"><span class="hs-identifier hs-var hs-var">manyIgnoreYield</span></a></span></span><span> </span><span id="local-6989586621679093066"><span class="annot"><span class="annottext">ConduitT Event b m (Maybe b)
</span><a href="#local-6989586621679093066"><span class="hs-identifier hs-var">consumer</span></a></span></span><span> </span><span id="local-6989586621679093065"><span class="annot"><span class="annottext">ConduitT Event b m (Maybe ())
</span><a href="#local-6989586621679093065"><span class="hs-identifier hs-var">ignoreParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ConduitT Event b m () -&gt; ConduitT Event b m ())
-&gt; ConduitT Event b m ()
forall a. (a -&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">fix</span></span><span> </span><span class="annot"><span class="annottext">((ConduitT Event b m () -&gt; ConduitT Event b m ())
 -&gt; ConduitT Event b m ())
-&gt; (ConduitT Event b m () -&gt; ConduitT Event b m ())
-&gt; ConduitT Event b m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679093064"><span class="annot"><span class="annottext">ConduitT Event b m ()
</span><a href="#local-6989586621679093064"><span class="hs-identifier hs-var">loop</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1186"></span><span>  </span><span class="annot"><span class="annottext">ConduitT Event b m (Maybe b)
</span><a href="#local-6989586621679093066"><span class="hs-identifier hs-var">consumer</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event b m (Maybe b)
-&gt; (Maybe b -&gt; ConduitT Event b m ()) -&gt; ConduitT Event b m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event b m ()
-&gt; (b -&gt; ConduitT Event b m ()) -&gt; Maybe b -&gt; ConduitT Event b m ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConduitT Event b m () -&gt; ConduitT Event b m ()
</span><a href="#local-6989586621679093063"><span class="hs-identifier hs-var">onFail</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event b m ()
</span><a href="#local-6989586621679093064"><span class="hs-identifier hs-var">loop</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679093062"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679093062"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b -&gt; ConduitT Event b m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">yield</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679093062"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event b m ()
-&gt; ConduitT Event b m () -&gt; ConduitT Event b m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event b m ()
</span><a href="#local-6989586621679093064"><span class="hs-identifier hs-var">loop</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1187"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679093063"><span class="annot"><span class="annottext">onFail :: ConduitT Event b m () -&gt; ConduitT Event b m ()
</span><a href="#local-6989586621679093063"><span class="hs-identifier hs-var hs-var">onFail</span></a></span></span><span> </span><span id="local-6989586621679093061"><span class="annot"><span class="annottext">ConduitT Event b m ()
</span><a href="#local-6989586621679093061"><span class="hs-identifier hs-var">loop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT Event b m (Maybe ())
</span><a href="#local-6989586621679093065"><span class="hs-identifier hs-var">ignoreParser</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event b m (Maybe ())
-&gt; (Maybe () -&gt; ConduitT Event b m ()) -&gt; ConduitT Event b m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event b m ()
-&gt; (() -&gt; ConduitT Event b m ())
-&gt; Maybe ()
-&gt; ConduitT Event b m ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; ConduitT Event b m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConduitT Event b m () -&gt; () -&gt; ConduitT Event b m ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event b m ()
</span><a href="#local-6989586621679093061"><span class="hs-identifier hs-var">loop</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1188"></span><span>
</span><span id="line-1189"></span><span class="hs-comment">-- | Like 'many'', but uses 'yield' so the result list can be streamed</span><span>
</span><span id="line-1190"></span><span class="hs-comment">--   to downstream conduits without waiting for 'manyYield'' to finish</span><span>
</span><span id="line-1191"></span><span id="local-6989586621679093059"><span id="local-6989586621679093060"><span class="annot"><a href="Text.XML.Stream.Parse.html#manyYield%27"><span class="hs-identifier hs-type">manyYield'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093060"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-1192"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093059"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093060"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679093059"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1193"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093059"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093060"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-1194"></span><span id="manyYield%27"><span class="annot"><span class="annottext">manyYield' :: ConduitT Event b m (Maybe b) -&gt; ConduitT Event b m ()
</span><a href="Text.XML.Stream.Parse.html#manyYield%27"><span class="hs-identifier hs-var hs-var">manyYield'</span></a></span></span><span> </span><span id="local-6989586621679093058"><span class="annot"><span class="annottext">ConduitT Event b m (Maybe b)
</span><a href="#local-6989586621679093058"><span class="hs-identifier hs-var">consumer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConduitT Event b m (Maybe b)
-&gt; ConduitT Event b m (Maybe ()) -&gt; ConduitT Event b m ()
forall (m :: * -&gt; *) b.
MonadThrow m =&gt;
ConduitT Event b m (Maybe b)
-&gt; ConduitT Event b m (Maybe ()) -&gt; ConduitT Event b m ()
</span><a href="Text.XML.Stream.Parse.html#manyIgnoreYield"><span class="hs-identifier hs-var">manyIgnoreYield</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event b m (Maybe b)
</span><a href="#local-6989586621679093058"><span class="hs-identifier hs-var">consumer</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event b m (Maybe ())
forall (m :: * -&gt; *) o.
MonadThrow m =&gt;
ConduitT Event o m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#ignoreAnyTreeContent"><span class="hs-identifier hs-var">ignoreAnyTreeContent</span></a></span><span>
</span><span id="line-1195"></span><span>
</span><span id="line-1196"></span><span>
</span><span id="line-1197"></span><span class="hs-comment">-- | Stream a single content 'Event'.</span><span>
</span><span id="line-1198"></span><span class="hs-comment">--</span><span>
</span><span id="line-1199"></span><span class="hs-comment">-- Returns @Just ()@ if a content 'Event' was consumed, @Nothing@ otherwise.</span><span>
</span><span id="line-1200"></span><span class="hs-comment">--</span><span>
</span><span id="line-1201"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;content&lt;a&gt;&lt;/a&gt;&quot; .| void takeContent .| sinkList</span><span>
</span><span id="line-1202"></span><span class="hs-comment">-- [EventBeginDocument,EventContent (ContentText &quot;content&quot;)]</span><span>
</span><span id="line-1203"></span><span class="hs-comment">--</span><span>
</span><span id="line-1204"></span><span class="hs-comment">-- If next event isn't a content, nothing is consumed.</span><span>
</span><span id="line-1205"></span><span class="hs-comment">--</span><span>
</span><span id="line-1206"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;&lt;a&gt;content&lt;/a&gt;&quot; .| void takeContent .| sinkList</span><span>
</span><span id="line-1207"></span><span class="hs-comment">-- [EventBeginDocument]</span><span>
</span><span id="line-1208"></span><span class="hs-comment">--</span><span>
</span><span id="line-1209"></span><span class="hs-comment">-- Since 1.5.0</span><span>
</span><span id="line-1210"></span><span id="local-6989586621679093934"><span class="annot"><a href="Text.XML.Stream.Parse.html#takeContent"><span class="hs-identifier hs-type">takeContent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093934"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093934"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1211"></span><span id="takeContent"><span class="annot"><span class="annottext">takeContent :: ConduitT Event Event m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#takeContent"><span class="hs-identifier hs-var hs-var">takeContent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1212"></span><span>  </span><span id="local-6989586621679093057"><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093057"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe Event)
forall (m :: * -&gt; *) i. Monad m =&gt; Consumer i m (Maybe i)
</span><span class="hs-identifier hs-var">await</span></span><span>
</span><span id="line-1213"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093057"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1214"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093056"><span class="annot"><span class="annottext">e :: Event
</span><a href="#local-6989586621679093056"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">EventContent</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Event -&gt; ConduitT Event Event m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">yield</span></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093056"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m ()
-&gt; ConduitT Event Event m (Maybe ())
-&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Maybe ()
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1215"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093055"><span class="annot"><span class="annottext">e :: Event
</span><a href="#local-6989586621679093055"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">EventCDATA</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Event -&gt; ConduitT Event Event m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">yield</span></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093055"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m ()
-&gt; ConduitT Event Event m (Maybe ())
-&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Maybe ()
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1216"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093054"><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093054"><span class="hs-identifier hs-var">e</span></a></span></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Event -&gt; Bool
</span><a href="Text.XML.Stream.Parse.html#isWhitespace"><span class="hs-identifier hs-var">isWhitespace</span></a></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093054"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Event -&gt; ConduitT Event Event m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">yield</span></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093054"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m ()
-&gt; ConduitT Event Event m (Maybe ())
-&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *).
MonadThrow m =&gt;
ConduitT Event Event m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#takeContent"><span class="hs-identifier hs-var">takeContent</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Event -&gt; ConduitT Event Event m ()
forall i o (m :: * -&gt; *). i -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">leftover</span></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093054"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m ()
-&gt; ConduitT Event Event m (Maybe ())
-&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe ()
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1217"></span><span>    </span><span class="annot"><span class="annottext">Maybe Event
</span><span class="hs-identifier">_</span></span><span>                     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe ()
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1218"></span><span>
</span><span id="line-1219"></span><span class="hs-comment">-- | Stream 'Event's corresponding to a single XML element that matches given 'NameMatcher' and 'AttrParser', from the opening- to the closing-tag.</span><span>
</span><span id="line-1220"></span><span class="hs-comment">--</span><span>
</span><span id="line-1221"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;&lt;a&gt;content&lt;/a&gt;&lt;b&gt;&lt;/b&gt;&quot; .| void (takeTree &quot;a&quot; ignoreAttrs) .| sinkList</span><span>
</span><span id="line-1222"></span><span class="hs-comment">-- [EventBeginDocument,EventBeginElement (Name {nameLocalName = &quot;a&quot;, ...}) [],EventContent (ContentText &quot;content&quot;),EventEndElement (Name {nameLocalName = &quot;a&quot;, ...})]</span><span>
</span><span id="line-1223"></span><span class="hs-comment">--</span><span>
</span><span id="line-1224"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;&lt;a&gt;content&lt;/a&gt;&lt;b&gt;&lt;/b&gt;&quot; .| void (takeTree &quot;b&quot; ignoreAttrs) .| sinkList</span><span>
</span><span id="line-1225"></span><span class="hs-comment">-- [EventBeginDocument]</span><span>
</span><span id="line-1226"></span><span class="hs-comment">--</span><span>
</span><span id="line-1227"></span><span class="hs-comment">-- If next 'Event' isn't an element, nothing is consumed.</span><span>
</span><span id="line-1228"></span><span class="hs-comment">--</span><span>
</span><span id="line-1229"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;text&lt;a&gt;&lt;/a&gt;&quot; .| void (takeTree &quot;a&quot; ignoreAttrs) .| sinkList</span><span>
</span><span id="line-1230"></span><span class="hs-comment">-- [EventBeginDocument]</span><span>
</span><span id="line-1231"></span><span class="hs-comment">--</span><span>
</span><span id="line-1232"></span><span class="hs-comment">-- If an opening-tag is consumed but no matching closing-tag is found, an 'XmlException' is thrown.</span><span>
</span><span id="line-1233"></span><span class="hs-comment">--</span><span>
</span><span id="line-1234"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;&lt;a&gt;&lt;b&gt;&lt;/b&gt;&quot; .| void (takeTree &quot;a&quot; ignoreAttrs) .| sinkList</span><span>
</span><span id="line-1235"></span><span class="hs-comment">-- *** Exception: InvalidEndElement (Name {nameLocalName = &quot;a&quot;, nameNamespace = Nothing, namePrefix = Nothing}) Nothing</span><span>
</span><span id="line-1236"></span><span class="hs-comment">--</span><span>
</span><span id="line-1237"></span><span class="hs-comment">-- This function automatically ignores comments, instructions and whitespace.</span><span>
</span><span id="line-1238"></span><span class="hs-comment">--</span><span>
</span><span id="line-1239"></span><span class="hs-comment">-- Returns @Just ()@ if an element was consumed, 'Nothing' otherwise.</span><span>
</span><span id="line-1240"></span><span class="hs-comment">--</span><span>
</span><span id="line-1241"></span><span class="hs-comment">-- Since 1.5.0</span><span>
</span><span id="line-1242"></span><span id="local-6989586621679093940"><span id="local-6989586621679093941"><span id="local-6989586621679093942"><span class="annot"><a href="Text.XML.Stream.Parse.html#takeTree"><span class="hs-identifier hs-type">takeTree</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093942"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093941"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093940"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093942"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1243"></span><span id="takeTree"><span class="annot"><span class="annottext">takeTree :: NameMatcher a -&gt; AttrParser b -&gt; ConduitT Event Event m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#takeTree"><span class="hs-identifier hs-var hs-var">takeTree</span></a></span></span><span> </span><span id="local-6989586621679093053"><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093053"><span class="hs-identifier hs-var">nameMatcher</span></a></span></span><span> </span><span id="local-6989586621679093052"><span class="annot"><span class="annottext">AttrParser b
</span><a href="#local-6989586621679093052"><span class="hs-identifier hs-var">attrParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1244"></span><span>  </span><span id="local-6989586621679093051"><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093051"><span class="hs-identifier hs-var">event</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe Event)
forall (m :: * -&gt; *) i. Monad m =&gt; Consumer i m (Maybe i)
</span><span class="hs-identifier hs-var">await</span></span><span>
</span><span id="line-1245"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093051"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1246"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093050"><span class="annot"><span class="annottext">e :: Event
</span><a href="#local-6989586621679093050"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EventBeginElement</span></span><span> </span><span id="local-6989586621679093049"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093049"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679093048"><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093048"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NameMatcher a -&gt; Name -&gt; Maybe a
forall a. NameMatcher a -&gt; Name -&gt; Maybe a
</span><a href="Text.XML.Stream.Parse.html#runNameMatcher"><span class="hs-identifier hs-var hs-var">runNameMatcher</span></a></span><span> </span><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093053"><span class="hs-identifier hs-var">nameMatcher</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093049"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1247"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">AttrParser b
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], b)
forall a.
AttrParser a
-&gt; [(Name, [Content])]
-&gt; Either SomeException ([(Name, [Content])], a)
</span><a href="Text.XML.Stream.Parse.html#runAttrParser"><span class="hs-identifier hs-var hs-var">runAttrParser</span></a></span><span> </span><span class="annot"><span class="annottext">AttrParser b
</span><a href="#local-6989586621679093052"><span class="hs-identifier hs-var">attrParser</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, [Content])]
</span><a href="#local-6989586621679093048"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1248"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">([(Name, [Content])], b)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-1249"></span><span>          </span><span class="annot"><span class="annottext">Event -&gt; ConduitT Event Event m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">yield</span></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093050"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-1250"></span><span>          </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe ()) -&gt; ConduitT Event Event m ()
forall (m :: * -&gt; *) b. Monad m =&gt; m (Maybe b) -&gt; m ()
</span><a href="#local-6989586621679093047"><span class="hs-identifier hs-var">whileJust</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *).
MonadThrow m =&gt;
ConduitT Event Event m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#takeAnyTreeContent"><span class="hs-identifier hs-var">takeAnyTreeContent</span></a></span><span>
</span><span id="line-1251"></span><span>          </span><span id="local-6989586621679093046"><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093046"><span class="hs-identifier hs-var">endEvent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe Event)
forall (m :: * -&gt; *) i. Monad m =&gt; Consumer i m (Maybe i)
</span><span class="hs-identifier hs-var">await</span></span><span>
</span><span id="line-1252"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093046"><span class="hs-identifier hs-var">endEvent</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1253"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093045"><span class="annot"><span class="annottext">e' :: Event
</span><a href="#local-6989586621679093045"><span class="hs-identifier hs-var">e'</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">EventEndElement</span></span><span> </span><span id="local-6989586621679093044"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093044"><span class="hs-identifier hs-var">name'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093049"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093044"><span class="hs-identifier hs-var">name'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Event -&gt; ConduitT Event Event m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">yield</span></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093045"><span class="hs-identifier hs-var">e'</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m ()
-&gt; ConduitT Event Event m (Maybe ())
-&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Maybe ()
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1254"></span><span>            </span><span class="annot"><span class="annottext">Maybe Event
</span><span class="hs-identifier">_</span></span><span>                                               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m (Maybe ()) -&gt; ConduitT Event Event m (Maybe ())
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe ()) -&gt; ConduitT Event Event m (Maybe ()))
-&gt; m (Maybe ()) -&gt; ConduitT Event Event m (Maybe ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">XmlException -&gt; m (Maybe ())
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="annot"><span class="annottext">(XmlException -&gt; m (Maybe ())) -&gt; XmlException -&gt; m (Maybe ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Maybe Event -&gt; XmlException
</span><a href="Text.XML.Stream.Parse.html#InvalidEndElement"><span class="hs-identifier hs-var">InvalidEndElement</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621679093049"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Event
</span><a href="#local-6989586621679093046"><span class="hs-identifier hs-var">endEvent</span></a></span><span>
</span><span id="line-1255"></span><span>        </span><span class="annot"><span class="annottext">Either SomeException ([(Name, [Content])], b)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Event -&gt; ConduitT Event Event m ()
forall i o (m :: * -&gt; *). i -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">leftover</span></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093050"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m ()
-&gt; ConduitT Event Event m (Maybe ())
-&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe ()
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1256"></span><span>      </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Event -&gt; ConduitT Event Event m ()
forall i o (m :: * -&gt; *). i -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">leftover</span></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093050"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m ()
-&gt; ConduitT Event Event m (Maybe ())
-&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe ()
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1257"></span><span>
</span><span id="line-1258"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679093043"><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093043"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Event -&gt; Bool
</span><a href="Text.XML.Stream.Parse.html#isWhitespace"><span class="hs-identifier hs-var">isWhitespace</span></a></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093043"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Event -&gt; ConduitT Event Event m ()
forall (m :: * -&gt; *) o i. Monad m =&gt; o -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">yield</span></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093043"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m ()
-&gt; ConduitT Event Event m (Maybe ())
-&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">NameMatcher a -&gt; AttrParser b -&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a b.
MonadThrow m =&gt;
NameMatcher a -&gt; AttrParser b -&gt; ConduitT Event Event m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#takeTree"><span class="hs-identifier hs-var">takeTree</span></a></span><span> </span><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093053"><span class="hs-identifier hs-var">nameMatcher</span></a></span><span> </span><span class="annot"><span class="annottext">AttrParser b
</span><a href="#local-6989586621679093052"><span class="hs-identifier hs-var">attrParser</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Event -&gt; ConduitT Event Event m ()
forall i o (m :: * -&gt; *). i -&gt; ConduitT i o m ()
</span><span class="hs-identifier hs-var">leftover</span></span><span> </span><span class="annot"><span class="annottext">Event
</span><a href="#local-6989586621679093043"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m ()
-&gt; ConduitT Event Event m (Maybe ())
-&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe ()
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1259"></span><span>    </span><span class="annot"><span class="annottext">Maybe Event
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe () -&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe ()
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1260"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1261"></span><span>    </span><span id="local-6989586621679093047"><span class="annot"><span class="annottext">whileJust :: m (Maybe b) -&gt; m ()
</span><a href="#local-6989586621679093047"><span class="hs-identifier hs-var hs-var">whileJust</span></a></span></span><span> </span><span id="local-6989586621679093042"><span class="annot"><span class="annottext">m (Maybe b)
</span><a href="#local-6989586621679093042"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m ()
forall a. (a -&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">fix</span></span><span> </span><span class="annot"><span class="annottext">((m () -&gt; m ()) -&gt; m ()) -&gt; (m () -&gt; m ()) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679093041"><span class="annot"><span class="annottext">m ()
</span><a href="#local-6989586621679093041"><span class="hs-identifier hs-var">loop</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m (Maybe b)
</span><a href="#local-6989586621679093042"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">m (Maybe b) -&gt; (Maybe b -&gt; m ()) -&gt; m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">m () -&gt; (b -&gt; m ()) -&gt; Maybe b -&gt; m ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m () -&gt; b -&gt; m ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">m ()
</span><a href="#local-6989586621679093041"><span class="hs-identifier hs-var">loop</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1262"></span><span>
</span><span id="line-1263"></span><span class="hs-comment">-- | Like 'takeTree', but can also stream a content 'Event'.</span><span>
</span><span id="line-1264"></span><span class="hs-comment">--</span><span>
</span><span id="line-1265"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;&lt;a&gt;content&lt;/a&gt;&lt;b&gt;&lt;/b&gt;&quot; .| void (takeTreeContent &quot;a&quot; ignoreAttrs) .| sinkList</span><span>
</span><span id="line-1266"></span><span class="hs-comment">-- [EventBeginDocument,EventBeginElement (Name {nameLocalName = &quot;a&quot;, ...}) [],EventContent (ContentText &quot;content&quot;),EventEndElement (Name {nameLocalName = &quot;a&quot;, ...})]</span><span>
</span><span id="line-1267"></span><span class="hs-comment">--</span><span>
</span><span id="line-1268"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;&lt;a&gt;content&lt;/a&gt;&lt;b&gt;&lt;/b&gt;&quot; .| void (takeTreeContent &quot;b&quot; ignoreAttrs) .| sinkList</span><span>
</span><span id="line-1269"></span><span class="hs-comment">-- [EventBeginDocument]</span><span>
</span><span id="line-1270"></span><span class="hs-comment">--</span><span>
</span><span id="line-1271"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;content&lt;a&gt;&lt;/a&gt;&lt;b&gt;&lt;/b&gt;&quot; .| void (takeTreeContent &quot;a&quot; ignoreAttrs) .| sinkList</span><span>
</span><span id="line-1272"></span><span class="hs-comment">-- [EventBeginDocument,EventContent (ContentText &quot;content&quot;)]</span><span>
</span><span id="line-1273"></span><span class="hs-comment">--</span><span>
</span><span id="line-1274"></span><span class="hs-comment">-- Since 1.5.0</span><span>
</span><span id="line-1275"></span><span id="local-6989586621679093038"><span id="local-6989586621679093039"><span id="local-6989586621679093040"><span class="annot"><a href="Text.XML.Stream.Parse.html#takeTreeContent"><span class="hs-identifier hs-type">takeTreeContent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093040"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#NameMatcher"><span class="hs-identifier hs-type">NameMatcher</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093039"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#AttrParser"><span class="hs-identifier hs-type">AttrParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679093038"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093040"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-1276"></span><span id="takeTreeContent"><span class="annot"><span class="annottext">takeTreeContent :: NameMatcher a -&gt; AttrParser b -&gt; ConduitT Event Event m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#takeTreeContent"><span class="hs-identifier hs-var hs-var">takeTreeContent</span></a></span></span><span> </span><span id="local-6989586621679093037"><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093037"><span class="hs-identifier hs-var">nameMatcher</span></a></span></span><span> </span><span id="local-6989586621679093036"><span class="annot"><span class="annottext">AttrParser b
</span><a href="#local-6989586621679093036"><span class="hs-identifier hs-var">attrParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT (ConduitT Event Event m) ()
-&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="annot"><span class="annottext">(MaybeT (ConduitT Event Event m) ()
 -&gt; ConduitT Event Event m (Maybe ()))
-&gt; MaybeT (ConduitT Event Event m) ()
-&gt; ConduitT Event Event m (Maybe ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe ())
-&gt; MaybeT (ConduitT Event Event m) ()
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NameMatcher a -&gt; AttrParser b -&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a b.
MonadThrow m =&gt;
NameMatcher a -&gt; AttrParser b -&gt; ConduitT Event Event m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#takeTree"><span class="hs-identifier hs-var">takeTree</span></a></span><span> </span><span class="annot"><span class="annottext">NameMatcher a
</span><a href="#local-6989586621679093037"><span class="hs-identifier hs-var">nameMatcher</span></a></span><span> </span><span class="annot"><span class="annottext">AttrParser b
</span><a href="#local-6989586621679093036"><span class="hs-identifier hs-var">attrParser</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MaybeT (ConduitT Event Event m) ()
-&gt; MaybeT (ConduitT Event Event m) ()
-&gt; MaybeT (ConduitT Event Event m) ()
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe ())
-&gt; MaybeT (ConduitT Event Event m) ()
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *).
MonadThrow m =&gt;
ConduitT Event Event m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#takeContent"><span class="hs-identifier hs-var">takeContent</span></a></span><span>
</span><span id="line-1277"></span><span>
</span><span id="line-1278"></span><span class="hs-comment">-- | Like 'takeTreeContent', without checking for tag name or attributes.</span><span>
</span><span id="line-1279"></span><span class="hs-comment">--</span><span>
</span><span id="line-1280"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;text&lt;a&gt;&lt;/a&gt;&quot; .| void takeAnyTreeContent .| sinkList</span><span>
</span><span id="line-1281"></span><span class="hs-comment">-- [EventBeginDocument,EventContent (ContentText &quot;text&quot;)]</span><span>
</span><span id="line-1282"></span><span class="hs-comment">--</span><span>
</span><span id="line-1283"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;&lt;/a&gt;&lt;b&gt;&lt;/b&gt;&quot; .| void takeAnyTreeContent .| sinkList</span><span>
</span><span id="line-1284"></span><span class="hs-comment">-- [EventBeginDocument]</span><span>
</span><span id="line-1285"></span><span class="hs-comment">--</span><span>
</span><span id="line-1286"></span><span class="hs-comment">-- &gt;&gt;&gt; runConduit $ parseLBS def &quot;&lt;b&gt;&lt;c&gt;&lt;/c&gt;&lt;/b&gt;&lt;/a&gt;text&quot; .| void takeAnyTreeContent .| sinkList</span><span>
</span><span id="line-1287"></span><span class="hs-comment">-- [EventBeginDocument,EventBeginElement (Name {nameLocalName = &quot;b&quot;, ...}) [],EventBeginElement (Name {nameLocalName = &quot;c&quot;, ...}) [],EventEndElement (Name {nameLocalName = &quot;c&quot;, ...}),EventEndElement (Name {nameLocalName = &quot;b&quot;, ...})]</span><span>
</span><span id="line-1288"></span><span class="hs-comment">--</span><span>
</span><span id="line-1289"></span><span class="hs-comment">-- Since 1.5.0</span><span>
</span><span id="line-1290"></span><span id="local-6989586621679093033"><span class="annot"><a href="Text.XML.Stream.Parse.html#takeAnyTreeContent"><span class="hs-identifier hs-type">takeAnyTreeContent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679093033"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-1291"></span><span>                </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConduitT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Event</span></span><span> </span><span class="annot"><a href="#local-6989586621679093033"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-1292"></span><span id="takeAnyTreeContent"><span class="annot"><span class="annottext">takeAnyTreeContent :: ConduitT Event Event m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#takeAnyTreeContent"><span class="hs-identifier hs-var hs-var">takeAnyTreeContent</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameMatcher Name
-&gt; AttrParser () -&gt; ConduitT Event Event m (Maybe ())
forall (m :: * -&gt; *) a b.
MonadThrow m =&gt;
NameMatcher a -&gt; AttrParser b -&gt; ConduitT Event Event m (Maybe ())
</span><a href="Text.XML.Stream.Parse.html#takeTreeContent"><span class="hs-identifier hs-var">takeTreeContent</span></a></span><span> </span><span class="annot"><span class="annottext">NameMatcher Name
</span><a href="Text.XML.Stream.Parse.html#anyName"><span class="hs-identifier hs-var">anyName</span></a></span><span> </span><span class="annot"><span class="annottext">AttrParser ()
</span><a href="Text.XML.Stream.Parse.html#ignoreAttrs"><span class="hs-identifier hs-var">ignoreAttrs</span></a></span><span>
</span><span id="line-1293"></span><span>
</span><span id="line-1294"></span><span>
</span><span id="line-1295"></span><span class="hs-comment">-- | Default implementation of 'DecodeEntities', which leaves the</span><span>
</span><span id="line-1296"></span><span class="hs-comment">-- entity as-is. Numeric character references and the five standard</span><span>
</span><span id="line-1297"></span><span class="hs-comment">-- entities (lt, gt, amp, quot, pos) are handled internally by the</span><span>
</span><span id="line-1298"></span><span class="hs-comment">-- parser.</span><span>
</span><span id="line-1299"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#decodeXmlEntities"><span class="hs-identifier hs-type">decodeXmlEntities</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#DecodeEntities"><span class="hs-identifier hs-type">DecodeEntities</span></a></span><span>
</span><span id="line-1300"></span><span id="decodeXmlEntities"><span class="annot"><span class="annottext">decodeXmlEntities :: DecodeEntities
</span><a href="Text.XML.Stream.Parse.html#decodeXmlEntities"><span class="hs-identifier hs-var hs-var">decodeXmlEntities</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DecodeEntities
</span><span class="hs-identifier hs-var">ContentEntity</span></span><span>
</span><span id="line-1301"></span><span>
</span><span id="line-1302"></span><span class="hs-comment">-- | HTML4-compliant entity decoder. Handles the additional 248</span><span>
</span><span id="line-1303"></span><span class="hs-comment">-- entities defined by HTML 4 and XHTML 1.</span><span>
</span><span id="line-1304"></span><span class="hs-comment">--</span><span>
</span><span id="line-1305"></span><span class="hs-comment">-- Note that HTML 5 introduces a drastically larger number of entities, and</span><span>
</span><span id="line-1306"></span><span class="hs-comment">-- this code does not recognize most of them.</span><span>
</span><span id="line-1307"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#decodeHtmlEntities"><span class="hs-identifier hs-type">decodeHtmlEntities</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Text.XML.Stream.Parse.html#DecodeEntities"><span class="hs-identifier hs-type">DecodeEntities</span></a></span><span>
</span><span id="line-1308"></span><span id="decodeHtmlEntities"><span class="annot"><span class="annottext">decodeHtmlEntities :: DecodeEntities
</span><a href="Text.XML.Stream.Parse.html#decodeHtmlEntities"><span class="hs-identifier hs-var hs-var">decodeHtmlEntities</span></a></span></span><span> </span><span id="local-6989586621679093032"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093032"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1309"></span><span>  </span><span class="annot"><span class="annottext">Content -&gt; DecodeEntities -&gt; Maybe Text -&gt; Content
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DecodeEntities
</span><span class="hs-identifier hs-var">ContentEntity</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093032"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">DecodeEntities
</span><span class="hs-identifier hs-var">ContentText</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Text -&gt; Content) -&gt; Maybe Text -&gt; Content
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Map Text Text -&gt; Maybe Text
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679093032"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text Text
</span><a href="Text.XML.Stream.Parse.html#htmlEntities"><span class="hs-identifier hs-var">htmlEntities</span></a></span><span>
</span><span id="line-1310"></span><span>
</span><span id="line-1311"></span><span class="annot"><a href="Text.XML.Stream.Parse.html#htmlEntities"><span class="hs-identifier hs-type">htmlEntities</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span>
</span><span id="line-1312"></span><span id="htmlEntities"><span class="annot"><span class="annottext">htmlEntities :: Map Text Text
</span><a href="Text.XML.Stream.Parse.html#htmlEntities"><span class="hs-identifier hs-var hs-var">htmlEntities</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EntityTable -&gt; Map Text Text
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span>
</span><span id="line-1313"></span><span>    </span><span class="annot"><span class="annottext">(EntityTable -&gt; Map Text Text) -&gt; EntityTable -&gt; Map Text Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((String, String) -&gt; (Text, Text))
-&gt; [(String, String)] -&gt; EntityTable
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text)
-&gt; (String -&gt; Text) -&gt; (String, String) -&gt; (Text, Text)
forall (a :: * -&gt; * -&gt; *) b c b' c'.
Arrow a =&gt;
a b c -&gt; a b' c' -&gt; a (b, b') (c, c')
</span><span class="hs-operator hs-var">***</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">pack</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Work around the long-compile-time bug</span><span>
</span><span id="line-1314"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;nbsp&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\160&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1315"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;iexcl&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\161&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1316"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cent&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\162&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1317"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pound&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\163&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1318"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;curren&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\164&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1319"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;yen&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\165&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1320"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;brvbar&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\166&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1321"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sect&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\167&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1322"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;uml&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\168&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1323"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;copy&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\169&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1324"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ordf&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\170&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1325"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;laquo&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\171&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1326"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;not&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\172&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1327"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;shy&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\173&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1328"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;reg&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\174&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1329"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;macr&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\175&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1330"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;deg&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\176&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1331"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;plusmn&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\177&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1332"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sup2&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\178&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1333"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sup3&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\179&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1334"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;acute&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\180&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1335"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;micro&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\181&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1336"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;para&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\182&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1337"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;middot&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\183&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1338"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cedil&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\184&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1339"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sup1&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\185&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1340"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ordm&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\186&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1341"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;raquo&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\187&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1342"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;frac14&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\188&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1343"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;frac12&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\189&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1344"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;frac34&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\190&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1345"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;iquest&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\191&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1346"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Agrave&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\192&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1347"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Aacute&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\193&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1348"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Acirc&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\194&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1349"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Atilde&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\195&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1350"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Auml&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\196&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1351"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Aring&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\197&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1352"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;AElig&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\198&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1353"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ccedil&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\199&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1354"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Egrave&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\200&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1355"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Eacute&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\201&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1356"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ecirc&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\202&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1357"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Euml&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\203&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1358"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Igrave&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\204&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1359"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Iacute&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\205&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1360"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Icirc&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\206&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1361"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Iuml&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\207&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1362"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ETH&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\208&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1363"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ntilde&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\209&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1364"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ograve&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\210&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1365"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Oacute&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\211&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1366"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ocirc&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\212&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1367"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Otilde&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\213&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1368"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ouml&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\214&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1369"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;times&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\215&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1370"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Oslash&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\216&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1371"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ugrave&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\217&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1372"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Uacute&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\218&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1373"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Ucirc&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\219&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1374"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Uuml&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\220&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1375"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Yacute&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\221&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1376"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;THORN&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\222&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1377"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;szlig&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\223&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1378"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;agrave&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\224&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1379"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;aacute&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\225&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1380"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;acirc&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\226&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1381"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;atilde&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\227&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1382"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;auml&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\228&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1383"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;aring&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\229&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1384"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;aelig&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\230&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1385"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ccedil&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\231&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1386"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;egrave&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\232&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1387"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;eacute&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\233&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1388"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ecirc&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\234&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1389"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;euml&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\235&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1390"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;igrave&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\236&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1391"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;iacute&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\237&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1392"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;icirc&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\238&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1393"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;iuml&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\239&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1394"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;eth&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\240&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1395"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ntilde&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\241&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1396"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ograve&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\242&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1397"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;oacute&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\243&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1398"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ocirc&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\244&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1399"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;otilde&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\245&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1400"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ouml&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\246&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1401"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;divide&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\247&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1402"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;oslash&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\248&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1403"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ugrave&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\249&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1404"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;uacute&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\250&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1405"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ucirc&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\251&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1406"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;uuml&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\252&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1407"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;yacute&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\253&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1408"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;thorn&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\254&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1409"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;yuml&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\255&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1410"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;OElig&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\338&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1411"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;oelig&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\339&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1412"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Scaron&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\352&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1413"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;scaron&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\353&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1414"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Yuml&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\376&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1415"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;fnof&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\402&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1416"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;circ&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\710&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1417"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tilde&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\732&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1418"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Alpha&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\913&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1419"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Beta&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\914&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1420"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Gamma&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\915&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1421"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Delta&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\916&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1422"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Epsilon&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\917&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1423"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Zeta&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\918&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1424"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Eta&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\919&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1425"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Theta&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\920&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1426"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Iota&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\921&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1427"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Kappa&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\922&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1428"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Lambda&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\923&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1429"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Mu&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\924&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1430"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Nu&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\925&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1431"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Xi&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\926&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1432"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Omicron&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\927&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1433"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Pi&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\928&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1434"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Rho&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\929&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1435"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Sigma&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\931&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1436"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Tau&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\932&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1437"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Upsilon&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\933&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1438"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Phi&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\934&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1439"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Chi&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\935&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1440"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Psi&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\936&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1441"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Omega&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\937&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1442"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;alpha&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\945&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1443"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;beta&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\946&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1444"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;gamma&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\947&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1445"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;delta&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\948&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1446"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;epsilon&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\949&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1447"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zeta&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\950&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1448"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;eta&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\951&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1449"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;theta&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\952&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1450"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;iota&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\953&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1451"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;kappa&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\954&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1452"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lambda&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\955&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1453"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mu&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\956&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1454"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;nu&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\957&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1455"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;xi&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\958&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1456"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;omicron&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\959&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1457"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;pi&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\960&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1458"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rho&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\961&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1459"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sigmaf&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\962&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1460"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sigma&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\963&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1461"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;tau&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\964&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1462"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;upsilon&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\965&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1463"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;phi&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\966&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1464"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;chi&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\967&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1465"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;psi&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\968&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1466"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;omega&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\969&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1467"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;thetasym&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\977&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1468"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;upsih&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\978&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1469"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;piv&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\982&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1470"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ensp&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8194&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1471"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;emsp&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8195&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1472"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;thinsp&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8201&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1473"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zwnj&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8204&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1474"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;zwj&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8205&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1475"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lrm&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8206&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1476"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rlm&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8207&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1477"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ndash&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8211&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1478"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;mdash&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8212&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1479"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lsquo&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8216&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1480"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rsquo&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8217&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1481"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sbquo&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8218&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1482"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ldquo&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8220&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1483"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rdquo&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8221&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1484"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bdquo&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8222&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1485"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dagger&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8224&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1486"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Dagger&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8225&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1487"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;bull&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8226&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1488"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hellip&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8230&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1489"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;permil&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8240&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1490"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;prime&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8242&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1491"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Prime&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8243&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1492"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lsaquo&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8249&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1493"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rsaquo&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8250&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1494"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;oline&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8254&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1495"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;frasl&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8260&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1496"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;euro&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8364&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1497"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;image&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8465&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1498"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;weierp&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8472&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1499"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;real&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8476&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1500"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;trade&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8482&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1501"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;alefsym&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8501&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1502"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;larr&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8592&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1503"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;uarr&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8593&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1504"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rarr&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8594&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1505"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;darr&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8595&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1506"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;harr&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8596&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1507"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;crarr&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8629&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1508"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lArr&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8656&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1509"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;uArr&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8657&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1510"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rArr&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8658&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1511"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dArr&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8659&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1512"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hArr&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8660&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1513"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;forall&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8704&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1514"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;part&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8706&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1515"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;exist&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8707&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1516"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;empty&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8709&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1517"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;nabla&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8711&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1518"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;isin&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8712&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1519"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;notin&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8713&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1520"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ni&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8715&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1521"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;prod&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8719&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1522"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sum&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8721&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1523"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;minus&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8722&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1524"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lowast&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8727&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1525"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;radic&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8730&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1526"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;prop&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8733&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1527"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;infin&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8734&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1528"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ang&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8736&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1529"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;and&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8743&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1530"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;or&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8744&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1531"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cap&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8745&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1532"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cup&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8746&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1533"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;int&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8747&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1534"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;there4&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8756&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1535"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sim&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8764&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1536"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cong&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8773&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1537"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;asymp&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8776&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1538"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ne&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8800&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1539"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;equiv&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8801&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1540"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;le&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8804&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1541"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;ge&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8805&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1542"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sub&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8834&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1543"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sup&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8835&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1544"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;nsub&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8836&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1545"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sube&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8838&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1546"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;supe&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8839&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1547"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;oplus&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8853&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1548"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;otimes&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8855&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1549"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;perp&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8869&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1550"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;sdot&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8901&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1551"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lceil&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8968&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1552"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rceil&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8969&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1553"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lfloor&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8970&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1554"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rfloor&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\8971&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1555"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;lang&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\9001&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1556"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rang&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\9002&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1557"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;loz&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\9674&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1558"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;spades&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\9824&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1559"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;clubs&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\9827&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1560"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;hearts&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\9829&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1561"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;diams&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\9830&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1562"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1563"></span></pre></body></html>