<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- | This module provides utilities which help ensure that we aren't</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- attempting to de-serialize data that is an older or newer version.</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- The 'WithVersion' utility wraps up a datatype along with a version</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- tag. This version tag can either be provided by the user</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- ('namedVersionConfig'), or use a computed hash</span><span>
</span><span id="line-14"></span><span class="hs-comment">-- ('hashedVersionConfig').</span><span>
</span><span id="line-15"></span><span class="hs-comment">--</span><span>
</span><span id="line-16"></span><span class="hs-comment">-- The magic here is using an SYB traversal ('Data') to get the</span><span>
</span><span id="line-17"></span><span class="hs-comment">-- structure of all the data-types involved. This info is rendered to</span><span>
</span><span id="line-18"></span><span class="hs-comment">-- text and hashed to yield a hash which describes it.</span><span>
</span><span id="line-19"></span><span class="hs-comment">--</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- NOTE that this API is still quite new and so is likely to break</span><span>
</span><span id="line-21"></span><span class="hs-comment">-- compatibility in the future. It should also be expected that the</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- computed hashes may change between major version bumps, though this</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- will be minimized when directly feasible.</span><span>
</span><span id="line-24"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Store.Version</span><span>
</span><span id="line-25"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Data.Store.Version.html#StoreVersion"><span class="hs-identifier">StoreVersion</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Store.Version.html#VersionConfig"><span class="hs-identifier">VersionConfig</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Store.Version.html#hashedVersionConfig"><span class="hs-identifier">hashedVersionConfig</span></a></span><span>
</span><span id="line-28"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Store.Version.html#namedVersionConfig"><span class="hs-identifier">namedVersionConfig</span></a></span><span>
</span><span id="line-29"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Store.Version.html#encodeWithVersionQ"><span class="hs-identifier">encodeWithVersionQ</span></a></span><span>
</span><span id="line-30"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Store.Version.html#decodeWithVersionQ"><span class="hs-identifier">decodeWithVersionQ</span></a></span><span>
</span><span id="line-31"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-32"></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.State</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Crypto.Hash.SHA1</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SHA1</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Base64.URL</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">B64Url</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Char8</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS8</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Generics</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">DataType</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">M</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Data.Store.Internal.html"><span class="hs-identifier">Data.Store.Internal</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">encodeUtf8</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">decodeUtf8</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">decodeUtf8With</span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Text.Encoding.Error</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">lenientDecode</span></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.IO</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Word</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Word32</span></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Language.Haskell.TH</span></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">System.Directory</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">System.Environment</span></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">System.FilePath</span></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">TH.RelativePaths</span></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">TH.Utilities</span></span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span id="local-6989586621679542273"><span id="local-6989586621679542274"></span></span><span class="hs-keyword">newtype</span><span> </span><span id="StoreVersion"><span class="annot"><a href="Data.Store.Version.html#StoreVersion"><span class="hs-identifier hs-var">StoreVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="StoreVersion"><span class="annot"><a href="Data.Store.Version.html#StoreVersion"><span class="hs-identifier hs-var">StoreVersion</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unStoreVersion"><span class="annot"><span class="annottext">StoreVersion -&gt; ByteString
</span><a href="Data.Store.Version.html#unStoreVersion"><span class="hs-identifier hs-var hs-var">unStoreVersion</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-57"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679542267"><span id="local-6989586621679542269"><span class="annot"><span class="annottext">StoreVersion -&gt; StoreVersion -&gt; Bool
(StoreVersion -&gt; StoreVersion -&gt; Bool)
-&gt; (StoreVersion -&gt; StoreVersion -&gt; Bool) -&gt; Eq StoreVersion
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: StoreVersion -&gt; StoreVersion -&gt; Bool
$c/= :: StoreVersion -&gt; StoreVersion -&gt; Bool
== :: StoreVersion -&gt; StoreVersion -&gt; Bool
$c== :: StoreVersion -&gt; StoreVersion -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679542260"><span id="local-6989586621679542262"><span id="local-6989586621679542264"><span class="annot"><span class="annottext">Int -&gt; StoreVersion -&gt; ShowS
[StoreVersion] -&gt; ShowS
StoreVersion -&gt; String
(Int -&gt; StoreVersion -&gt; ShowS)
-&gt; (StoreVersion -&gt; String)
-&gt; ([StoreVersion] -&gt; ShowS)
-&gt; Show StoreVersion
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [StoreVersion] -&gt; ShowS
$cshowList :: [StoreVersion] -&gt; ShowS
show :: StoreVersion -&gt; String
$cshow :: StoreVersion -&gt; String
showsPrec :: Int -&gt; StoreVersion -&gt; ShowS
$cshowsPrec :: Int -&gt; StoreVersion -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679542244"><span id="local-6989586621679542246"><span id="local-6989586621679542248"><span id="local-6989586621679542250"><span id="local-6989586621679542252"><span id="local-6989586621679542254"><span id="local-6989586621679542256"><span class="annot"><span class="annottext">Eq StoreVersion
Eq StoreVersion
-&gt; (StoreVersion -&gt; StoreVersion -&gt; Ordering)
-&gt; (StoreVersion -&gt; StoreVersion -&gt; Bool)
-&gt; (StoreVersion -&gt; StoreVersion -&gt; Bool)
-&gt; (StoreVersion -&gt; StoreVersion -&gt; Bool)
-&gt; (StoreVersion -&gt; StoreVersion -&gt; Bool)
-&gt; (StoreVersion -&gt; StoreVersion -&gt; StoreVersion)
-&gt; (StoreVersion -&gt; StoreVersion -&gt; StoreVersion)
-&gt; Ord StoreVersion
StoreVersion -&gt; StoreVersion -&gt; Bool
StoreVersion -&gt; StoreVersion -&gt; Ordering
StoreVersion -&gt; StoreVersion -&gt; StoreVersion
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: StoreVersion -&gt; StoreVersion -&gt; StoreVersion
$cmin :: StoreVersion -&gt; StoreVersion -&gt; StoreVersion
max :: StoreVersion -&gt; StoreVersion -&gt; StoreVersion
$cmax :: StoreVersion -&gt; StoreVersion -&gt; StoreVersion
&gt;= :: StoreVersion -&gt; StoreVersion -&gt; Bool
$c&gt;= :: StoreVersion -&gt; StoreVersion -&gt; Bool
&gt; :: StoreVersion -&gt; StoreVersion -&gt; Bool
$c&gt; :: StoreVersion -&gt; StoreVersion -&gt; Bool
&lt;= :: StoreVersion -&gt; StoreVersion -&gt; Bool
$c&lt;= :: StoreVersion -&gt; StoreVersion -&gt; Bool
&lt; :: StoreVersion -&gt; StoreVersion -&gt; Bool
$c&lt; :: StoreVersion -&gt; StoreVersion -&gt; Bool
compare :: StoreVersion -&gt; StoreVersion -&gt; Ordering
$ccompare :: StoreVersion -&gt; StoreVersion -&gt; Ordering
$cp1Ord :: Eq StoreVersion
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cStoreVersion"><span id="%24tStoreVersion"><span id="local-6989586621679542214"><span id="local-6989586621679542216"><span id="local-6989586621679542218"><span id="local-6989586621679542220"><span id="local-6989586621679542222"><span id="local-6989586621679542224"><span id="local-6989586621679542226"><span id="local-6989586621679542228"><span id="local-6989586621679542230"><span id="local-6989586621679542232"><span id="local-6989586621679542234"><span id="local-6989586621679542236"><span id="local-6989586621679542238"><span id="local-6989586621679542240"><span class="annot"><span class="annottext">Typeable StoreVersion
DataType
Constr
Typeable StoreVersion
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; StoreVersion -&gt; c StoreVersion)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c StoreVersion)
-&gt; (StoreVersion -&gt; Constr)
-&gt; (StoreVersion -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c StoreVersion))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c StoreVersion))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; StoreVersion -&gt; StoreVersion)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; StoreVersion -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; StoreVersion -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; StoreVersion -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; StoreVersion -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; StoreVersion -&gt; m StoreVersion)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; StoreVersion -&gt; m StoreVersion)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; StoreVersion -&gt; m StoreVersion)
-&gt; Data StoreVersion
StoreVersion -&gt; DataType
StoreVersion -&gt; Constr
(forall b. Data b =&gt; b -&gt; b) -&gt; StoreVersion -&gt; StoreVersion
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; StoreVersion -&gt; c StoreVersion
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c StoreVersion
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; StoreVersion -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; StoreVersion -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; StoreVersion -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; StoreVersion -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; StoreVersion -&gt; m StoreVersion
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; StoreVersion -&gt; m StoreVersion
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c StoreVersion
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; StoreVersion -&gt; c StoreVersion
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c StoreVersion)
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c StoreVersion)
$cStoreVersion :: Constr
$tStoreVersion :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d) -&gt; StoreVersion -&gt; m StoreVersion
$cgmapMo :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; StoreVersion -&gt; m StoreVersion
gmapMp :: (forall d. Data d =&gt; d -&gt; m d) -&gt; StoreVersion -&gt; m StoreVersion
$cgmapMp :: forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; StoreVersion -&gt; m StoreVersion
gmapM :: (forall d. Data d =&gt; d -&gt; m d) -&gt; StoreVersion -&gt; m StoreVersion
$cgmapM :: forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d) -&gt; StoreVersion -&gt; m StoreVersion
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; StoreVersion -&gt; u
$cgmapQi :: forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; StoreVersion -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; StoreVersion -&gt; [u]
$cgmapQ :: forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; StoreVersion -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; StoreVersion -&gt; r
$cgmapQr :: forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; StoreVersion -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; StoreVersion -&gt; r
$cgmapQl :: forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; StoreVersion -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; StoreVersion -&gt; StoreVersion
$cgmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; StoreVersion -&gt; StoreVersion
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c StoreVersion)
$cdataCast2 :: forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c StoreVersion)
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c StoreVersion)
$cdataCast1 :: forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c StoreVersion)
dataTypeOf :: StoreVersion -&gt; DataType
$cdataTypeOf :: StoreVersion -&gt; DataType
toConstr :: StoreVersion -&gt; Constr
$ctoConstr :: StoreVersion -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c StoreVersion
$cgunfold :: forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c StoreVersion
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; StoreVersion -&gt; c StoreVersion
$cgfoldl :: forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; StoreVersion -&gt; c StoreVersion
$cp1Data :: Typeable StoreVersion
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. StoreVersion -&gt; Rep StoreVersion x)
-&gt; (forall x. Rep StoreVersion x -&gt; StoreVersion)
-&gt; Generic StoreVersion
forall x. Rep StoreVersion x -&gt; StoreVersion
forall x. StoreVersion -&gt; Rep StoreVersion x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep StoreVersion x -&gt; StoreVersion
$cfrom :: forall x. StoreVersion -&gt; Rep StoreVersion x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679542202"><span id="local-6989586621679542204"><span id="local-6989586621679542206"><span class="annot"><span class="annottext">Peek StoreVersion
Size StoreVersion
Size StoreVersion
-&gt; (StoreVersion -&gt; Poke ())
-&gt; Peek StoreVersion
-&gt; Store StoreVersion
StoreVersion -&gt; Poke ()
forall a. Size a -&gt; (a -&gt; Poke ()) -&gt; Peek a -&gt; Store a
peek :: Peek StoreVersion
$cpeek :: Peek StoreVersion
poke :: StoreVersion -&gt; Poke ()
$cpoke :: StoreVersion -&gt; Poke ()
size :: Size StoreVersion
$csize :: Size StoreVersion
</span><a href="Data.Store.Impl.html#C%3AStore"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Store</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="hs-comment">-- | Configuration for the version checking of a particular type.</span><span>
</span><span id="line-60"></span><span id="local-6989586621679542199"><span id="local-6989586621679542200"></span></span><span class="hs-keyword">data</span><span> </span><span id="VersionConfig"><span class="annot"><a href="Data.Store.Version.html#VersionConfig"><span class="hs-identifier hs-var">VersionConfig</span></a></span></span><span> </span><span id="local-6989586621679542372"><span class="annot"><a href="#local-6989586621679542372"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="VersionConfig"><span class="annot"><a href="Data.Store.Version.html#VersionConfig"><span class="hs-identifier hs-var">VersionConfig</span></a></span></span><span>
</span><span id="line-61"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="vcExpectedHash"><span class="annot"><span class="annottext">VersionConfig a -&gt; Maybe String
</span><a href="Data.Store.Version.html#vcExpectedHash"><span class="hs-identifier hs-var hs-var">vcExpectedHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-62"></span><span>      </span><span class="hs-comment">-- ^ When set, specifies the hash which is expected to be computed.</span><span>
</span><span id="line-63"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="vcManualName"><span class="annot"><span class="annottext">VersionConfig a -&gt; Maybe String
</span><a href="Data.Store.Version.html#vcManualName"><span class="hs-identifier hs-var hs-var">vcManualName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-64"></span><span>      </span><span class="hs-comment">-- ^ When set, specifies the name to instead use to tag the data.</span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="vcIgnore"><span class="annot"><span class="annottext">VersionConfig a -&gt; Set String
</span><a href="Data.Store.Version.html#vcIgnore"><span class="hs-identifier hs-var hs-var">vcIgnore</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-66"></span><span>      </span><span class="hs-comment">-- ^ DataTypes to ignore.</span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="vcRenames"><span class="annot"><span class="annottext">VersionConfig a -&gt; Map String String
</span><a href="Data.Store.Version.html#vcRenames"><span class="hs-identifier hs-var hs-var">vcRenames</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-68"></span><span>      </span><span class="hs-comment">-- ^ Allowed renamings of datatypes, useful when they move.</span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679542190"><span id="local-6989586621679542192"><span class="annot"><span class="annottext">VersionConfig a -&gt; VersionConfig a -&gt; Bool
(VersionConfig a -&gt; VersionConfig a -&gt; Bool)
-&gt; (VersionConfig a -&gt; VersionConfig a -&gt; Bool)
-&gt; Eq (VersionConfig a)
forall a. VersionConfig a -&gt; VersionConfig a -&gt; Bool
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: VersionConfig a -&gt; VersionConfig a -&gt; Bool
$c/= :: forall a. VersionConfig a -&gt; VersionConfig a -&gt; Bool
== :: VersionConfig a -&gt; VersionConfig a -&gt; Bool
$c== :: forall a. VersionConfig a -&gt; VersionConfig a -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679542184"><span id="local-6989586621679542186"><span id="local-6989586621679542188"><span class="annot"><span class="annottext">Int -&gt; VersionConfig a -&gt; ShowS
[VersionConfig a] -&gt; ShowS
VersionConfig a -&gt; String
(Int -&gt; VersionConfig a -&gt; ShowS)
-&gt; (VersionConfig a -&gt; String)
-&gt; ([VersionConfig a] -&gt; ShowS)
-&gt; Show (VersionConfig a)
forall a. Int -&gt; VersionConfig a -&gt; ShowS
forall a. [VersionConfig a] -&gt; ShowS
forall a. VersionConfig a -&gt; String
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [VersionConfig a] -&gt; ShowS
$cshowList :: forall a. [VersionConfig a] -&gt; ShowS
show :: VersionConfig a -&gt; String
$cshow :: forall a. VersionConfig a -&gt; String
showsPrec :: Int -&gt; VersionConfig a -&gt; ShowS
$cshowsPrec :: forall a. Int -&gt; VersionConfig a -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="%24cVersionConfig"><span id="%24tVersionConfig"><span id="local-6989586621679542155"><span id="local-6989586621679542157"><span id="local-6989586621679542159"><span id="local-6989586621679542161"><span id="local-6989586621679542163"><span id="local-6989586621679542165"><span id="local-6989586621679542167"><span id="local-6989586621679542169"><span id="local-6989586621679542171"><span id="local-6989586621679542173"><span id="local-6989586621679542175"><span id="local-6989586621679542177"><span id="local-6989586621679542179"><span id="local-6989586621679542181"><span class="annot"><span class="annottext">Typeable (VersionConfig a)
DataType
Constr
Typeable (VersionConfig a)
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; VersionConfig a -&gt; c (VersionConfig a))
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (VersionConfig a))
-&gt; (VersionConfig a -&gt; Constr)
-&gt; (VersionConfig a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (VersionConfig a)))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e))
    -&gt; Maybe (c (VersionConfig a)))
-&gt; ((forall b. Data b =&gt; b -&gt; b)
    -&gt; VersionConfig a -&gt; VersionConfig a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; VersionConfig a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r)
    -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; VersionConfig a -&gt; r)
-&gt; (forall u.
    (forall d. Data d =&gt; d -&gt; u) -&gt; VersionConfig a -&gt; [u])
-&gt; (forall u.
    Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; VersionConfig a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; VersionConfig a -&gt; m (VersionConfig a))
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; VersionConfig a -&gt; m (VersionConfig a))
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d)
    -&gt; VersionConfig a -&gt; m (VersionConfig a))
-&gt; Data (VersionConfig a)
VersionConfig a -&gt; DataType
VersionConfig a -&gt; Constr
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (VersionConfig a))
(forall b. Data b =&gt; b -&gt; b) -&gt; VersionConfig a -&gt; VersionConfig a
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; VersionConfig a -&gt; c (VersionConfig a)
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (VersionConfig a)
forall a. Data a =&gt; Typeable (VersionConfig a)
forall a. Data a =&gt; VersionConfig a -&gt; DataType
forall a. Data a =&gt; VersionConfig a -&gt; Constr
forall a.
Data a =&gt;
(forall b. Data b =&gt; b -&gt; b) -&gt; VersionConfig a -&gt; VersionConfig a
forall a u.
Data a =&gt;
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; VersionConfig a -&gt; u
forall a u.
Data a =&gt;
(forall d. Data d =&gt; d -&gt; u) -&gt; VersionConfig a -&gt; [u]
forall a r r'.
Data a =&gt;
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; VersionConfig a -&gt; r
forall a r r'.
Data a =&gt;
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; VersionConfig a -&gt; r
forall a (m :: * -&gt; *).
(Data a, Monad m) =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; VersionConfig a -&gt; m (VersionConfig a)
forall a (m :: * -&gt; *).
(Data a, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; VersionConfig a -&gt; m (VersionConfig a)
forall a (c :: * -&gt; *).
Data a =&gt;
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (VersionConfig a)
forall a (c :: * -&gt; *).
Data a =&gt;
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; VersionConfig a -&gt; c (VersionConfig a)
forall a (t :: * -&gt; *) (c :: * -&gt; *).
(Data a, Typeable t) =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (VersionConfig a))
forall a (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
(Data a, Typeable t) =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c (VersionConfig a))
forall a.
Typeable a
-&gt; (forall (c :: * -&gt; *).
    (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
    -&gt; (forall g. g -&gt; c g) -&gt; a -&gt; c a)
-&gt; (forall (c :: * -&gt; *).
    (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
    -&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c a)
-&gt; (a -&gt; Constr)
-&gt; (a -&gt; DataType)
-&gt; (forall (t :: * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c a))
-&gt; (forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
    Typeable t =&gt;
    (forall d e. (Data d, Data e) =&gt; c (t d e)) -&gt; Maybe (c a))
-&gt; ((forall b. Data b =&gt; b -&gt; b) -&gt; a -&gt; a)
-&gt; (forall r r'.
    (r -&gt; r' -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall r r'.
    (r' -&gt; r -&gt; r) -&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; a -&gt; r)
-&gt; (forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; [u])
-&gt; (forall u. Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; a -&gt; u)
-&gt; (forall (m :: * -&gt; *).
    Monad m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; (forall (m :: * -&gt; *).
    MonadPlus m =&gt;
    (forall d. Data d =&gt; d -&gt; m d) -&gt; a -&gt; m a)
-&gt; Data a
forall u.
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; VersionConfig a -&gt; u
forall u. (forall d. Data d =&gt; d -&gt; u) -&gt; VersionConfig a -&gt; [u]
forall r r'.
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; VersionConfig a -&gt; r
forall r r'.
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; VersionConfig a -&gt; r
forall (m :: * -&gt; *).
Monad m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; VersionConfig a -&gt; m (VersionConfig a)
forall (m :: * -&gt; *).
MonadPlus m =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; VersionConfig a -&gt; m (VersionConfig a)
forall (c :: * -&gt; *).
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (VersionConfig a)
forall (c :: * -&gt; *).
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; VersionConfig a -&gt; c (VersionConfig a)
forall (t :: * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (VersionConfig a))
forall (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
Typeable t =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c (VersionConfig a))
$cVersionConfig :: Constr
$tVersionConfig :: DataType
gmapMo :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; VersionConfig a -&gt; m (VersionConfig a)
$cgmapMo :: forall a (m :: * -&gt; *).
(Data a, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; VersionConfig a -&gt; m (VersionConfig a)
gmapMp :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; VersionConfig a -&gt; m (VersionConfig a)
$cgmapMp :: forall a (m :: * -&gt; *).
(Data a, MonadPlus m) =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; VersionConfig a -&gt; m (VersionConfig a)
gmapM :: (forall d. Data d =&gt; d -&gt; m d)
-&gt; VersionConfig a -&gt; m (VersionConfig a)
$cgmapM :: forall a (m :: * -&gt; *).
(Data a, Monad m) =&gt;
(forall d. Data d =&gt; d -&gt; m d)
-&gt; VersionConfig a -&gt; m (VersionConfig a)
gmapQi :: Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; VersionConfig a -&gt; u
$cgmapQi :: forall a u.
Data a =&gt;
Int -&gt; (forall d. Data d =&gt; d -&gt; u) -&gt; VersionConfig a -&gt; u
gmapQ :: (forall d. Data d =&gt; d -&gt; u) -&gt; VersionConfig a -&gt; [u]
$cgmapQ :: forall a u.
Data a =&gt;
(forall d. Data d =&gt; d -&gt; u) -&gt; VersionConfig a -&gt; [u]
gmapQr :: (r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; VersionConfig a -&gt; r
$cgmapQr :: forall a r r'.
Data a =&gt;
(r' -&gt; r -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; VersionConfig a -&gt; r
gmapQl :: (r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; VersionConfig a -&gt; r
$cgmapQl :: forall a r r'.
Data a =&gt;
(r -&gt; r' -&gt; r)
-&gt; r -&gt; (forall d. Data d =&gt; d -&gt; r') -&gt; VersionConfig a -&gt; r
gmapT :: (forall b. Data b =&gt; b -&gt; b) -&gt; VersionConfig a -&gt; VersionConfig a
$cgmapT :: forall a.
Data a =&gt;
(forall b. Data b =&gt; b -&gt; b) -&gt; VersionConfig a -&gt; VersionConfig a
dataCast2 :: (forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c (VersionConfig a))
$cdataCast2 :: forall a (t :: * -&gt; * -&gt; *) (c :: * -&gt; *).
(Data a, Typeable t) =&gt;
(forall d e. (Data d, Data e) =&gt; c (t d e))
-&gt; Maybe (c (VersionConfig a))
dataCast1 :: (forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (VersionConfig a))
$cdataCast1 :: forall a (t :: * -&gt; *) (c :: * -&gt; *).
(Data a, Typeable t) =&gt;
(forall d. Data d =&gt; c (t d)) -&gt; Maybe (c (VersionConfig a))
dataTypeOf :: VersionConfig a -&gt; DataType
$cdataTypeOf :: forall a. Data a =&gt; VersionConfig a -&gt; DataType
toConstr :: VersionConfig a -&gt; Constr
$ctoConstr :: forall a. Data a =&gt; VersionConfig a -&gt; Constr
gunfold :: (forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (VersionConfig a)
$cgunfold :: forall a (c :: * -&gt; *).
Data a =&gt;
(forall b r. Data b =&gt; c (b -&gt; r) -&gt; c r)
-&gt; (forall r. r -&gt; c r) -&gt; Constr -&gt; c (VersionConfig a)
gfoldl :: (forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; VersionConfig a -&gt; c (VersionConfig a)
$cgfoldl :: forall a (c :: * -&gt; *).
Data a =&gt;
(forall d b. Data d =&gt; c (d -&gt; b) -&gt; d -&gt; c b)
-&gt; (forall g. g -&gt; c g) -&gt; VersionConfig a -&gt; c (VersionConfig a)
$cp1Data :: forall a. Data a =&gt; Typeable (VersionConfig a)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Data</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. VersionConfig a -&gt; Rep (VersionConfig a) x)
-&gt; (forall x. Rep (VersionConfig a) x -&gt; VersionConfig a)
-&gt; Generic (VersionConfig a)
forall x. Rep (VersionConfig a) x -&gt; VersionConfig a
forall x. VersionConfig a -&gt; Rep (VersionConfig a) x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
forall a x. Rep (VersionConfig a) x -&gt; VersionConfig a
forall a x. VersionConfig a -&gt; Rep (VersionConfig a) x
$cto :: forall a x. Rep (VersionConfig a) x -&gt; VersionConfig a
$cfrom :: forall a x. VersionConfig a -&gt; Rep (VersionConfig a) x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span id="local-6989586621679542150"><span class="annot"><a href="Data.Store.Version.html#hashedVersionConfig"><span class="hs-identifier hs-type">hashedVersionConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Store.Version.html#VersionConfig"><span class="hs-identifier hs-type">VersionConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679542150"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-72"></span><span id="hashedVersionConfig"><span class="annot"><span class="annottext">hashedVersionConfig :: String -&gt; VersionConfig a
</span><a href="Data.Store.Version.html#hashedVersionConfig"><span class="hs-identifier hs-var hs-var">hashedVersionConfig</span></a></span></span><span> </span><span id="local-6989586621679542149"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542149"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VersionConfig :: forall a.
Maybe String
-&gt; Maybe String
-&gt; Set String
-&gt; Map String String
-&gt; VersionConfig a
</span><a href="Data.Store.Version.html#VersionConfig"><span class="hs-identifier hs-type">VersionConfig</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">vcExpectedHash :: Maybe String
</span><a href="Data.Store.Version.html#vcExpectedHash"><span class="hs-identifier hs-var">vcExpectedHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542149"><span class="hs-identifier hs-var">hash</span></a></span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">vcManualName :: Maybe String
</span><a href="Data.Store.Version.html#vcManualName"><span class="hs-identifier hs-var">vcManualName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">vcIgnore :: Set String
</span><a href="Data.Store.Version.html#vcIgnore"><span class="hs-identifier hs-var">vcIgnore</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set String
forall a. Set a
</span><span class="hs-identifier hs-var">S.empty</span></span><span>
</span><span id="line-76"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">vcRenames :: Map String String
</span><a href="Data.Store.Version.html#vcRenames"><span class="hs-identifier hs-var">vcRenames</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map String String
forall k a. Map k a
</span><span class="hs-identifier hs-var">M.empty</span></span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span id="local-6989586621679542146"><span class="annot"><a href="Data.Store.Version.html#namedVersionConfig"><span class="hs-identifier hs-type">namedVersionConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Store.Version.html#VersionConfig"><span class="hs-identifier hs-type">VersionConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679542146"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-80"></span><span id="namedVersionConfig"><span class="annot"><span class="annottext">namedVersionConfig :: String -&gt; String -&gt; VersionConfig a
</span><a href="Data.Store.Version.html#namedVersionConfig"><span class="hs-identifier hs-var hs-var">namedVersionConfig</span></a></span></span><span> </span><span id="local-6989586621679542145"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542145"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679542144"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542144"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VersionConfig :: forall a.
Maybe String
-&gt; Maybe String
-&gt; Set String
-&gt; Map String String
-&gt; VersionConfig a
</span><a href="Data.Store.Version.html#VersionConfig"><span class="hs-identifier hs-type">VersionConfig</span></a></span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">vcExpectedHash :: Maybe String
</span><a href="Data.Store.Version.html#vcExpectedHash"><span class="hs-identifier hs-var">vcExpectedHash</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542144"><span class="hs-identifier hs-var">hash</span></a></span><span>
</span><span id="line-82"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">vcManualName :: Maybe String
</span><a href="Data.Store.Version.html#vcManualName"><span class="hs-identifier hs-var">vcManualName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Maybe String
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542145"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">vcIgnore :: Set String
</span><a href="Data.Store.Version.html#vcIgnore"><span class="hs-identifier hs-var">vcIgnore</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set String
forall a. Set a
</span><span class="hs-identifier hs-var">S.empty</span></span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">vcRenames :: Map String String
</span><a href="Data.Store.Version.html#vcRenames"><span class="hs-identifier hs-var">vcRenames</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map String String
forall k a. Map k a
</span><span class="hs-identifier hs-var">M.empty</span></span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span id="local-6989586621679542143"><span class="annot"><a href="Data.Store.Version.html#encodeWithVersionQ"><span class="hs-identifier hs-type">encodeWithVersionQ</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679542143"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Store.Version.html#VersionConfig"><span class="hs-identifier hs-type">VersionConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679542143"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span></span><span>
</span><span id="line-88"></span><span id="encodeWithVersionQ"><span class="annot"><span class="annottext">encodeWithVersionQ :: VersionConfig a -&gt; Q Exp
</span><a href="Data.Store.Version.html#encodeWithVersionQ"><span class="hs-identifier hs-var hs-var">encodeWithVersionQ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WhichFunc -&gt; VersionConfig a -&gt; Q Exp
forall a. Data a =&gt; WhichFunc -&gt; VersionConfig a -&gt; Q Exp
</span><a href="Data.Store.Version.html#impl"><span class="hs-identifier hs-var">impl</span></a></span><span> </span><span class="annot"><span class="annottext">WhichFunc
</span><a href="Data.Store.Version.html#Encode"><span class="hs-identifier hs-var">Encode</span></a></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span id="local-6989586621679542140"><span class="annot"><a href="Data.Store.Version.html#decodeWithVersionQ"><span class="hs-identifier hs-type">decodeWithVersionQ</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679542140"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Store.Version.html#VersionConfig"><span class="hs-identifier hs-type">VersionConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679542140"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span></span><span>
</span><span id="line-91"></span><span id="decodeWithVersionQ"><span class="annot"><span class="annottext">decodeWithVersionQ :: VersionConfig a -&gt; Q Exp
</span><a href="Data.Store.Version.html#decodeWithVersionQ"><span class="hs-identifier hs-var hs-var">decodeWithVersionQ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">WhichFunc -&gt; VersionConfig a -&gt; Q Exp
forall a. Data a =&gt; WhichFunc -&gt; VersionConfig a -&gt; Q Exp
</span><a href="Data.Store.Version.html#impl"><span class="hs-identifier hs-var">impl</span></a></span><span> </span><span class="annot"><span class="annottext">WhichFunc
</span><a href="Data.Store.Version.html#Decode"><span class="hs-identifier hs-var">Decode</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-keyword">data</span><span> </span><span id="WhichFunc"><span class="annot"><a href="Data.Store.Version.html#WhichFunc"><span class="hs-identifier hs-var">WhichFunc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Encode"><span class="annot"><a href="Data.Store.Version.html#Encode"><span class="hs-identifier hs-var">Encode</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Decode"><span class="annot"><a href="Data.Store.Version.html#Decode"><span class="hs-identifier hs-var">Decode</span></a></span></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="annot"><a href="Data.Store.Version.html#impl"><span class="hs-identifier hs-type">impl</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679542364"><span class="annot"><a href="#local-6989586621679542364"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679542364"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Store.Version.html#WhichFunc"><span class="hs-identifier hs-type">WhichFunc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Store.Version.html#VersionConfig"><span class="hs-identifier hs-type">VersionConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679542364"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exp</span></span><span>
</span><span id="line-96"></span><span id="impl"><span class="annot"><span class="annottext">impl :: WhichFunc -&gt; VersionConfig a -&gt; Q Exp
</span><a href="Data.Store.Version.html#impl"><span class="hs-identifier hs-var hs-var">impl</span></a></span></span><span> </span><span id="local-6989586621679542138"><span class="annot"><span class="annottext">WhichFunc
</span><a href="#local-6989586621679542138"><span class="hs-identifier hs-var">wf</span></a></span></span><span> </span><span id="local-6989586621679542137"><span class="annot"><span class="annottext">VersionConfig a
</span><a href="#local-6989586621679542137"><span class="hs-identifier hs-var">vc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679542136"><span class="annot"><span class="annottext">proxy :: Proxy a
</span><a href="#local-6989586621679542136"><span class="hs-identifier hs-var hs-var">proxy</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy a
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679542364"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-98"></span><span>        </span><span id="local-6989586621679542134"><span class="annot"><span class="annottext">info :: ByteString
</span><a href="#local-6989586621679542134"><span class="hs-identifier hs-var hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; ByteString
</span><span class="hs-identifier hs-var">encodeUtf8</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set String -&gt; Map String String -&gt; Proxy a -&gt; String
forall a.
Data a =&gt;
Set String -&gt; Map String String -&gt; Proxy a -&gt; String
</span><a href="Data.Store.Version.html#getStructureInfo"><span class="hs-identifier hs-var">getStructureInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VersionConfig a -&gt; Set String
forall a. VersionConfig a -&gt; Set String
</span><a href="Data.Store.Version.html#vcIgnore"><span class="hs-identifier hs-var hs-var">vcIgnore</span></a></span><span> </span><span class="annot"><span class="annottext">VersionConfig a
</span><a href="#local-6989586621679542137"><span class="hs-identifier hs-var">vc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VersionConfig a -&gt; Map String String
forall a. VersionConfig a -&gt; Map String String
</span><a href="Data.Store.Version.html#vcRenames"><span class="hs-identifier hs-var hs-var">vcRenames</span></a></span><span> </span><span class="annot"><span class="annottext">VersionConfig a
</span><a href="#local-6989586621679542137"><span class="hs-identifier hs-var">vc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Proxy a
</span><a href="#local-6989586621679542136"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>        </span><span id="local-6989586621679542131"><span class="annot"><span class="annottext">hash :: ByteString
</span><a href="#local-6989586621679542131"><span class="hs-identifier hs-var hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">SHA1.hash</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679542134"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-100"></span><span>        </span><span id="local-6989586621679542129"><span class="annot"><span class="annottext">hashb64 :: String
</span><a href="#local-6989586621679542129"><span class="hs-identifier hs-var hs-var">hashb64</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; String
</span><span class="hs-identifier hs-var">BS8.unpack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">B64Url.encode</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679542131"><span class="hs-identifier hs-var">hash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>        </span><span id="local-6989586621679542126"><span class="annot"><span class="annottext">version :: Q Exp
</span><a href="#local-6989586621679542126"><span class="hs-identifier hs-var hs-var">version</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">VersionConfig a -&gt; Maybe String
forall a. VersionConfig a -&gt; Maybe String
</span><a href="Data.Store.Version.html#vcManualName"><span class="hs-identifier hs-var hs-var">vcManualName</span></a></span><span> </span><span class="annot"><span class="annottext">VersionConfig a
</span><a href="#local-6989586621679542137"><span class="hs-identifier hs-var">vc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-102"></span><span>            </span><span class="annot"><span class="annottext">Maybe String
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[e|</span><span> </span><span class="hs-identifier">StoreVersion</span><span> </span><span class="hs-identifier">hash</span><span> </span><span class="hs-special">|]</span><span>
</span><span id="line-103"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679542125"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542125"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[e|</span><span> </span><span class="hs-identifier">StoreVersion</span><span> </span><span class="hs-identifier">name</span><span> </span><span class="hs-special">|]</span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">VersionConfig a -&gt; Maybe String
forall a. VersionConfig a -&gt; Maybe String
</span><a href="Data.Store.Version.html#vcExpectedHash"><span class="hs-identifier hs-var hs-var">vcExpectedHash</span></a></span><span> </span><span class="annot"><span class="annottext">VersionConfig a
</span><a href="#local-6989586621679542137"><span class="hs-identifier hs-var">vc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-105"></span><span>        </span><span class="annot"><span class="annottext">Maybe String
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; Q ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679542124"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542124"><span class="hs-identifier hs-var">expectedHash</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-107"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679542123"><span class="annot"><span class="annottext">shownType :: String
</span><a href="#local-6989586621679542123"><span class="hs-identifier hs-var hs-var">shownType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map String String -&gt; Int -&gt; TypeRep -&gt; ShowS
</span><a href="Data.Store.Version.html#showsQualTypeRep"><span class="hs-identifier hs-var">showsQualTypeRep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VersionConfig a -&gt; Map String String
forall a. VersionConfig a -&gt; Map String String
</span><a href="Data.Store.Version.html#vcRenames"><span class="hs-identifier hs-var hs-var">vcRenames</span></a></span><span> </span><span class="annot"><span class="annottext">VersionConfig a
</span><a href="#local-6989586621679542137"><span class="hs-identifier hs-var">vc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a -&gt; TypeRep
forall k (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="annot"><span class="annottext">Proxy a
</span><a href="#local-6989586621679542136"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-108"></span><span>            </span><span id="local-6989586621679542120"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542120"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q String
</span><a href="Data.Store.Version.html#storeVersionedPath"><span class="hs-identifier hs-var">storeVersionedPath</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542124"><span class="hs-identifier hs-var">expectedHash</span></a></span><span>
</span><span id="line-109"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542129"><span class="hs-identifier hs-var">hashb64</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542124"><span class="hs-identifier hs-var">expectedHash</span></a></span><span>
</span><span id="line-110"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; ByteString -&gt; Q ()
</span><a href="Data.Store.Version.html#writeVersionInfo"><span class="hs-identifier hs-var">writeVersionInfo</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542120"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542123"><span class="hs-identifier hs-var">shownType</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679542134"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-111"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-112"></span><span>                    </span><span id="local-6989586621679542117"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542117"><span class="hs-identifier hs-var">newPath</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q String
</span><a href="Data.Store.Version.html#storeVersionedPath"><span class="hs-identifier hs-var">storeVersionedPath</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542129"><span class="hs-identifier hs-var">hashb64</span></a></span><span>
</span><span id="line-113"></span><span>                    </span><span class="annot"><span class="annottext">String -&gt; String -&gt; ByteString -&gt; Q ()
</span><a href="Data.Store.Version.html#writeVersionInfo"><span class="hs-identifier hs-var">writeVersionInfo</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542117"><span class="hs-identifier hs-var">newPath</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542123"><span class="hs-identifier hs-var">shownType</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679542134"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-114"></span><span>                    </span><span id="local-6989586621679542116"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679542116"><span class="hs-identifier hs-var">exists</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; Q Bool
forall a. IO a -&gt; Q a
</span><span class="hs-identifier hs-var">runIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Bool -&gt; Q Bool) -&gt; IO Bool -&gt; Q Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Bool
</span><span class="hs-identifier hs-var">doesFileExist</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542120"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-115"></span><span>                    </span><span id="local-6989586621679542113"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542113"><span class="hs-identifier hs-var">extraMsg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679542116"><span class="hs-identifier hs-var">exists</span></a></span><span>
</span><span id="line-116"></span><span>                        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q String
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, but no file found with previously stored structural info.&quot;</span></span><span>
</span><span id="line-117"></span><span>                        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; Q String
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, use something like the following to compare with the old structural info:\n\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-118"></span><span>                                     </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;diff -u &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">ShowS
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542120"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">ShowS
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542117"><span class="hs-identifier hs-var">newPath</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>                    </span><span class="annot"><span class="annottext">String -&gt; Q ()
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Q ()) -&gt; String -&gt; Q ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-120"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;For &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542123"><span class="hs-identifier hs-var">shownType</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;,\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-121"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Data.Store.Version expected hash &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">ShowS
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542129"><span class="hs-identifier hs-var">hashb64</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-122"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, but &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">ShowS
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542124"><span class="hs-identifier hs-var">expectedHash</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; is specified.\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-123"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The data used to construct the hash has been written to &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">ShowS
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542117"><span class="hs-identifier hs-var">newPath</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-124"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542113"><span class="hs-identifier hs-var">extraMsg</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n&quot;</span></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679542109"><span class="annot"><span class="annottext">atype :: Q Type
</span><a href="#local-6989586621679542109"><span class="hs-identifier hs-var hs-var">atype</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeRep -&gt; Q Type
</span><span class="hs-identifier hs-var">typeRepToType</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a -&gt; TypeRep
forall k (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="annot"><span class="annottext">Proxy a
</span><a href="#local-6989586621679542136"><span class="hs-identifier hs-var">proxy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">WhichFunc
</span><a href="#local-6989586621679542138"><span class="hs-identifier hs-var">wf</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-127"></span><span>        </span><span class="annot"><span class="annottext">WhichFunc
</span><a href="Data.Store.Version.html#Encode"><span class="hs-identifier hs-var">Encode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[e|</span><span> </span><span class="hs-glyph">\</span><span class="hs-identifier">x</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-identifier">getSize</span><span> </span><span class="hs-identifier">markEncodedVersion</span><span> </span><span class="hs-operator">+</span><span> </span><span class="hs-identifier">getSize</span><span> </span><span class="hs-special">$(</span><span class="hs-identifier">version</span><span class="hs-special">)</span><span> </span><span class="hs-operator">+</span><span> </span><span class="hs-identifier">getSize</span><span> </span><span class="hs-identifier">x</span><span>
</span><span id="line-128"></span><span>                            </span><span class="hs-special">,</span><span> </span><span class="hs-identifier">poke</span><span> </span><span class="hs-identifier">markEncodedVersion</span><span> </span><span class="hs-operator">&gt;&gt;</span><span> </span><span class="hs-identifier">poke</span><span> </span><span class="hs-special">$(</span><span class="hs-identifier">version</span><span class="hs-special">)</span><span> </span><span class="hs-operator">&gt;&gt;</span><span> </span><span class="hs-identifier">poke</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">x</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">$(</span><span class="hs-identifier">atype</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">|]</span><span>
</span><span id="line-129"></span><span>        </span><span class="annot"><span class="annottext">WhichFunc
</span><a href="Data.Store.Version.html#Decode"><span class="hs-identifier hs-var">Decode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[e|</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-130"></span><span>            </span><span class="hs-identifier">peekMagic</span><span> </span><span class="hs-string">&quot;version tag&quot;</span><span> </span><span class="hs-identifier">markEncodedVersion</span><span>
</span><span id="line-131"></span><span>            </span><span class="hs-identifier">gotVersion</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">peek</span><span>
</span><span id="line-132"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier">gotVersion</span><span> </span><span class="hs-operator">/=</span><span> </span><span class="hs-special">$(</span><span class="hs-identifier">version</span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="hs-identifier">fail</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">displayVersionError</span><span> </span><span class="hs-special">$(</span><span class="hs-identifier">version</span><span class="hs-special">)</span><span> </span><span class="hs-identifier">gotVersion</span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="hs-identifier">peek</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier">Peek</span><span> </span><span class="hs-special">$(</span><span class="hs-identifier">atype</span><span class="hs-special">)</span><span> </span><span class="hs-special">|]</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-comment">{-
                            txtWithComments &lt;- runIO $ T.readFile path
                            let txt = T.unlines $ dropWhile (&quot;--&quot; `T.isPrefixOf`) $ T.lines txtWithComments
                                storedHash = BS8.unpack (B64Url.encode (SHA1.hash (encodeUtf8 txt)))
                            if storedHash == expectedHash
                                then return (&quot;, compare with the structural info that matches the hash, found in &quot; ++ show path)
                                else return (&quot;, but the old file found also doesn't match the hash.&quot;)
-}</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="annot"><a href="Data.Store.Version.html#writeVersionInfo"><span class="hs-identifier hs-type">writeVersionInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">BS.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span id="writeVersionInfo"><span class="annot"><span class="annottext">writeVersionInfo :: String -&gt; String -&gt; ByteString -&gt; Q ()
</span><a href="Data.Store.Version.html#writeVersionInfo"><span class="hs-identifier hs-var hs-var">writeVersionInfo</span></a></span></span><span> </span><span id="local-6989586621679542106"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542106"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span id="local-6989586621679542105"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542105"><span class="hs-identifier hs-var">shownType</span></a></span></span><span> </span><span id="local-6989586621679542104"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679542104"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; Q ()
forall a. IO a -&gt; Q a
</span><span class="hs-identifier hs-var">runIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; Q ()) -&gt; IO () -&gt; Q ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; String -&gt; IO ()
</span><span class="hs-identifier hs-var">createDirectoryIfMissing</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier hs-var">takeDirectory</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542106"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Text -&gt; IO ()
</span><span class="hs-identifier hs-var">T.writeFile</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542106"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; IO ()) -&gt; Text -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.unlines</span></span><span> </span><span class="annot"><span class="annottext">([Text] -&gt; Text) -&gt; [Text] -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-149"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;-- Structural info for type &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542105"><span class="hs-identifier hs-var">shownType</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;-- Generated by an invocation of functions in Data.Store.Version&quot;</span></span><span>
</span><span id="line-151"></span><span>        </span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; [Text] -&gt; [Text]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text]
</span><span class="hs-identifier hs-var">T.lines</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><span class="hs-identifier hs-var">decodeUtf8</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679542104"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="annot"><a href="Data.Store.Version.html#storeVersionedPath"><span class="hs-identifier hs-type">storeVersionedPath</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Q</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-154"></span><span id="storeVersionedPath"><span class="annot"><span class="annottext">storeVersionedPath :: String -&gt; Q String
</span><a href="Data.Store.Version.html#storeVersionedPath"><span class="hs-identifier hs-var hs-var">storeVersionedPath</span></a></span></span><span> </span><span id="local-6989586621679542098"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542098"><span class="hs-identifier hs-var">filename</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-155"></span><span>    </span><span id="local-6989586621679542097"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679542097"><span class="hs-identifier hs-var">mstack</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe String) -&gt; Q (Maybe String)
forall a. IO a -&gt; Q a
</span><span class="hs-identifier hs-var">runIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; IO (Maybe String)
</span><span class="hs-identifier hs-var">lookupEnv</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;STACK_EXE&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679542095"><span class="annot"><span class="annottext">dirName :: String
</span><a href="#local-6989586621679542095"><span class="hs-identifier hs-var hs-var">dirName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679542097"><span class="hs-identifier hs-var">mstack</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-157"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.stack-work&quot;</span></span><span>
</span><span id="line-158"></span><span>            </span><span class="annot"><span class="annottext">Maybe String
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;dist&quot;</span></span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Q String
</span><span class="hs-identifier hs-var">pathRelativeToCabalPackage</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542095"><span class="hs-identifier hs-var">dirName</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;store-versioned&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542098"><span class="hs-identifier hs-var">filename</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span class="hs-comment">-- Implementation details</span><span>
</span><span id="line-162"></span><span>
</span><span id="line-163"></span><span class="hs-keyword">data</span><span> </span><span id="S"><span class="annot"><a href="Data.Store.Version.html#S"><span class="hs-identifier hs-var">S</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="S"><span class="annot"><a href="Data.Store.Version.html#S"><span class="hs-identifier hs-var">S</span></a></span></span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="sResults"><span class="annot"><span class="annottext">S -&gt; Map String String
</span><a href="Data.Store.Version.html#sResults"><span class="hs-identifier hs-var hs-var">sResults</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-165"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="sCurResult"><span class="annot"><span class="annottext">S -&gt; String
</span><a href="Data.Store.Version.html#sCurResult"><span class="hs-identifier hs-var hs-var">sCurResult</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-166"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="sFieldNames"><span class="annot"><span class="annottext">S -&gt; [String]
</span><a href="Data.Store.Version.html#sFieldNames"><span class="hs-identifier hs-var hs-var">sFieldNames</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-167"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="annot"><a href="Data.Store.Version.html#getStructureInfo"><span class="hs-identifier hs-type">getStructureInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679542357"><span class="annot"><a href="#local-6989586621679542357"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679542357"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679542357"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-170"></span><span id="getStructureInfo"><span class="annot"><span class="annottext">getStructureInfo :: Set String -&gt; Map String String -&gt; Proxy a -&gt; String
</span><a href="Data.Store.Version.html#getStructureInfo"><span class="hs-identifier hs-var hs-var">getStructureInfo</span></a></span></span><span> </span><span id="local-6989586621679542088"><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679542088"><span class="hs-identifier hs-var">ignore</span></a></span></span><span> </span><span id="local-6989586621679542087"><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542087"><span class="hs-identifier hs-var">renames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map String String -&gt; String
</span><a href="#local-6989586621679542086"><span class="hs-identifier hs-var">renderResults</span></a></span><span> </span><span class="annot"><span class="annottext">(Map String String -&gt; String)
-&gt; (Proxy a -&gt; Map String String) -&gt; Proxy a -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; Map String String
</span><a href="Data.Store.Version.html#sResults"><span class="hs-identifier hs-var hs-var">sResults</span></a></span><span> </span><span class="annot"><span class="annottext">(S -&gt; Map String String)
-&gt; (Proxy a -&gt; S) -&gt; Proxy a -&gt; Map String String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(State S () -&gt; S -&gt; S) -&gt; S -&gt; State S () -&gt; S
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">State S () -&gt; S -&gt; S
forall s a. State s a -&gt; s -&gt; s
</span><span class="hs-identifier hs-var">execState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map String String -&gt; String -&gt; [String] -&gt; S
</span><a href="Data.Store.Version.html#S"><span class="hs-identifier hs-var">S</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
forall k a. Map k a
</span><span class="hs-identifier hs-var">M.empty</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(State S () -&gt; S) -&gt; (Proxy a -&gt; State S ()) -&gt; Proxy a -&gt; S
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Set String -&gt; Map String String -&gt; Proxy a -&gt; State S ()
forall a.
Data a =&gt;
Set String -&gt; Map String String -&gt; Proxy a -&gt; State S ()
</span><a href="Data.Store.Version.html#getStructureInfo%27"><span class="hs-identifier hs-var">getStructureInfo'</span></a></span><span> </span><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679542088"><span class="hs-identifier hs-var">ignore</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542087"><span class="hs-identifier hs-var">renames</span></a></span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-172"></span><span>    </span><span id="local-6989586621679542086"><span class="annot"><span class="annottext">renderResults :: Map String String -&gt; String
</span><a href="#local-6989586621679542086"><span class="hs-identifier hs-var hs-var">renderResults</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">unlines</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; String)
-&gt; (Map String String -&gt; [String]) -&gt; Map String String -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((String, String) -&gt; String) -&gt; [(String, String)] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679542080"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542080"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679542079"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542079"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542080"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542079"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(String, String)] -&gt; [String])
-&gt; (Map String String -&gt; [(String, String)])
-&gt; Map String String
-&gt; [String]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Map String String -&gt; [(String, String)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">M.toAscList</span></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="annot"><a href="Data.Store.Version.html#getStructureInfo%27"><span class="hs-identifier hs-type">getStructureInfo'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679542331"><span class="annot"><a href="#local-6989586621679542331"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679542331"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">S.Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679542331"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">State</span></span><span> </span><span class="annot"><a href="Data.Store.Version.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span id="getStructureInfo%27"><span class="annot"><span class="annottext">getStructureInfo' :: Set String -&gt; Map String String -&gt; Proxy a -&gt; State S ()
</span><a href="Data.Store.Version.html#getStructureInfo%27"><span class="hs-identifier hs-var hs-var">getStructureInfo'</span></a></span></span><span> </span><span id="local-6989586621679542077"><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679542077"><span class="hs-identifier hs-var">ignore</span></a></span></span><span> </span><span id="local-6989586621679542076"><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542076"><span class="hs-identifier hs-var">renames</span></a></span></span><span> </span><span class="annot"><span class="annottext">Proxy a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-176"></span><span>    </span><span id="local-6989586621679542075"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542075"><span class="hs-identifier hs-var">s0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT S Identity S
forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-177"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; State S () -&gt; State S ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Map String String -&gt; Bool
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><span class="hs-identifier hs-var">M.notMember</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542071"><span class="hs-keyword hs-var">label</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S -&gt; Map String String
</span><a href="Data.Store.Version.html#sResults"><span class="hs-identifier hs-var hs-var">sResults</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542075"><span class="hs-identifier hs-var">s0</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(State S () -&gt; State S ()) -&gt; State S () -&gt; State S ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-178"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String -&gt; Set String -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">S.member</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542069"><span class="hs-identifier hs-var">shownType</span></a></span><span> </span><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679542077"><span class="hs-identifier hs-var">ignore</span></a></span><span>
</span><span id="line-179"></span><span>            </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; State S ()
forall (m :: * -&gt; *). Monad m =&gt; String -&gt; StateT S m ()
</span><a href="#local-6989586621679542068"><span class="hs-identifier hs-var">setResult</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; ignored\n&quot;</span></span><span>
</span><span id="line-180"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">DataType -&gt; DataRep
</span><span class="hs-identifier hs-var">dataTypeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; DataType
forall a. Data a =&gt; a -&gt; DataType
</span><span class="hs-identifier hs-var">dataTypeOf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
forall a. HasCallStack =&gt; a
</span><span class="hs-identifier hs-var">undefined</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679542331"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-181"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">AlgRep</span></span><span> </span><span id="local-6989586621679542063"><span class="annot"><span class="annottext">[Constr]
</span><a href="#local-6989586621679542063"><span class="hs-identifier hs-var">cs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-182"></span><span>                    </span><span class="annot"><span class="annottext">String -&gt; State S ()
forall (m :: * -&gt; *). Monad m =&gt; String -&gt; StateT S m ()
</span><a href="#local-6989586621679542068"><span class="hs-identifier hs-var">setResult</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-183"></span><span>                    </span><span class="annot"><span class="annottext">((Bool, Constr) -&gt; State S ()) -&gt; [(Bool, Constr)] -&gt; State S ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">(Bool, Constr) -&gt; State S ()
</span><a href="#local-6989586621679542061"><span class="hs-identifier hs-var">goConstr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Bool] -&gt; [Constr] -&gt; [(Bool, Constr)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [Bool] -&gt; [Bool]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; [Bool]
forall a. a -&gt; [a]
</span><span class="hs-identifier hs-var">repeat</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Constr]
</span><a href="#local-6989586621679542063"><span class="hs-identifier hs-var">cs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>                    </span><span id="local-6989586621679542059"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542059"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; String) -&gt; StateT S Identity String
forall (m :: * -&gt; *) s a. Monad m =&gt; (s -&gt; a) -&gt; StateT s m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; String
</span><a href="Data.Store.Version.html#sCurResult"><span class="hs-identifier hs-var hs-var">sCurResult</span></a></span><span>
</span><span id="line-185"></span><span>                    </span><span class="annot"><span class="annottext">String -&gt; State S ()
forall (m :: * -&gt; *). Monad m =&gt; String -&gt; StateT S m ()
</span><a href="#local-6989586621679542068"><span class="hs-identifier hs-var">setResult</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[Constr] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Constr]
</span><a href="#local-6989586621679542063"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542059"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542059"><span class="hs-identifier hs-var">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>                </span><span class="annot"><span class="annottext">DataRep
</span><span class="hs-identifier hs-var">IntRep</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; State S ()
forall (m :: * -&gt; *). Monad m =&gt; String -&gt; StateT S m ()
</span><a href="#local-6989586621679542068"><span class="hs-identifier hs-var">setResult</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; has IntRep\n&quot;</span></span><span>
</span><span id="line-187"></span><span>                </span><span class="annot"><span class="annottext">DataRep
</span><span class="hs-identifier hs-var">FloatRep</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; State S ()
forall (m :: * -&gt; *). Monad m =&gt; String -&gt; StateT S m ()
</span><a href="#local-6989586621679542068"><span class="hs-identifier hs-var">setResult</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; has FloatRep\n&quot;</span></span><span>
</span><span id="line-188"></span><span>                </span><span class="annot"><span class="annottext">DataRep
</span><span class="hs-identifier hs-var">CharRep</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; State S ()
forall (m :: * -&gt; *). Monad m =&gt; String -&gt; StateT S m ()
</span><a href="#local-6989586621679542068"><span class="hs-identifier hs-var">setResult</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; has CharRep\n&quot;</span></span><span>
</span><span id="line-189"></span><span>                </span><span class="annot"><span class="annottext">DataRep
</span><span class="hs-identifier hs-var">NoRep</span></span><span>
</span><span id="line-190"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">String -&gt; Set String -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">S.member</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542069"><span class="hs-identifier hs-var">shownType</span></a></span><span> </span><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679542077"><span class="hs-identifier hs-var">ignore</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; State S ()
forall (m :: * -&gt; *). Monad m =&gt; String -&gt; StateT S m ()
</span><a href="#local-6989586621679542068"><span class="hs-identifier hs-var">setResult</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; has NoRep\n&quot;</span></span><span>
</span><span id="line-191"></span><span>                    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; State S ()
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; State S ()) -&gt; String -&gt; State S ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-192"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nNoRep in Data.Store.Version for &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">ShowS
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542069"><span class="hs-identifier hs-var">shownType</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-193"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.\nIn the future it will be possible to statically &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-194"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;declare a global serialization version for this type. &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-195"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nUntil then you will need to use 'vcIgnore', and &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-196"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;understand that serialization changes for affected types &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-197"></span><span>                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;will not be detected.\n&quot;</span></span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-199"></span><span>    </span><span id="local-6989586621679542068"><span class="annot"><span class="annottext">setResult :: String -&gt; StateT S m ()
</span><a href="#local-6989586621679542068"><span class="hs-identifier hs-var hs-var">setResult</span></a></span></span><span> </span><span id="local-6989586621679542052"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542052"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-200"></span><span>         </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S m ()
forall (m :: * -&gt; *) s. Monad m =&gt; (s -&gt; s) -&gt; StateT s m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679542050"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542050"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S :: Map String String -&gt; String -&gt; [String] -&gt; S
</span><a href="Data.Store.Version.html#S"><span class="hs-identifier hs-type">S</span></a></span><span>
</span><span id="line-201"></span><span>             </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sResults :: Map String String
</span><a href="Data.Store.Version.html#sResults"><span class="hs-identifier hs-var">sResults</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Map String String -&gt; Map String String
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">M.insert</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542071"><span class="hs-keyword hs-var">label</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542052"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S -&gt; Map String String
</span><a href="Data.Store.Version.html#sResults"><span class="hs-identifier hs-var hs-var">sResults</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542050"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sCurResult :: String
</span><a href="Data.Store.Version.html#sCurResult"><span class="hs-identifier hs-var">sCurResult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-203"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sFieldNames :: [String]
</span><a href="Data.Store.Version.html#sFieldNames"><span class="hs-identifier hs-var">sFieldNames</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-204"></span><span>             </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-205"></span><span>    </span><span id="local-6989586621679542071"><span class="annot"><span class="annottext">label :: String
</span><a href="#local-6989586621679542071"><span class="hs-keyword hs-var hs-var">label</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;data-type &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542069"><span class="hs-identifier hs-var">shownType</span></a></span><span>
</span><span id="line-206"></span><span>    </span><span id="local-6989586621679542069"><span class="annot"><span class="annottext">shownType :: String
</span><a href="#local-6989586621679542069"><span class="hs-identifier hs-var hs-var">shownType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map String String -&gt; Int -&gt; TypeRep -&gt; ShowS
</span><a href="Data.Store.Version.html#showsQualTypeRep"><span class="hs-identifier hs-var">showsQualTypeRep</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542076"><span class="hs-identifier hs-var">renames</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a -&gt; TypeRep
forall k (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy a
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679542331"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-207"></span><span>    </span><span class="annot"><a href="#local-6989586621679542061"><span class="hs-identifier hs-type">goConstr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Constr</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">State</span></span><span> </span><span class="annot"><a href="Data.Store.Version.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>    </span><span id="local-6989586621679542061"><span class="annot"><span class="annottext">goConstr :: (Bool, Constr) -&gt; State S ()
</span><a href="#local-6989586621679542061"><span class="hs-identifier hs-var hs-var">goConstr</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679542048"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679542048"><span class="hs-identifier hs-var">isFirst</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679542047"><span class="annot"><span class="annottext">Constr
</span><a href="#local-6989586621679542047"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-209"></span><span>        </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; State S ()
forall (m :: * -&gt; *) s. Monad m =&gt; (s -&gt; s) -&gt; StateT s m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679542046"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542046"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542046"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-210"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sFieldNames :: [String]
</span><a href="Data.Store.Version.html#sFieldNames"><span class="hs-identifier hs-var">sFieldNames</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Constr -&gt; [String]
</span><span class="hs-identifier hs-var">constrFields</span></span><span> </span><span class="annot"><span class="annottext">Constr
</span><a href="#local-6989586621679542047"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; String) -&gt; [Int] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679542044"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679542044"><span class="hs-identifier hs-var">ix</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;slot &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679542044"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span>
</span><span id="line-211"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sCurResult :: String
</span><a href="Data.Store.Version.html#sCurResult"><span class="hs-identifier hs-var">sCurResult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">S -&gt; String
</span><a href="Data.Store.Version.html#sCurResult"><span class="hs-identifier hs-var hs-var">sCurResult</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542046"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679542048"><span class="hs-identifier hs-var">isFirst</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n  = &quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;  | &quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Constr -&gt; String
</span><span class="hs-identifier hs-var">showConstr</span></span><span> </span><span class="annot"><span class="annottext">Constr
</span><a href="#local-6989586621679542047"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; {\n&quot;</span></span><span>
</span><span id="line-212"></span><span>            </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>        </span><span class="annot"><span class="annottext">StateT S Identity a -&gt; State S ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall d. Data d =&gt; StateT S Identity d)
-&gt; Constr -&gt; StateT S Identity a
forall (m :: * -&gt; *) a.
(Monad m, Data a) =&gt;
(forall d. Data d =&gt; m d) -&gt; Constr -&gt; m a
</span><span class="hs-identifier hs-var">fromConstrM</span></span><span> </span><span class="annot"><span class="annottext">forall d. Data d =&gt; StateT S Identity d
</span><a href="#local-6989586621679542040"><span class="hs-identifier hs-var">goField</span></a></span><span> </span><span class="annot"><span class="annottext">Constr
</span><a href="#local-6989586621679542047"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">State</span></span><span> </span><span class="annot"><a href="Data.Store.Version.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679542331"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>        </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; State S ()
forall (m :: * -&gt; *) s. Monad m =&gt; (s -&gt; s) -&gt; StateT s m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679542039"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542039"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542039"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sCurResult :: String
</span><a href="Data.Store.Version.html#sCurResult"><span class="hs-identifier hs-var">sCurResult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">S -&gt; String
</span><a href="Data.Store.Version.html#sCurResult"><span class="hs-identifier hs-var hs-var">sCurResult</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542039"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;  }\n&quot;</span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><a href="#local-6989586621679542040"><span class="hs-identifier hs-type">goField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679542038"><span class="annot"><a href="#local-6989586621679542038"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Data</span></span><span> </span><span class="annot"><a href="#local-6989586621679542038"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">State</span></span><span> </span><span class="annot"><a href="Data.Store.Version.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679542038"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-216"></span><span>    </span><span id="local-6989586621679542040"><span class="annot"><span class="annottext">goField :: State S b
</span><a href="#local-6989586621679542040"><span class="hs-identifier hs-var hs-var">goField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-217"></span><span>        </span><span id="local-6989586621679542037"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542037"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT S Identity S
forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-218"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">S -&gt; [String]
</span><a href="Data.Store.Version.html#sFieldNames"><span class="hs-identifier hs-var hs-var">sFieldNames</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542037"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-219"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; State S b
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;impossible case in getStructureInfo'&quot;</span></span><span>
</span><span id="line-220"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621679542036"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542036"><span class="hs-identifier hs-var">name</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679542035"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679542035"><span class="hs-identifier hs-var">names</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-221"></span><span>                </span><span class="annot"><span class="annottext">Set String -&gt; Map String String -&gt; Proxy b -&gt; State S ()
forall a.
Data a =&gt;
Set String -&gt; Map String String -&gt; Proxy a -&gt; State S ()
</span><a href="Data.Store.Version.html#getStructureInfo%27"><span class="hs-identifier hs-var">getStructureInfo'</span></a></span><span> </span><span class="annot"><span class="annottext">Set String
</span><a href="#local-6989586621679542077"><span class="hs-identifier hs-var">ignore</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542076"><span class="hs-identifier hs-var">renames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy b
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679542038"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-222"></span><span>                </span><span id="local-6989586621679542034"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542034"><span class="hs-identifier hs-var">s'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT S Identity S
forall (m :: * -&gt; *) s. Monad m =&gt; StateT s m s
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-223"></span><span>                </span><span class="annot"><span class="annottext">S -&gt; State S ()
forall (m :: * -&gt; *) s. Monad m =&gt; s -&gt; StateT s m ()
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542037"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-224"></span><span>                    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sResults :: Map String String
</span><a href="Data.Store.Version.html#sResults"><span class="hs-identifier hs-var">sResults</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">S -&gt; Map String String
</span><a href="Data.Store.Version.html#sResults"><span class="hs-identifier hs-var hs-var">sResults</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542034"><span class="hs-identifier hs-var">s'</span></a></span><span>
</span><span id="line-225"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sCurResult :: String
</span><a href="Data.Store.Version.html#sCurResult"><span class="hs-identifier hs-var">sCurResult</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">S -&gt; String
</span><a href="Data.Store.Version.html#sCurResult"><span class="hs-identifier hs-var hs-var">sCurResult</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621679542037"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;    &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542036"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; :: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Map String String -&gt; Int -&gt; TypeRep -&gt; ShowS
</span><a href="Data.Store.Version.html#showsQualTypeRep"><span class="hs-identifier hs-var">showsQualTypeRep</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542076"><span class="hs-identifier hs-var">renames</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy b -&gt; TypeRep
forall k (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy b
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679542038"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n&quot;</span></span><span>
</span><span id="line-226"></span><span>                    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sFieldNames :: [String]
</span><a href="Data.Store.Version.html#sFieldNames"><span class="hs-identifier hs-var">sFieldNames</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679542035"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-227"></span><span>                    </span><span class="hs-special">}</span><span>
</span><span id="line-228"></span><span>                </span><span class="annot"><span class="annottext">b -&gt; State S b
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; b
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;unexpected evaluation&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="annot"><a href="Data.Store.Version.html#showsQualTypeRep"><span class="hs-identifier hs-type">showsQualTypeRep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TypeRep</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShowS</span></span><span>
</span><span id="line-231"></span><span id="showsQualTypeRep"><span class="annot"><span class="annottext">showsQualTypeRep :: Map String String -&gt; Int -&gt; TypeRep -&gt; ShowS
</span><a href="Data.Store.Version.html#showsQualTypeRep"><span class="hs-identifier hs-var hs-var">showsQualTypeRep</span></a></span></span><span> </span><span id="local-6989586621679542032"><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542032"><span class="hs-identifier hs-var">renames</span></a></span></span><span> </span><span id="local-6989586621679542031"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679542031"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679542030"><span class="annot"><span class="annottext">TypeRep
</span><a href="#local-6989586621679542030"><span class="hs-identifier hs-var">tyrep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679542029"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679542029"><span class="hs-identifier hs-var">tycon</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679542028"><span class="annot"><span class="annottext">[TypeRep]
</span><a href="#local-6989586621679542028"><span class="hs-identifier hs-var">tys</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeRep -&gt; (TyCon, [TypeRep])
</span><span class="hs-identifier hs-var">splitTyConApp</span></span><span> </span><span class="annot"><span class="annottext">TypeRep
</span><a href="#local-6989586621679542030"><span class="hs-identifier hs-var">tyrep</span></a></span><span>
</span><span id="line-233"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[TypeRep]
</span><a href="#local-6989586621679542028"><span class="hs-identifier hs-var">tys</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-234"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map String String -&gt; TyCon -&gt; ShowS
</span><a href="Data.Store.Version.html#showsQualTyCon"><span class="hs-identifier hs-var">showsQualTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542032"><span class="hs-identifier hs-var">renames</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679542029"><span class="hs-identifier hs-var">tycon</span></a></span><span>
</span><span id="line-235"></span><span>        </span><span class="hs-special">[</span><span id="local-6989586621679542025"><span class="annot"><span class="annottext">TypeRep
</span><a href="#local-6989586621679542025"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679542029"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="Data.Store.Version.html#tcList"><span class="hs-identifier hs-var">tcList</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char -&gt; ShowS
</span><span class="hs-identifier hs-var">showChar</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'['</span></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Map String String -&gt; Int -&gt; TypeRep -&gt; ShowS
</span><a href="Data.Store.Version.html#showsQualTypeRep"><span class="hs-identifier hs-var">showsQualTypeRep</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542032"><span class="hs-identifier hs-var">renames</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">TypeRep
</span><a href="#local-6989586621679542025"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; ShowS
</span><span class="hs-identifier hs-var">showChar</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">']'</span></span><span>
</span><span id="line-236"></span><span>          </span><span class="hs-keyword">where</span><span>
</span><span id="line-237"></span><span>        </span><span class="hs-special">[</span><span id="local-6989586621679542022"><span class="annot"><span class="annottext">TypeRep
</span><a href="#local-6989586621679542022"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679542021"><span class="annot"><span class="annottext">TypeRep
</span><a href="#local-6989586621679542021"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679542029"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; TyCon -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="Data.Store.Version.html#tcFun"><span class="hs-identifier hs-var">tcFun</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; ShowS -&gt; ShowS
</span><span class="hs-identifier hs-var">showParen</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679542031"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ShowS -&gt; ShowS) -&gt; ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-238"></span><span>                                     </span><span class="annot"><span class="annottext">Map String String -&gt; Int -&gt; TypeRep -&gt; ShowS
</span><a href="Data.Store.Version.html#showsQualTypeRep"><span class="hs-identifier hs-var">showsQualTypeRep</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542032"><span class="hs-identifier hs-var">renames</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">9</span></span><span> </span><span class="annot"><span class="annottext">TypeRep
</span><a href="#local-6989586621679542022"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span>
</span><span id="line-239"></span><span>                                     </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; -&gt; &quot;</span></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span>
</span><span id="line-240"></span><span>                                     </span><span class="annot"><span class="annottext">Map String String -&gt; Int -&gt; TypeRep -&gt; ShowS
</span><a href="Data.Store.Version.html#showsQualTypeRep"><span class="hs-identifier hs-var">showsQualTypeRep</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542032"><span class="hs-identifier hs-var">renames</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">8</span></span><span> </span><span class="annot"><span class="annottext">TypeRep
</span><a href="#local-6989586621679542021"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-241"></span><span>        </span><span id="local-6989586621679542016"><span class="annot"><span class="annottext">[TypeRep]
</span><a href="#local-6989586621679542016"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; Bool
</span><a href="Data.Store.Version.html#isTupleTyCon"><span class="hs-identifier hs-var">isTupleTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679542029"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map String String -&gt; [TypeRep] -&gt; ShowS
</span><a href="Data.Store.Version.html#showTuple"><span class="hs-identifier hs-var">showTuple</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542032"><span class="hs-identifier hs-var">renames</span></a></span><span> </span><span class="annot"><span class="annottext">[TypeRep]
</span><a href="#local-6989586621679542016"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-242"></span><span>           </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-243"></span><span>                </span><span class="annot"><span class="annottext">Bool -&gt; ShowS -&gt; ShowS
</span><span class="hs-identifier hs-var">showParen</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679542031"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">9</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ShowS -&gt; ShowS) -&gt; ShowS -&gt; ShowS
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-244"></span><span>                </span><span class="annot"><span class="annottext">Map String String -&gt; TyCon -&gt; ShowS
</span><a href="Data.Store.Version.html#showsQualTyCon"><span class="hs-identifier hs-var">showsQualTyCon</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542032"><span class="hs-identifier hs-var">renames</span></a></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679542029"><span class="hs-identifier hs-var">tycon</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span>
</span><span id="line-245"></span><span>                </span><span class="annot"><span class="annottext">Char -&gt; ShowS
</span><span class="hs-identifier hs-var">showChar</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span>      </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span>
</span><span id="line-246"></span><span>                </span><span class="annot"><span class="annottext">Map String String -&gt; ShowS -&gt; [TypeRep] -&gt; ShowS
</span><a href="Data.Store.Version.html#showArgs"><span class="hs-identifier hs-var">showArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542032"><span class="hs-identifier hs-var">renames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; ShowS
</span><span class="hs-identifier hs-var">showChar</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeRep]
</span><a href="#local-6989586621679542028"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span class="annot"><a href="Data.Store.Version.html#showsQualTyCon"><span class="hs-identifier hs-type">showsQualTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyCon</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShowS</span></span><span>
</span><span id="line-249"></span><span id="showsQualTyCon"><span class="annot"><span class="annottext">showsQualTyCon :: Map String String -&gt; TyCon -&gt; ShowS
</span><a href="Data.Store.Version.html#showsQualTyCon"><span class="hs-identifier hs-var hs-var">showsQualTyCon</span></a></span></span><span> </span><span id="local-6989586621679542012"><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542012"><span class="hs-identifier hs-var">renames</span></a></span></span><span> </span><span id="local-6989586621679542011"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679542011"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-identifier hs-var">showString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String -&gt; Map String String -&gt; String
forall k a. Ord k =&gt; a -&gt; k -&gt; Map k a -&gt; a
</span><span class="hs-identifier hs-var">M.findWithDefault</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542009"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679542009"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542012"><span class="hs-identifier hs-var">renames</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-251"></span><span>    </span><span id="local-6989586621679542009"><span class="annot"><span class="annottext">name :: String
</span><a href="#local-6989586621679542009"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; String
</span><span class="hs-identifier hs-var">tyConModule</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679542011"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; String
</span><span class="hs-identifier hs-var">tyConName</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679542011"><span class="hs-identifier hs-var">tc</span></a></span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="annot"><a href="Data.Store.Version.html#isTupleTyCon"><span class="hs-identifier hs-type">isTupleTyCon</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyCon</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-254"></span><span id="isTupleTyCon"><span class="annot"><span class="annottext">isTupleTyCon :: TyCon -&gt; Bool
</span><a href="Data.Store.Version.html#isTupleTyCon"><span class="hs-identifier hs-var hs-var">isTupleTyCon</span></a></span></span><span> </span><span id="local-6989586621679542006"><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679542006"><span class="hs-identifier hs-var">tc</span></a></span></span><span>
</span><span id="line-255"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'('</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">','</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TyCon -&gt; String
</span><span class="hs-identifier hs-var">tyConName</span></span><span> </span><span class="annot"><span class="annottext">TyCon
</span><a href="#local-6989586621679542006"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-256"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>                   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span class="annot"><a href="Data.Store.Version.html#showArgs"><span class="hs-identifier hs-type">showArgs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShowS</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TypeRep</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShowS</span></span><span>
</span><span id="line-259"></span><span id="showArgs"><span class="annot"><span class="annottext">showArgs :: Map String String -&gt; ShowS -&gt; [TypeRep] -&gt; ShowS
</span><a href="Data.Store.Version.html#showArgs"><span class="hs-identifier hs-var hs-var">showArgs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><span class="hs-identifier">_</span></span><span>       </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShowS
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-260"></span><span class="annot"><a href="Data.Store.Version.html#showArgs"><span class="hs-identifier hs-var">showArgs</span></a></span><span> </span><span id="local-6989586621679542004"><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542004"><span class="hs-identifier hs-var">renames</span></a></span></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-special">[</span><span id="local-6989586621679542003"><span class="annot"><span class="annottext">TypeRep
</span><a href="#local-6989586621679542003"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">]</span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map String String -&gt; Int -&gt; TypeRep -&gt; ShowS
</span><a href="Data.Store.Version.html#showsQualTypeRep"><span class="hs-identifier hs-var">showsQualTypeRep</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542004"><span class="hs-identifier hs-var">renames</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">TypeRep
</span><a href="#local-6989586621679542003"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-261"></span><span class="annot"><a href="Data.Store.Version.html#showArgs"><span class="hs-identifier hs-var">showArgs</span></a></span><span> </span><span id="local-6989586621679542002"><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542002"><span class="hs-identifier hs-var">renames</span></a></span></span><span> </span><span id="local-6989586621679542001"><span class="annot"><span class="annottext">ShowS
</span><a href="#local-6989586621679542001"><span class="hs-identifier hs-var">sep</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679542000"><span class="annot"><span class="annottext">TypeRep
</span><a href="#local-6989586621679542000"><span class="hs-identifier hs-var">a</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679541999"><span class="annot"><span class="annottext">[TypeRep]
</span><a href="#local-6989586621679541999"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map String String -&gt; Int -&gt; TypeRep -&gt; ShowS
</span><a href="Data.Store.Version.html#showsQualTypeRep"><span class="hs-identifier hs-var">showsQualTypeRep</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542002"><span class="hs-identifier hs-var">renames</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">TypeRep
</span><a href="#local-6989586621679542000"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="#local-6989586621679542001"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Map String String -&gt; ShowS -&gt; [TypeRep] -&gt; ShowS
</span><a href="Data.Store.Version.html#showArgs"><span class="hs-identifier hs-var">showArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679542002"><span class="hs-identifier hs-var">renames</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="#local-6989586621679542001"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="annot"><span class="annottext">[TypeRep]
</span><a href="#local-6989586621679541999"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span class="annot"><a href="Data.Store.Version.html#showTuple"><span class="hs-identifier hs-type">showTuple</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">M.Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TypeRep</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShowS</span></span><span>
</span><span id="line-264"></span><span id="showTuple"><span class="annot"><span class="annottext">showTuple :: Map String String -&gt; [TypeRep] -&gt; ShowS
</span><a href="Data.Store.Version.html#showTuple"><span class="hs-identifier hs-var hs-var">showTuple</span></a></span></span><span> </span><span id="local-6989586621679541998"><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679541998"><span class="hs-identifier hs-var">renames</span></a></span></span><span> </span><span id="local-6989586621679541997"><span class="annot"><span class="annottext">[TypeRep]
</span><a href="#local-6989586621679541997"><span class="hs-identifier hs-var">args</span></a></span></span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; ShowS
</span><span class="hs-identifier hs-var">showChar</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'('</span></span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Map String String -&gt; ShowS -&gt; [TypeRep] -&gt; ShowS
</span><a href="Data.Store.Version.html#showArgs"><span class="hs-identifier hs-var">showArgs</span></a></span><span> </span><span class="annot"><span class="annottext">Map String String
</span><a href="#local-6989586621679541998"><span class="hs-identifier hs-var">renames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; ShowS
</span><span class="hs-identifier hs-var">showChar</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">','</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[TypeRep]
</span><a href="#local-6989586621679541997"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="annot"><span class="annottext">ShowS -&gt; ShowS -&gt; ShowS
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; ShowS
</span><span class="hs-identifier hs-var">showChar</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">')'</span></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="annot"><a href="Data.Store.Version.html#tcList"><span class="hs-identifier hs-type">tcList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyCon</span></span><span>
</span><span id="line-270"></span><span id="tcList"><span class="annot"><span class="annottext">tcList :: TyCon
</span><a href="Data.Store.Version.html#tcList"><span class="hs-identifier hs-var hs-var">tcList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy [()] -&gt; TyCon
forall a. Typeable a =&gt; Proxy a -&gt; TyCon
</span><a href="Data.Store.Version.html#tyConOf"><span class="hs-identifier hs-var">tyConOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy [()]
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="annot"><a href="Data.Store.Version.html#tcFun"><span class="hs-identifier hs-type">tcFun</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyCon</span></span><span>
</span><span id="line-273"></span><span id="tcFun"><span class="annot"><span class="annottext">tcFun :: TyCon
</span><a href="Data.Store.Version.html#tcFun"><span class="hs-identifier hs-var hs-var">tcFun</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Proxy (Int -&gt; Int) -&gt; TyCon
forall a. Typeable a =&gt; Proxy a -&gt; TyCon
</span><a href="Data.Store.Version.html#tyConOf"><span class="hs-identifier hs-var">tyConOf</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy (Int -&gt; Int)
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span id="local-6989586621679542286"><span class="annot"><a href="Data.Store.Version.html#tyConOf"><span class="hs-identifier hs-type">tyConOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679542286"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679542286"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TyCon</span></span></span><span>
</span><span id="line-276"></span><span id="tyConOf"><span class="annot"><span class="annottext">tyConOf :: Proxy a -&gt; TyCon
</span><a href="Data.Store.Version.html#tyConOf"><span class="hs-identifier hs-var hs-var">tyConOf</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeRep -&gt; TyCon
</span><span class="hs-identifier hs-var">typeRepTyCon</span></span><span> </span><span class="annot"><span class="annottext">(TypeRep -&gt; TyCon) -&gt; (Proxy a -&gt; TypeRep) -&gt; Proxy a -&gt; TyCon
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Proxy a -&gt; TypeRep
forall k (proxy :: k -&gt; *) (a :: k).
Typeable a =&gt;
proxy a -&gt; TypeRep
</span><span class="hs-identifier hs-var">typeRep</span></span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="annot"><a href="Data.Store.Version.html#displayVersionError"><span class="hs-identifier hs-type">displayVersionError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Store.Version.html#StoreVersion"><span class="hs-identifier hs-type">StoreVersion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Store.Version.html#StoreVersion"><span class="hs-identifier hs-type">StoreVersion</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-279"></span><span id="displayVersionError"><span class="annot"><span class="annottext">displayVersionError :: StoreVersion -&gt; StoreVersion -&gt; String
</span><a href="Data.Store.Version.html#displayVersionError"><span class="hs-identifier hs-var hs-var">displayVersionError</span></a></span></span><span> </span><span id="local-6989586621679541993"><span class="annot"><span class="annottext">StoreVersion
</span><a href="#local-6989586621679541993"><span class="hs-identifier hs-var">expectedVersion</span></a></span></span><span> </span><span id="local-6989586621679541992"><span class="annot"><span class="annottext">StoreVersion
</span><a href="#local-6989586621679541992"><span class="hs-identifier hs-var">receivedVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-280"></span><span>    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Mismatch detected by Data.Store.Version - expected &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-281"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OnDecodeError -&gt; ByteString -&gt; Text
</span><span class="hs-identifier hs-var">decodeUtf8With</span></span><span> </span><span class="annot"><span class="annottext">OnDecodeError
</span><span class="hs-identifier hs-var">lenientDecode</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StoreVersion -&gt; ByteString
</span><a href="Data.Store.Version.html#unStoreVersion"><span class="hs-identifier hs-var hs-var">unStoreVersion</span></a></span><span> </span><span class="annot"><span class="annottext">StoreVersion
</span><a href="#local-6989586621679541993"><span class="hs-identifier hs-var">expectedVersion</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; but got &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-282"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OnDecodeError -&gt; ByteString -&gt; Text
</span><span class="hs-identifier hs-var">decodeUtf8With</span></span><span> </span><span class="annot"><span class="annottext">OnDecodeError
</span><span class="hs-identifier hs-var">lenientDecode</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StoreVersion -&gt; ByteString
</span><a href="Data.Store.Version.html#unStoreVersion"><span class="hs-identifier hs-var hs-var">unStoreVersion</span></a></span><span> </span><span class="annot"><span class="annottext">StoreVersion
</span><a href="#local-6989586621679541992"><span class="hs-identifier hs-var">receivedVersion</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span class="annot"><a href="Data.Store.Version.html#markEncodedVersion"><span class="hs-identifier hs-type">markEncodedVersion</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word32</span></span><span>
</span><span id="line-285"></span><span id="markEncodedVersion"><span class="annot"><span class="annottext">markEncodedVersion :: Word32
</span><a href="Data.Store.Version.html#markEncodedVersion"><span class="hs-identifier hs-var hs-var">markEncodedVersion</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word32
</span><span class="hs-number">3908297288</span></span><span>
</span><span id="line-286"></span></pre></body></html>