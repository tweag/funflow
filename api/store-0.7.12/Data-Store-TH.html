<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Data.Store.TH</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">store-0.7.12: Fast binary serialization</span><ul class="links" id="page-menu"><li><a href="src/Data.Store.TH.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.Store.TH</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Testing Store instances</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module exports TH utilities intended to be useful to users.</p><p><code><a href="Data-Store-TH.html#v:makeStore" title="Data.Store.TH">makeStore</a></code> can be used to generate a <code><a href="Data-Store-Internal.html#t:Store" title="Data.Store.Internal">Store</a></code> instance for types,
 when all the type variables also require <code><a href="Data-Store-Internal.html#t:Store" title="Data.Store.Internal">Store</a></code> instances. If some
 do not, then instead use <a href="../th-utilities-0.2.4.3/TH-Derive.html">TH.Derive</a> like this:</p><pre>{-# LANGUAGE TemplateHaskell #-}
{-# LANGUAGE ScopedTypeVariables #-}

import TH.Derive
import Data.Store

data Foo a = Foo a | Bar Int

$($(derive [d|
    instance Store a =&gt; Deriving (Store (Foo a))
    |]))
</pre><p>Note that when used with datatypes that require type variables, the
 ScopedTypeVariables extension is required.</p><p>One advantage of using this Template Haskell definition of Store
 instances is that in some cases they can be faster than the instances
 defined via Generics. Specifically, sum types which can yield
 <code><a href="Data-Store-Internal.html#v:ConstSize" title="Data.Store.Internal">ConstSize</a></code> from <code><a href="Data-Store-Internal.html#v:size" title="Data.Store.Internal">size</a></code> will be faster when used in array-like types.
 The instances generated via generics always use <code><a href="Data-Store-Internal.html#v:VarSize" title="Data.Store.Internal">VarSize</a></code> for sum
 types.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:makeStore">makeStore</a> :: <a href="../template-haskell-2.16.0.0/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a> -&gt; <a href="../template-haskell-2.16.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> [<a href="../template-haskell-2.16.0.0/Language-Haskell-TH-Syntax.html#t:Dec" title="Language.Haskell.TH.Syntax">Dec</a>]</li><li class="src short"><a href="#v:smallcheckManyStore">smallcheckManyStore</a> :: <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="../base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; [<a href="../template-haskell-2.16.0.0/Language-Haskell-TH-Lib-Internal.html#t:TypeQ" title="Language.Haskell.TH.Lib.Internal">TypeQ</a>] -&gt; <a href="../template-haskell-2.16.0.0/Language-Haskell-TH-Lib-Internal.html#t:ExpQ" title="Language.Haskell.TH.Lib.Internal">ExpQ</a></li><li class="src short"><a href="#v:checkRoundtrip">checkRoundtrip</a> :: (<a href="../base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="Data-Store-Internal.html#t:Store" title="Data.Store.Internal">Store</a> a) =&gt; <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; a -&gt; <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:assertRoundtrip">assertRoundtrip</a> :: (<a href="../base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="Data-Store-Internal.html#t:Store" title="Data.Store.Internal">Store</a> a, <a href="../base-4.14.3.0/Control-Monad-Fail.html#t:MonadFail" title="Control.Monad.Fail">MonadFail</a> m, <a href="../base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> a) =&gt; <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; a -&gt; m ()</li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:makeStore" class="def">makeStore</a> :: <a href="../template-haskell-2.16.0.0/Language-Haskell-TH-Syntax.html#t:Name" title="Language.Haskell.TH.Syntax">Name</a> -&gt; <a href="../template-haskell-2.16.0.0/Language-Haskell-TH-Syntax.html#t:Q" title="Language.Haskell.TH.Syntax">Q</a> [<a href="../template-haskell-2.16.0.0/Language-Haskell-TH-Syntax.html#t:Dec" title="Language.Haskell.TH.Syntax">Dec</a>] <a href="src/Data.Store.TH.Internal.html#makeStore" class="link">Source</a> <a href="#v:makeStore" class="selflink">#</a></p><div class="doc"><p>Given the name of a type, generate a Store instance for it,
 assuming that all type variables also need to be Store instances.</p><p>Note that when used with datatypes that require type variables, the
 ScopedTypeVariables extension is required.</p></div></div><a href="#g:1" id="g:1"><h1>Testing Store instances</h1></a><div class="top"><p class="src"><a id="v:smallcheckManyStore" class="def">smallcheckManyStore</a> :: <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="../base-4.14.3.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; [<a href="../template-haskell-2.16.0.0/Language-Haskell-TH-Lib-Internal.html#t:TypeQ" title="Language.Haskell.TH.Lib.Internal">TypeQ</a>] -&gt; <a href="../template-haskell-2.16.0.0/Language-Haskell-TH-Lib-Internal.html#t:ExpQ" title="Language.Haskell.TH.Lib.Internal">ExpQ</a> <a href="src/Data.Store.TH.html#smallcheckManyStore" class="link">Source</a> <a href="#v:smallcheckManyStore" class="selflink">#</a></p><div class="doc"><p>Test a <code><a href="Data-Store-Internal.html#t:Store" title="Data.Store.Internal">Store</a></code> instance using <code>smallcheck</code> and <code><a href="../hspec-2.7.10/Test-Hspec-Discover.html#v:hspec" title="Test.Hspec.Discover">hspec</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:checkRoundtrip" class="def">checkRoundtrip</a> :: (<a href="../base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="Data-Store-Internal.html#t:Store" title="Data.Store.Internal">Store</a> a) =&gt; <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; a -&gt; <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="src/Data.Store.TH.html#checkRoundtrip" class="link">Source</a> <a href="#v:checkRoundtrip" class="selflink">#</a></p><div class="doc"><p>Check if a given value succeeds in decoding its encoded
 representation.</p></div></div><div class="top"><p class="src"><a id="v:assertRoundtrip" class="def">assertRoundtrip</a> :: (<a href="../base-4.14.3.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> a, <a href="../base-4.14.3.0/Text-Show.html#t:Show" title="Text.Show">Show</a> a, <a href="Data-Store-Internal.html#t:Store" title="Data.Store.Internal">Store</a> a, <a href="../base-4.14.3.0/Control-Monad-Fail.html#t:MonadFail" title="Control.Monad.Fail">MonadFail</a> m, <a href="../base-4.14.3.0/Type-Reflection.html#t:Typeable" title="Type.Reflection">Typeable</a> a) =&gt; <a href="../base-4.14.3.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; a -&gt; m () <a href="src/Data.Store.TH.html#assertRoundtrip" class="link">Source</a> <a href="#v:assertRoundtrip" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.24.2</p></div></body></html>