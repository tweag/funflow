<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE TypeOperators #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE DataKinds #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE RankNTypes #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE KindSignatures #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE TypeFamilies #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE PolyKinds #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE OverloadedLabels #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-15"></span><span class="hs-pragma">{-# LANGUAGE FunctionalDependencies #-}</span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-17"></span><span class="hs-pragma">{-# LANGUAGE GeneralizedNewtypeDeriving #-}</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-comment">-- | A 'Rope' connects together various effect 'Strand's that get interlaced</span><span>
</span><span id="line-20"></span><span class="hs-comment">-- together.</span><span>
</span><span id="line-21"></span><span class="hs-comment">--</span><span>
</span><span id="line-22"></span><span class="hs-comment">-- A 'Strand' is an effet with a parameter and an output. No constraint is</span><span>
</span><span id="line-23"></span><span class="hs-comment">-- placed on the 'Strand', but once combined in a 'Rope', that 'Rope' will be</span><span>
</span><span id="line-24"></span><span class="hs-comment">-- an 'Arrow' and a 'Profunctor'. 'Strand's in a 'Rope' are named via labels to</span><span>
</span><span id="line-25"></span><span class="hs-comment">-- limit ambiguity.</span><span>
</span><span id="line-26"></span><span class="hs-comment">--</span><span>
</span><span id="line-27"></span><span class="hs-comment">-- An action that targets some 'Strand' can be lifted to a 'Rope' that contains</span><span>
</span><span id="line-28"></span><span class="hs-comment">-- that 'Strand' with the 'strand' function.</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Control.Kernmantle.Rope</span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Re-exports</span></span><span>
</span><span id="line-32"></span><span>    </span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Data.Profunctor.Trans.html"><span class="hs-identifier">Data.Profunctor.Trans</span></a></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Cayley</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Rope</span></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier">Rope</span></a></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#TightRope"><span class="hs-identifier">TightRope</span></a></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier">LooseRope</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#tighten"><span class="hs-identifier">tighten</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#loosen"><span class="hs-identifier">loosen</span></a></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#mapRopeCore"><span class="hs-identifier">mapRopeCore</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#mergeStrands"><span class="hs-identifier">mergeStrands</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Binary Effects and Strands</span></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#BinEff"><span class="hs-identifier">BinEff</span></a></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#Strand"><span class="hs-identifier">Strand</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(:::)</span></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#StrandName"><span class="hs-identifier">StrandName</span></a></span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#StrandEff"><span class="hs-identifier">StrandEff</span></a></span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#InRope"><span class="hs-identifier">InRope</span></a></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#AllInMantle"><span class="hs-identifier">AllInMantle</span></a></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#strand"><span class="hs-identifier">strand</span></a></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#mapStrand"><span class="hs-identifier">mapStrand</span></a></span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Rope Interpretation</span></span><span>
</span><span id="line-53"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#weave"><span class="hs-identifier">weave</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#weave%27"><span class="hs-identifier">weave'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#weaveK"><span class="hs-identifier">weaveK</span></a></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#WeaveAll"><span class="hs-identifier">WeaveAll</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#retwine"><span class="hs-identifier">retwine</span></a></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#untwine"><span class="hs-identifier">untwine</span></a></span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Predicates</span></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#AnyRopeWith"><span class="hs-identifier">AnyRopeWith</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#TightRopeWith"><span class="hs-identifier">TightRopeWith</span></a></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRopeWith"><span class="hs-identifier">LooseRopeWith</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Entwines"><span class="hs-identifier">Entwines</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#SatisfiesAll"><span class="hs-identifier">SatisfiesAll</span></a></span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Reexports</span></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="hs-keyword">type</span><span> </span><span class="annot"><span class="hs-operator">(:-&gt;)</span></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Label</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">fromLabel</span></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&amp;)</span></span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#mkRope"><span class="hs-identifier">mkRope</span></a></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#runRope"><span class="hs-identifier">runRope</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">where</span><span>
</span><span id="line-71"></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Category</span></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Arrow</span></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Biapplicative</span></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor.Tannen</span></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Function</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&amp;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Profunctor</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">rmap</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Profunctor.Cayley</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Cayley</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Profunctor.EffFunctor.html"><span class="hs-identifier">Data.Profunctor.EffFunctor</span></a></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Profunctor.Sieve</span></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Profunctor.Trans.html"><span class="hs-identifier">Data.Profunctor.Trans</span></a></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Profunctor.Traversing</span></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Profunctor.Unsafe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(#.)</span></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vinyl</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;+&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vinyl.ARec</span></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vinyl.Functor</span></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vinyl.TypeLevel</span></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Exts</span></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.OverloadedLabels</span></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">id</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.)</span></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Kernmantle.Arrow.html"><span class="hs-identifier">Control.Kernmantle.Arrow</span></a></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Kernmantle.Error.html"><span class="hs-identifier">Control.Kernmantle.Error</span></a></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html"><span class="hs-identifier">Control.Kernmantle.Rope.Internal</span></a></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span class="hs-comment">-- | 'Rope' is a free arrow built out of _several_ binary effects (ie. effects</span><span>
</span><span id="line-100"></span><span class="hs-comment">-- with kind * -&gt; * -&gt; *). These effects are called 'Strand's, they compose the</span><span>
</span><span id="line-101"></span><span class="hs-comment">-- @mantle@, can be interpreted in an @interp@ effect and can be interlaced &quot;on</span><span>
</span><span id="line-102"></span><span class="hs-comment">-- top&quot; of an existing @core@ effect.</span><span>
</span><span id="line-103"></span><span id="local-6989586621679081936"><span id="local-6989586621679081937"><span id="local-6989586621679081938"><span id="local-6989586621679081939"><span class="hs-keyword">newtype</span><span> </span><span id="Rope"><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679082165"><span class="annot"><a href="#local-6989586621679082165"><span class="hs-identifier hs-type">record</span></a></span></span><span class="hs-glyph">::</span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#RopeRec"><span class="hs-identifier hs-type">RopeRec</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679082164"><span class="annot"><a href="#local-6989586621679082164"><span class="hs-identifier hs-type">mantle</span></a></span></span><span class="hs-glyph">::</span><span class="hs-special">[</span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#Strand"><span class="hs-identifier hs-type">Strand</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679082163"><span class="annot"><a href="#local-6989586621679082163"><span class="hs-identifier hs-type">core</span></a></span></span><span class="hs-glyph">::</span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#BinEff"><span class="hs-identifier hs-type">BinEff</span></a></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679082162"><span class="annot"><a href="#local-6989586621679082162"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679082161"><span class="annot"><a href="#local-6989586621679082161"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-104"></span><span>  </span><span id="Rope"><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="getRopeRunner"><span class="annot"><span class="annottext">Rope record mantle core a b
-&gt; RopeRunner record mantle core core a b
</span><a href="Control.Kernmantle.Rope.html#getRopeRunner"><span class="hs-identifier hs-var hs-var">getRopeRunner</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#RopeRunner"><span class="hs-identifier hs-type">RopeRunner</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082165"><span class="hs-identifier hs-type">record</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082164"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082163"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082163"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082162"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082161"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span> </span><span id="local-6989586621679081930"><span id="local-6989586621679081932"><span class="annot"><span class="annottext">Rope record mantle core a a
Rope record mantle core b c
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
(forall a. Rope record mantle core a a)
-&gt; (forall b c a.
    Rope record mantle core b c
    -&gt; Rope record mantle core a b -&gt; Rope record mantle core a c)
-&gt; Category (Rope record mantle core)
forall a. Rope record mantle core a a
forall b c a.
Rope record mantle core b c
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
forall k (cat :: k -&gt; k -&gt; *).
(forall (a :: k). cat a a)
-&gt; (forall (b :: k) (c :: k) (a :: k).
    cat b c -&gt; cat a b -&gt; cat a c)
-&gt; Category cat
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a.
Category core =&gt;
Rope record mantle core a a
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c a.
Category core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
. :: Rope record mantle core b c
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
$c. :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c a.
Category core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
id :: Rope record mantle core a a
$cid :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a.
Category core =&gt;
Rope record mantle core a a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Category</span></span></span></span><span>
</span><span id="line-107"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081918"><span id="local-6989586621679081920"><span id="local-6989586621679081922"><span id="local-6989586621679081924"><span id="local-6989586621679081926"><span class="annot"><span class="annottext">Category (Rope record mantle core)
Category (Rope record mantle core)
-&gt; (forall b c. (b -&gt; c) -&gt; Rope record mantle core b c)
-&gt; (forall b c d.
    Rope record mantle core b c
    -&gt; Rope record mantle core (b, d) (c, d))
-&gt; (forall b c d.
    Rope record mantle core b c
    -&gt; Rope record mantle core (d, b) (d, c))
-&gt; (forall b c b' c'.
    Rope record mantle core b c
    -&gt; Rope record mantle core b' c'
    -&gt; Rope record mantle core (b, b') (c, c'))
-&gt; (forall b c c'.
    Rope record mantle core b c
    -&gt; Rope record mantle core b c'
    -&gt; Rope record mantle core b (c, c'))
-&gt; Arrow (Rope record mantle core)
Rope record mantle core b c
-&gt; Rope record mantle core (b, d) (c, d)
Rope record mantle core b c
-&gt; Rope record mantle core (d, b) (d, c)
Rope record mantle core b c
-&gt; Rope record mantle core b' c'
-&gt; Rope record mantle core (b, b') (c, c')
Rope record mantle core b c
-&gt; Rope record mantle core b c'
-&gt; Rope record mantle core b (c, c')
(b -&gt; c) -&gt; Rope record mantle core b c
forall b c. (b -&gt; c) -&gt; Rope record mantle core b c
forall b c d.
Rope record mantle core b c
-&gt; Rope record mantle core (b, d) (c, d)
forall b c d.
Rope record mantle core b c
-&gt; Rope record mantle core (d, b) (d, c)
forall b c c'.
Rope record mantle core b c
-&gt; Rope record mantle core b c'
-&gt; Rope record mantle core b (c, c')
forall b c b' c'.
Rope record mantle core b c
-&gt; Rope record mantle core b' c'
-&gt; Rope record mantle core (b, b') (c, c')
forall (a :: BinEff).
Category a
-&gt; (forall b c. (b -&gt; c) -&gt; a b c)
-&gt; (forall b c d. a b c -&gt; a (b, d) (c, d))
-&gt; (forall b c d. a b c -&gt; a (d, b) (d, c))
-&gt; (forall b c b' c'. a b c -&gt; a b' c' -&gt; a (b, b') (c, c'))
-&gt; (forall b c c'. a b c -&gt; a b c' -&gt; a b (c, c'))
-&gt; Arrow a
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Arrow core =&gt;
Category (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c.
Arrow core =&gt;
(b -&gt; c) -&gt; Rope record mantle core b c
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c d.
Arrow core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core (b, d) (c, d)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c d.
Arrow core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core (d, b) (d, c)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c c'.
Arrow core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core b c'
-&gt; Rope record mantle core b (c, c')
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c b' c'.
Arrow core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core b' c'
-&gt; Rope record mantle core (b, b') (c, c')
&amp;&amp;&amp; :: Rope record mantle core b c
-&gt; Rope record mantle core b c'
-&gt; Rope record mantle core b (c, c')
$c&amp;&amp;&amp; :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c c'.
Arrow core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core b c'
-&gt; Rope record mantle core b (c, c')
*** :: Rope record mantle core b c
-&gt; Rope record mantle core b' c'
-&gt; Rope record mantle core (b, b') (c, c')
$c*** :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c b' c'.
Arrow core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core b' c'
-&gt; Rope record mantle core (b, b') (c, c')
second :: Rope record mantle core b c
-&gt; Rope record mantle core (d, b) (d, c)
$csecond :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c d.
Arrow core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core (d, b) (d, c)
first :: Rope record mantle core b c
-&gt; Rope record mantle core (b, d) (c, d)
$cfirst :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c d.
Arrow core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core (b, d) (c, d)
arr :: (b -&gt; c) -&gt; Rope record mantle core b c
$carr :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c.
Arrow core =&gt;
(b -&gt; c) -&gt; Rope record mantle core b c
$cp1Arrow :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Arrow core =&gt;
Category (Rope record mantle core)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Arrow</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081908"><span id="local-6989586621679081910"><span id="local-6989586621679081912"><span id="local-6989586621679081914"><span class="annot"><span class="annottext">Arrow (Rope record mantle core)
Arrow (Rope record mantle core)
-&gt; (forall b c d.
    Rope record mantle core b c
    -&gt; Rope record mantle core (Either b d) (Either c d))
-&gt; (forall b c d.
    Rope record mantle core b c
    -&gt; Rope record mantle core (Either d b) (Either d c))
-&gt; (forall b c b' c'.
    Rope record mantle core b c
    -&gt; Rope record mantle core b' c'
    -&gt; Rope record mantle core (Either b b') (Either c c'))
-&gt; (forall b d c.
    Rope record mantle core b d
    -&gt; Rope record mantle core c d
    -&gt; Rope record mantle core (Either b c) d)
-&gt; ArrowChoice (Rope record mantle core)
Rope record mantle core b c
-&gt; Rope record mantle core (Either b d) (Either c d)
Rope record mantle core b c
-&gt; Rope record mantle core (Either d b) (Either d c)
Rope record mantle core b c
-&gt; Rope record mantle core b' c'
-&gt; Rope record mantle core (Either b b') (Either c c')
Rope record mantle core b d
-&gt; Rope record mantle core c d
-&gt; Rope record mantle core (Either b c) d
forall b c d.
Rope record mantle core b c
-&gt; Rope record mantle core (Either b d) (Either c d)
forall b c d.
Rope record mantle core b c
-&gt; Rope record mantle core (Either d b) (Either d c)
forall b d c.
Rope record mantle core b d
-&gt; Rope record mantle core c d
-&gt; Rope record mantle core (Either b c) d
forall b c b' c'.
Rope record mantle core b c
-&gt; Rope record mantle core b' c'
-&gt; Rope record mantle core (Either b b') (Either c c')
forall (a :: BinEff).
Arrow a
-&gt; (forall b c d. a b c -&gt; a (Either b d) (Either c d))
-&gt; (forall b c d. a b c -&gt; a (Either d b) (Either d c))
-&gt; (forall b c b' c'.
    a b c -&gt; a b' c' -&gt; a (Either b b') (Either c c'))
-&gt; (forall b d c. a b d -&gt; a c d -&gt; a (Either b c) d)
-&gt; ArrowChoice a
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
ArrowChoice core =&gt;
Arrow (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c d.
ArrowChoice core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core (Either b d) (Either c d)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c d.
ArrowChoice core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core (Either d b) (Either d c)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       d c.
ArrowChoice core =&gt;
Rope record mantle core b d
-&gt; Rope record mantle core c d
-&gt; Rope record mantle core (Either b c) d
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c b' c'.
ArrowChoice core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core b' c'
-&gt; Rope record mantle core (Either b b') (Either c c')
||| :: Rope record mantle core b d
-&gt; Rope record mantle core c d
-&gt; Rope record mantle core (Either b c) d
$c||| :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       d c.
ArrowChoice core =&gt;
Rope record mantle core b d
-&gt; Rope record mantle core c d
-&gt; Rope record mantle core (Either b c) d
+++ :: Rope record mantle core b c
-&gt; Rope record mantle core b' c'
-&gt; Rope record mantle core (Either b b') (Either c c')
$c+++ :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c b' c'.
ArrowChoice core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core b' c'
-&gt; Rope record mantle core (Either b b') (Either c c')
right :: Rope record mantle core b c
-&gt; Rope record mantle core (Either d b) (Either d c)
$cright :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c d.
ArrowChoice core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core (Either d b) (Either d c)
left :: Rope record mantle core b c
-&gt; Rope record mantle core (Either b d) (Either c d)
$cleft :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c d.
ArrowChoice core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core (Either b d) (Either c d)
$cp1ArrowChoice :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
ArrowChoice core =&gt;
Arrow (Rope record mantle core)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ArrowChoice</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081904"><span class="annot"><span class="annottext">Arrow (Rope record mantle core)
Arrow (Rope record mantle core)
-&gt; (forall b d c.
    Rope record mantle core (b, d) (c, d)
    -&gt; Rope record mantle core b c)
-&gt; ArrowLoop (Rope record mantle core)
Rope record mantle core (b, d) (c, d)
-&gt; Rope record mantle core b c
forall b d c.
Rope record mantle core (b, d) (c, d)
-&gt; Rope record mantle core b c
forall (a :: BinEff).
Arrow a -&gt; (forall b d c. a (b, d) (c, d) -&gt; a b c) -&gt; ArrowLoop a
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
ArrowLoop core =&gt;
Arrow (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       d c.
ArrowLoop core =&gt;
Rope record mantle core (b, d) (c, d)
-&gt; Rope record mantle core b c
loop :: Rope record mantle core (b, d) (c, d)
-&gt; Rope record mantle core b c
$cloop :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       d c.
ArrowLoop core =&gt;
Rope record mantle core (b, d) (c, d)
-&gt; Rope record mantle core b c
$cp1ArrowLoop :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
ArrowLoop core =&gt;
Arrow (Rope record mantle core)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">ArrowLoop</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081900"><span class="annot"><span class="annottext">Arrow (Rope record mantle core)
Rope record mantle core b c
Arrow (Rope record mantle core)
-&gt; (forall b c. Rope record mantle core b c)
-&gt; ArrowZero (Rope record mantle core)
forall b c. Rope record mantle core b c
forall (a :: BinEff). Arrow a -&gt; (forall b c. a b c) -&gt; ArrowZero a
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
ArrowZero core =&gt;
Arrow (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c.
ArrowZero core =&gt;
Rope record mantle core b c
zeroArrow :: Rope record mantle core b c
$czeroArrow :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c.
ArrowZero core =&gt;
Rope record mantle core b c
$cp1ArrowZero :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
ArrowZero core =&gt;
Arrow (Rope record mantle core)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">ArrowZero</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081896"><span class="annot"><span class="annottext">ArrowZero (Rope record mantle core)
ArrowZero (Rope record mantle core)
-&gt; (forall b c.
    Rope record mantle core b c
    -&gt; Rope record mantle core b c -&gt; Rope record mantle core b c)
-&gt; ArrowPlus (Rope record mantle core)
Rope record mantle core b c
-&gt; Rope record mantle core b c -&gt; Rope record mantle core b c
forall b c.
Rope record mantle core b c
-&gt; Rope record mantle core b c -&gt; Rope record mantle core b c
forall (a :: BinEff).
ArrowZero a -&gt; (forall b c. a b c -&gt; a b c -&gt; a b c) -&gt; ArrowPlus a
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
ArrowPlus core =&gt;
ArrowZero (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c.
ArrowPlus core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core b c -&gt; Rope record mantle core b c
&lt;+&gt; :: Rope record mantle core b c
-&gt; Rope record mantle core b c -&gt; Rope record mantle core b c
$c&lt;+&gt; :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c.
ArrowPlus core =&gt;
Rope record mantle core b c
-&gt; Rope record mantle core b c -&gt; Rope record mantle core b c
$cp1ArrowPlus :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
ArrowPlus core =&gt;
ArrowZero (Rope record mantle core)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">ArrowPlus</span></span></span><span>
</span><span id="line-108"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081885"><span id="local-6989586621679081887"><span id="local-6989586621679081889"><span id="local-6989586621679081891"><span id="local-6989586621679081893"><span class="annot"><span class="annottext">q b c -&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
Rope record mantle core b c -&gt; q a b -&gt; Rope record mantle core a c
(a -&gt; b)
-&gt; (c -&gt; d)
-&gt; Rope record mantle core b c
-&gt; Rope record mantle core a d
(a -&gt; b)
-&gt; Rope record mantle core b c -&gt; Rope record mantle core a c
(b -&gt; c)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
(forall a b c d.
 (a -&gt; b)
 -&gt; (c -&gt; d)
 -&gt; Rope record mantle core b c
 -&gt; Rope record mantle core a d)
-&gt; (forall a b c.
    (a -&gt; b)
    -&gt; Rope record mantle core b c -&gt; Rope record mantle core a c)
-&gt; (forall b c a.
    (b -&gt; c)
    -&gt; Rope record mantle core a b -&gt; Rope record mantle core a c)
-&gt; (forall a b c (q :: BinEff).
    Coercible c b =&gt;
    q b c
    -&gt; Rope record mantle core a b -&gt; Rope record mantle core a c)
-&gt; (forall a b c (q :: BinEff).
    Coercible b a =&gt;
    Rope record mantle core b c
    -&gt; q a b -&gt; Rope record mantle core a c)
-&gt; Profunctor (Rope record mantle core)
forall a b c.
(a -&gt; b)
-&gt; Rope record mantle core b c -&gt; Rope record mantle core a c
forall b c a.
(b -&gt; c)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
forall a b c d.
(a -&gt; b)
-&gt; (c -&gt; d)
-&gt; Rope record mantle core b c
-&gt; Rope record mantle core a d
forall a b c (q :: BinEff).
Coercible b a =&gt;
Rope record mantle core b c -&gt; q a b -&gt; Rope record mantle core a c
forall a b c (q :: BinEff).
Coercible c b =&gt;
q b c -&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
forall (p :: BinEff).
(forall a b c d. (a -&gt; b) -&gt; (c -&gt; d) -&gt; p b c -&gt; p a d)
-&gt; (forall a b c. (a -&gt; b) -&gt; p b c -&gt; p a c)
-&gt; (forall b c a. (b -&gt; c) -&gt; p a b -&gt; p a c)
-&gt; (forall a b c (q :: BinEff).
    Coercible c b =&gt;
    q b c -&gt; p a b -&gt; p a c)
-&gt; (forall a b c (q :: BinEff).
    Coercible b a =&gt;
    p b c -&gt; q a b -&gt; p a c)
-&gt; Profunctor p
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c.
Profunctor core =&gt;
(a -&gt; b)
-&gt; Rope record mantle core b c -&gt; Rope record mantle core a c
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c a.
Profunctor core =&gt;
(b -&gt; c)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c d.
Profunctor core =&gt;
(a -&gt; b)
-&gt; (c -&gt; d)
-&gt; Rope record mantle core b c
-&gt; Rope record mantle core a d
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c (q :: BinEff).
(Profunctor core, Coercible b a) =&gt;
Rope record mantle core b c -&gt; q a b -&gt; Rope record mantle core a c
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c (q :: BinEff).
(Profunctor core, Coercible c b) =&gt;
q b c -&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
.# :: Rope record mantle core b c -&gt; q a b -&gt; Rope record mantle core a c
$c.# :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c (q :: BinEff).
(Profunctor core, Coercible b a) =&gt;
Rope record mantle core b c -&gt; q a b -&gt; Rope record mantle core a c
#. :: q b c -&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
$c#. :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c (q :: BinEff).
(Profunctor core, Coercible c b) =&gt;
q b c -&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
rmap :: (b -&gt; c)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
$crmap :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c a.
Profunctor core =&gt;
(b -&gt; c)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
lmap :: (a -&gt; b)
-&gt; Rope record mantle core b c -&gt; Rope record mantle core a c
$clmap :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c.
Profunctor core =&gt;
(a -&gt; b)
-&gt; Rope record mantle core b c -&gt; Rope record mantle core a c
dimap :: (a -&gt; b)
-&gt; (c -&gt; d)
-&gt; Rope record mantle core b c
-&gt; Rope record mantle core a d
$cdimap :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c d.
Profunctor core =&gt;
(a -&gt; b)
-&gt; (c -&gt; d)
-&gt; Rope record mantle core b c
-&gt; Rope record mantle core a d
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Profunctor</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081879"><span id="local-6989586621679081881"><span class="annot"><span class="annottext">Profunctor (Rope record mantle core)
Profunctor (Rope record mantle core)
-&gt; (forall a b c.
    Rope record mantle core a b
    -&gt; Rope record mantle core (a, c) (b, c))
-&gt; (forall a b c.
    Rope record mantle core a b
    -&gt; Rope record mantle core (c, a) (c, b))
-&gt; Strong (Rope record mantle core)
Rope record mantle core a b
-&gt; Rope record mantle core (a, c) (b, c)
Rope record mantle core a b
-&gt; Rope record mantle core (c, a) (c, b)
forall a b c.
Rope record mantle core a b
-&gt; Rope record mantle core (a, c) (b, c)
forall a b c.
Rope record mantle core a b
-&gt; Rope record mantle core (c, a) (c, b)
forall (p :: BinEff).
Profunctor p
-&gt; (forall a b c. p a b -&gt; p (a, c) (b, c))
-&gt; (forall a b c. p a b -&gt; p (c, a) (c, b))
-&gt; Strong p
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Strong core =&gt;
Profunctor (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c.
Strong core =&gt;
Rope record mantle core a b
-&gt; Rope record mantle core (a, c) (b, c)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c.
Strong core =&gt;
Rope record mantle core a b
-&gt; Rope record mantle core (c, a) (c, b)
second' :: Rope record mantle core a b
-&gt; Rope record mantle core (c, a) (c, b)
$csecond' :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c.
Strong core =&gt;
Rope record mantle core a b
-&gt; Rope record mantle core (c, a) (c, b)
first' :: Rope record mantle core a b
-&gt; Rope record mantle core (a, c) (b, c)
$cfirst' :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c.
Strong core =&gt;
Rope record mantle core a b
-&gt; Rope record mantle core (a, c) (b, c)
$cp1Strong :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Strong core =&gt;
Profunctor (Rope record mantle core)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Strong</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081873"><span id="local-6989586621679081875"><span class="annot"><span class="annottext">Profunctor (Rope record mantle core)
Profunctor (Rope record mantle core)
-&gt; (forall a b c.
    Rope record mantle core a b
    -&gt; Rope record mantle core (Either a c) (Either b c))
-&gt; (forall a b c.
    Rope record mantle core a b
    -&gt; Rope record mantle core (Either c a) (Either c b))
-&gt; Choice (Rope record mantle core)
Rope record mantle core a b
-&gt; Rope record mantle core (Either a c) (Either b c)
Rope record mantle core a b
-&gt; Rope record mantle core (Either c a) (Either c b)
forall a b c.
Rope record mantle core a b
-&gt; Rope record mantle core (Either a c) (Either b c)
forall a b c.
Rope record mantle core a b
-&gt; Rope record mantle core (Either c a) (Either c b)
forall (p :: BinEff).
Profunctor p
-&gt; (forall a b c. p a b -&gt; p (Either a c) (Either b c))
-&gt; (forall a b c. p a b -&gt; p (Either c a) (Either c b))
-&gt; Choice p
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Choice core =&gt;
Profunctor (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c.
Choice core =&gt;
Rope record mantle core a b
-&gt; Rope record mantle core (Either a c) (Either b c)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c.
Choice core =&gt;
Rope record mantle core a b
-&gt; Rope record mantle core (Either c a) (Either c b)
right' :: Rope record mantle core a b
-&gt; Rope record mantle core (Either c a) (Either c b)
$cright' :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c.
Choice core =&gt;
Rope record mantle core a b
-&gt; Rope record mantle core (Either c a) (Either c b)
left' :: Rope record mantle core a b
-&gt; Rope record mantle core (Either a c) (Either b c)
$cleft' :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c.
Choice core =&gt;
Rope record mantle core a b
-&gt; Rope record mantle core (Either a c) (Either b c)
$cp1Choice :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Choice core =&gt;
Profunctor (Rope record mantle core)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Choice</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081869"><span class="annot"><span class="annottext">Profunctor (Rope record mantle core)
Profunctor (Rope record mantle core)
-&gt; (forall a b x.
    Rope record mantle core a b
    -&gt; Rope record mantle core (x -&gt; a) (x -&gt; b))
-&gt; Closed (Rope record mantle core)
Rope record mantle core a b
-&gt; Rope record mantle core (x -&gt; a) (x -&gt; b)
forall a b x.
Rope record mantle core a b
-&gt; Rope record mantle core (x -&gt; a) (x -&gt; b)
forall (p :: BinEff).
Profunctor p
-&gt; (forall a b x. p a b -&gt; p (x -&gt; a) (x -&gt; b)) -&gt; Closed p
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Closed core =&gt;
Profunctor (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b x.
Closed core =&gt;
Rope record mantle core a b
-&gt; Rope record mantle core (x -&gt; a) (x -&gt; b)
closed :: Rope record mantle core a b
-&gt; Rope record mantle core (x -&gt; a) (x -&gt; b)
$cclosed :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b x.
Closed core =&gt;
Rope record mantle core a b
-&gt; Rope record mantle core (x -&gt; a) (x -&gt; b)
$cp1Closed :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Closed core =&gt;
Profunctor (Rope record mantle core)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Closed</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081863"><span id="local-6989586621679081865"><span class="annot"><span class="annottext">Profunctor (Rope record mantle core)
Profunctor (Rope record mantle core)
-&gt; (forall a d b.
    Rope record mantle core (a, d) (b, d)
    -&gt; Rope record mantle core a b)
-&gt; (forall d a b.
    Rope record mantle core (d, a) (d, b)
    -&gt; Rope record mantle core a b)
-&gt; Costrong (Rope record mantle core)
Rope record mantle core (a, d) (b, d)
-&gt; Rope record mantle core a b
Rope record mantle core (d, a) (d, b)
-&gt; Rope record mantle core a b
forall d a b.
Rope record mantle core (d, a) (d, b)
-&gt; Rope record mantle core a b
forall a d b.
Rope record mantle core (a, d) (b, d)
-&gt; Rope record mantle core a b
forall (p :: BinEff).
Profunctor p
-&gt; (forall a d b. p (a, d) (b, d) -&gt; p a b)
-&gt; (forall d a b. p (d, a) (d, b) -&gt; p a b)
-&gt; Costrong p
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Costrong core =&gt;
Profunctor (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) d
       a b.
Costrong core =&gt;
Rope record mantle core (d, a) (d, b)
-&gt; Rope record mantle core a b
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       d b.
Costrong core =&gt;
Rope record mantle core (a, d) (b, d)
-&gt; Rope record mantle core a b
unsecond :: Rope record mantle core (d, a) (d, b)
-&gt; Rope record mantle core a b
$cunsecond :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) d
       a b.
Costrong core =&gt;
Rope record mantle core (d, a) (d, b)
-&gt; Rope record mantle core a b
unfirst :: Rope record mantle core (a, d) (b, d)
-&gt; Rope record mantle core a b
$cunfirst :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       d b.
Costrong core =&gt;
Rope record mantle core (a, d) (b, d)
-&gt; Rope record mantle core a b
$cp1Costrong :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Costrong core =&gt;
Profunctor (Rope record mantle core)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Costrong</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081857"><span id="local-6989586621679081859"><span class="annot"><span class="annottext">Profunctor (Rope record mantle core)
Profunctor (Rope record mantle core)
-&gt; (forall a d b.
    Rope record mantle core (Either a d) (Either b d)
    -&gt; Rope record mantle core a b)
-&gt; (forall d a b.
    Rope record mantle core (Either d a) (Either d b)
    -&gt; Rope record mantle core a b)
-&gt; Cochoice (Rope record mantle core)
Rope record mantle core (Either a d) (Either b d)
-&gt; Rope record mantle core a b
Rope record mantle core (Either d a) (Either d b)
-&gt; Rope record mantle core a b
forall d a b.
Rope record mantle core (Either d a) (Either d b)
-&gt; Rope record mantle core a b
forall a d b.
Rope record mantle core (Either a d) (Either b d)
-&gt; Rope record mantle core a b
forall (p :: BinEff).
Profunctor p
-&gt; (forall a d b. p (Either a d) (Either b d) -&gt; p a b)
-&gt; (forall d a b. p (Either d a) (Either d b) -&gt; p a b)
-&gt; Cochoice p
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Cochoice core =&gt;
Profunctor (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) d
       a b.
Cochoice core =&gt;
Rope record mantle core (Either d a) (Either d b)
-&gt; Rope record mantle core a b
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       d b.
Cochoice core =&gt;
Rope record mantle core (Either a d) (Either b d)
-&gt; Rope record mantle core a b
unright :: Rope record mantle core (Either d a) (Either d b)
-&gt; Rope record mantle core a b
$cunright :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) d
       a b.
Cochoice core =&gt;
Rope record mantle core (Either d a) (Either d b)
-&gt; Rope record mantle core a b
unleft :: Rope record mantle core (Either a d) (Either b d)
-&gt; Rope record mantle core a b
$cunleft :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       d b.
Cochoice core =&gt;
Rope record mantle core (Either a d) (Either b d)
-&gt; Rope record mantle core a b
$cp1Cochoice :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Cochoice core =&gt;
Profunctor (Rope record mantle core)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Cochoice</span></span></span></span><span>
</span><span id="line-109"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081850"><span id="local-6989586621679081852"><span class="annot"><span class="annottext">Traversing (Rope record mantle core)
Closed (Rope record mantle core)
Traversing (Rope record mantle core)
-&gt; Closed (Rope record mantle core)
-&gt; (forall (f :: * -&gt; *) a b.
    Functor f =&gt;
    Rope record mantle core a b -&gt; Rope record mantle core (f a) (f b))
-&gt; (forall a b s t.
    ((a -&gt; b) -&gt; s -&gt; t)
    -&gt; Rope record mantle core a b -&gt; Rope record mantle core s t)
-&gt; Mapping (Rope record mantle core)
Rope record mantle core a b -&gt; Rope record mantle core (f a) (f b)
((a -&gt; b) -&gt; s -&gt; t)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core s t
forall a b s t.
((a -&gt; b) -&gt; s -&gt; t)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core s t
forall (f :: * -&gt; *) a b.
Functor f =&gt;
Rope record mantle core a b -&gt; Rope record mantle core (f a) (f b)
forall (p :: BinEff).
Traversing p
-&gt; Closed p
-&gt; (forall (f :: * -&gt; *) a b. Functor f =&gt; p a b -&gt; p (f a) (f b))
-&gt; (forall a b s t. ((a -&gt; b) -&gt; s -&gt; t) -&gt; p a b -&gt; p s t)
-&gt; Mapping p
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Mapping core =&gt;
Traversing (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Mapping core =&gt;
Closed (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b s t.
Mapping core =&gt;
((a -&gt; b) -&gt; s -&gt; t)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core s t
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff)
       (f :: * -&gt; *) a b.
(Mapping core, Functor f) =&gt;
Rope record mantle core a b -&gt; Rope record mantle core (f a) (f b)
roam :: ((a -&gt; b) -&gt; s -&gt; t)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core s t
$croam :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b s t.
Mapping core =&gt;
((a -&gt; b) -&gt; s -&gt; t)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core s t
map' :: Rope record mantle core a b -&gt; Rope record mantle core (f a) (f b)
$cmap' :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff)
       (f :: * -&gt; *) a b.
(Mapping core, Functor f) =&gt;
Rope record mantle core a b -&gt; Rope record mantle core (f a) (f b)
$cp2Mapping :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Mapping core =&gt;
Closed (Rope record mantle core)
$cp1Mapping :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Mapping core =&gt;
Traversing (Rope record mantle core)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Mapping</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081843"><span id="local-6989586621679081845"><span class="annot"><span class="annottext">Choice (Rope record mantle core)
Strong (Rope record mantle core)
Choice (Rope record mantle core)
-&gt; Strong (Rope record mantle core)
-&gt; (forall (f :: * -&gt; *) a b.
    Traversable f =&gt;
    Rope record mantle core a b -&gt; Rope record mantle core (f a) (f b))
-&gt; (forall a b s t.
    (forall (f :: * -&gt; *). Applicative f =&gt; (a -&gt; f b) -&gt; s -&gt; f t)
    -&gt; Rope record mantle core a b -&gt; Rope record mantle core s t)
-&gt; Traversing (Rope record mantle core)
Rope record mantle core a b -&gt; Rope record mantle core (f a) (f b)
(forall (f :: * -&gt; *). Applicative f =&gt; (a -&gt; f b) -&gt; s -&gt; f t)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core s t
forall a b s t.
(forall (f :: * -&gt; *). Applicative f =&gt; (a -&gt; f b) -&gt; s -&gt; f t)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core s t
forall (f :: * -&gt; *) a b.
Traversable f =&gt;
Rope record mantle core a b -&gt; Rope record mantle core (f a) (f b)
forall (p :: BinEff).
Choice p
-&gt; Strong p
-&gt; (forall (f :: * -&gt; *) a b.
    Traversable f =&gt;
    p a b -&gt; p (f a) (f b))
-&gt; (forall a b s t.
    (forall (f :: * -&gt; *). Applicative f =&gt; (a -&gt; f b) -&gt; s -&gt; f t)
    -&gt; p a b -&gt; p s t)
-&gt; Traversing p
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Traversing core =&gt;
Choice (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Traversing core =&gt;
Strong (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b s t.
Traversing core =&gt;
(forall (f :: * -&gt; *). Applicative f =&gt; (a -&gt; f b) -&gt; s -&gt; f t)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core s t
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff)
       (f :: * -&gt; *) a b.
(Traversing core, Traversable f) =&gt;
Rope record mantle core a b -&gt; Rope record mantle core (f a) (f b)
wander :: (forall (f :: * -&gt; *). Applicative f =&gt; (a -&gt; f b) -&gt; s -&gt; f t)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core s t
$cwander :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b s t.
Traversing core =&gt;
(forall (f :: * -&gt; *). Applicative f =&gt; (a -&gt; f b) -&gt; s -&gt; f t)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core s t
traverse' :: Rope record mantle core a b -&gt; Rope record mantle core (f a) (f b)
$ctraverse' :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff)
       (f :: * -&gt; *) a b.
(Traversing core, Traversable f) =&gt;
Rope record mantle core a b -&gt; Rope record mantle core (f a) (f b)
$cp2Traversing :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Traversing core =&gt;
Strong (Rope record mantle core)
$cp1Traversing :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Traversing core =&gt;
Choice (Rope record mantle core)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Traversing</span></span></span></span><span>
</span><span id="line-110"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081840"><span class="annot"><a href="Control.Kernmantle.Error.html#ThrowEffect"><span class="hs-identifier hs-type">ThrowEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081939"><span class="hs-identifier hs-type">ex</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081837"><span class="annot"><a href="Control.Kernmantle.Error.html#TryEffect"><span class="hs-identifier hs-type">TryEffect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081938"><span class="hs-identifier hs-type">ex</span></a></span></span><span>
</span><span id="line-111"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081832"><span id="local-6989586621679081834"><span class="annot"><a href="Data.Profunctor.Trans.html#SieveTrans"><span class="hs-identifier hs-type">SieveTrans</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081937"><span class="hs-identifier hs-type">f</span></a></span></span></span><span>
</span><span id="line-112"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081829"><span class="annot"><a href="Control.Kernmantle.Arrow.html#HasAutoIdent"><span class="hs-identifier hs-type">HasAutoIdent</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081936"><span class="hs-identifier hs-type">eff</span></a></span></span><span>
</span><span id="line-113"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081822"><span id="local-6989586621679081824"><span id="local-6989586621679081826"><span class="annot"><span class="annottext">(a -&gt; b)
-&gt; (c -&gt; d)
-&gt; Rope record mantle core a c
-&gt; Rope record mantle core b d
(a -&gt; b)
-&gt; Rope record mantle core a c -&gt; Rope record mantle core b c
(b -&gt; c)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
(forall a b c d.
 (a -&gt; b)
 -&gt; (c -&gt; d)
 -&gt; Rope record mantle core a c
 -&gt; Rope record mantle core b d)
-&gt; (forall a b c.
    (a -&gt; b)
    -&gt; Rope record mantle core a c -&gt; Rope record mantle core b c)
-&gt; (forall b c a.
    (b -&gt; c)
    -&gt; Rope record mantle core a b -&gt; Rope record mantle core a c)
-&gt; Bifunctor (Rope record mantle core)
forall a b c.
(a -&gt; b)
-&gt; Rope record mantle core a c -&gt; Rope record mantle core b c
forall b c a.
(b -&gt; c)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
forall a b c d.
(a -&gt; b)
-&gt; (c -&gt; d)
-&gt; Rope record mantle core a c
-&gt; Rope record mantle core b d
forall (p :: BinEff).
(forall a b c d. (a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d)
-&gt; (forall a b c. (a -&gt; b) -&gt; p a c -&gt; p b c)
-&gt; (forall b c a. (b -&gt; c) -&gt; p a b -&gt; p a c)
-&gt; Bifunctor p
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c.
Bifunctor core =&gt;
(a -&gt; b)
-&gt; Rope record mantle core a c -&gt; Rope record mantle core b c
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c a.
Bifunctor core =&gt;
(b -&gt; c)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c d.
Bifunctor core =&gt;
(a -&gt; b)
-&gt; (c -&gt; d)
-&gt; Rope record mantle core a c
-&gt; Rope record mantle core b d
second :: (b -&gt; c)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
$csecond :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) b
       c a.
Bifunctor core =&gt;
(b -&gt; c)
-&gt; Rope record mantle core a b -&gt; Rope record mantle core a c
first :: (a -&gt; b)
-&gt; Rope record mantle core a c -&gt; Rope record mantle core b c
$cfirst :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c.
Bifunctor core =&gt;
(a -&gt; b)
-&gt; Rope record mantle core a c -&gt; Rope record mantle core b c
bimap :: (a -&gt; b)
-&gt; (c -&gt; d)
-&gt; Rope record mantle core a c
-&gt; Rope record mantle core b d
$cbimap :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c d.
Bifunctor core =&gt;
(a -&gt; b)
-&gt; (c -&gt; d)
-&gt; Rope record mantle core a c
-&gt; Rope record mantle core b d
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Bifunctor</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081810"><span id="local-6989586621679081812"><span id="local-6989586621679081814"><span id="local-6989586621679081816"><span id="local-6989586621679081818"><span class="annot"><span class="annottext">Bifunctor (Rope record mantle core)
a -&gt; b -&gt; Rope record mantle core a b
Bifunctor (Rope record mantle core)
-&gt; (forall a b. a -&gt; b -&gt; Rope record mantle core a b)
-&gt; (forall a b c d.
    Rope record mantle core (a -&gt; b) (c -&gt; d)
    -&gt; Rope record mantle core a c -&gt; Rope record mantle core b d)
-&gt; (forall a b c d e f.
    (a -&gt; b -&gt; c)
    -&gt; (d -&gt; e -&gt; f)
    -&gt; Rope record mantle core a d
    -&gt; Rope record mantle core b e
    -&gt; Rope record mantle core c f)
-&gt; (forall a b c d.
    Rope record mantle core a b
    -&gt; Rope record mantle core c d -&gt; Rope record mantle core c d)
-&gt; (forall a b c d.
    Rope record mantle core a b
    -&gt; Rope record mantle core c d -&gt; Rope record mantle core a b)
-&gt; Biapplicative (Rope record mantle core)
Rope record mantle core a b
-&gt; Rope record mantle core c d -&gt; Rope record mantle core c d
Rope record mantle core a b
-&gt; Rope record mantle core c d -&gt; Rope record mantle core a b
Rope record mantle core (a -&gt; b) (c -&gt; d)
-&gt; Rope record mantle core a c -&gt; Rope record mantle core b d
(a -&gt; b -&gt; c)
-&gt; (d -&gt; e -&gt; f)
-&gt; Rope record mantle core a d
-&gt; Rope record mantle core b e
-&gt; Rope record mantle core c f
forall a b. a -&gt; b -&gt; Rope record mantle core a b
forall a b c d.
Rope record mantle core a b
-&gt; Rope record mantle core c d -&gt; Rope record mantle core a b
forall a b c d.
Rope record mantle core a b
-&gt; Rope record mantle core c d -&gt; Rope record mantle core c d
forall a b c d.
Rope record mantle core (a -&gt; b) (c -&gt; d)
-&gt; Rope record mantle core a c -&gt; Rope record mantle core b d
forall a b c d e f.
(a -&gt; b -&gt; c)
-&gt; (d -&gt; e -&gt; f)
-&gt; Rope record mantle core a d
-&gt; Rope record mantle core b e
-&gt; Rope record mantle core c f
forall (p :: BinEff).
Bifunctor p
-&gt; (forall a b. a -&gt; b -&gt; p a b)
-&gt; (forall a b c d. p (a -&gt; b) (c -&gt; d) -&gt; p a c -&gt; p b d)
-&gt; (forall a b c d e f.
    (a -&gt; b -&gt; c) -&gt; (d -&gt; e -&gt; f) -&gt; p a d -&gt; p b e -&gt; p c f)
-&gt; (forall a b c d. p a b -&gt; p c d -&gt; p c d)
-&gt; (forall a b c d. p a b -&gt; p c d -&gt; p a b)
-&gt; Biapplicative p
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Biapplicative core =&gt;
Bifunctor (Rope record mantle core)
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b.
Biapplicative core =&gt;
a -&gt; b -&gt; Rope record mantle core a b
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c d.
Biapplicative core =&gt;
Rope record mantle core a b
-&gt; Rope record mantle core c d -&gt; Rope record mantle core a b
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c d.
Biapplicative core =&gt;
Rope record mantle core a b
-&gt; Rope record mantle core c d -&gt; Rope record mantle core c d
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c d.
Biapplicative core =&gt;
Rope record mantle core (a -&gt; b) (c -&gt; d)
-&gt; Rope record mantle core a c -&gt; Rope record mantle core b d
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c d e f.
Biapplicative core =&gt;
(a -&gt; b -&gt; c)
-&gt; (d -&gt; e -&gt; f)
-&gt; Rope record mantle core a d
-&gt; Rope record mantle core b e
-&gt; Rope record mantle core c f
&lt;&lt;* :: Rope record mantle core a b
-&gt; Rope record mantle core c d -&gt; Rope record mantle core a b
$c&lt;&lt;* :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c d.
Biapplicative core =&gt;
Rope record mantle core a b
-&gt; Rope record mantle core c d -&gt; Rope record mantle core a b
*&gt;&gt; :: Rope record mantle core a b
-&gt; Rope record mantle core c d -&gt; Rope record mantle core c d
$c*&gt;&gt; :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c d.
Biapplicative core =&gt;
Rope record mantle core a b
-&gt; Rope record mantle core c d -&gt; Rope record mantle core c d
biliftA2 :: (a -&gt; b -&gt; c)
-&gt; (d -&gt; e -&gt; f)
-&gt; Rope record mantle core a d
-&gt; Rope record mantle core b e
-&gt; Rope record mantle core c f
$cbiliftA2 :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c d e f.
Biapplicative core =&gt;
(a -&gt; b -&gt; c)
-&gt; (d -&gt; e -&gt; f)
-&gt; Rope record mantle core a d
-&gt; Rope record mantle core b e
-&gt; Rope record mantle core c f
&lt;&lt;*&gt;&gt; :: Rope record mantle core (a -&gt; b) (c -&gt; d)
-&gt; Rope record mantle core a c -&gt; Rope record mantle core b d
$c&lt;&lt;*&gt;&gt; :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b c d.
Biapplicative core =&gt;
Rope record mantle core (a -&gt; b) (c -&gt; d)
-&gt; Rope record mantle core a c -&gt; Rope record mantle core b d
bipure :: a -&gt; b -&gt; Rope record mantle core a b
$cbipure :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b.
Biapplicative core =&gt;
a -&gt; b -&gt; Rope record mantle core a b
$cp1Biapplicative :: forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff).
Biapplicative core =&gt;
Bifunctor (Rope record mantle core)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Biapplicative</span></span></span></span></span></span></span><span>
</span><span id="line-114"></span><span>           </span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span id="local-6989586621679082135"><span id="local-6989586621679082136"><span id="local-6989586621679082137"><span id="local-6989586621679082138"><span id="local-6989586621679082139"><span class="annot"><a href="Control.Kernmantle.Rope.html#runRope"><span class="hs-identifier hs-type">runRope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082139"><span class="hs-identifier hs-type">record</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082138"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082137"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082136"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082135"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679082139"><span class="hs-identifier hs-type">record</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#Weaver"><span class="hs-identifier hs-type">Weaver</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082137"><span class="hs-identifier hs-type">core</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679082138"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679082137"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082136"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082135"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span></span><span>
</span><span id="line-117"></span><span id="runRope"><span class="annot"><span class="annottext">runRope :: Rope record mantle core a b
-&gt; record (Weaver core) mantle -&gt; core a b
</span><a href="Control.Kernmantle.Rope.html#runRope"><span class="hs-identifier hs-var hs-var">runRope</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#RopeRunner"><span class="hs-identifier hs-type">RopeRunner</span></a></span><span> </span><span id="local-6989586621679081807"><span class="annot"><span class="annottext">record (Weaver core) mantle -&gt; core a b
</span><a href="#local-6989586621679081807"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">record (Weaver core) mantle -&gt; core a b
</span><a href="#local-6989586621679081807"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-118"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#runRope"><span class="hs-pragma hs-type">runRope</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span id="local-6989586621679082143"><span id="local-6989586621679082144"><span id="local-6989586621679082145"><span id="local-6989586621679082146"><span id="local-6989586621679082147"><span class="annot"><a href="Control.Kernmantle.Rope.html#mkRope"><span class="hs-identifier hs-type">mkRope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679082147"><span class="hs-identifier hs-type">record</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#Weaver"><span class="hs-identifier hs-type">Weaver</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082146"><span class="hs-identifier hs-type">core</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679082145"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679082146"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082144"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082143"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082147"><span class="hs-identifier hs-type">record</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082145"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082146"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082144"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082143"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span></span><span>
</span><span id="line-121"></span><span id="mkRope"><span class="annot"><span class="annottext">mkRope :: (record (Weaver core) mantle -&gt; core a b)
-&gt; Rope record mantle core a b
</span><a href="Control.Kernmantle.Rope.html#mkRope"><span class="hs-identifier hs-var hs-var">mkRope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RopeRunner record mantle core core a b
-&gt; Rope record mantle core a b
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b.
RopeRunner record mantle core core a b
-&gt; Rope record mantle core a b
</span><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-var">Rope</span></a></span><span> </span><span class="annot"><span class="annottext">(RopeRunner record mantle core core a b
 -&gt; Rope record mantle core a b)
-&gt; ((record (Weaver core) mantle -&gt; core a b)
    -&gt; RopeRunner record mantle core core a b)
-&gt; (record (Weaver core) mantle -&gt; core a b)
-&gt; Rope record mantle core a b
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(record (Weaver core) mantle -&gt; core a b)
-&gt; RopeRunner record mantle core core a b
forall (record :: RopeRec) (mantle :: [Strand]) (interp :: BinEff)
       (core :: BinEff) a b.
(record (Weaver interp) mantle -&gt; core a b)
-&gt; RopeRunner record mantle interp core a b
</span><a href="Control.Kernmantle.Rope.Internal.html#RopeRunner"><span class="hs-identifier hs-var">RopeRunner</span></a></span><span>
</span><span id="line-122"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#mkRope"><span class="hs-pragma hs-type">mkRope</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-comment">-- | Applies a function on the core action of the Rope</span><span>
</span><span id="line-125"></span><span id="local-6989586621679081799"><span id="local-6989586621679081800"><span id="local-6989586621679081801"><span id="local-6989586621679081802"><span id="local-6989586621679081803"><span id="local-6989586621679081804"><span id="local-6989586621679081805"><span class="annot"><a href="Control.Kernmantle.Rope.html#mapRopeCore"><span class="hs-identifier hs-type">mapRopeCore</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679081805"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081804"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081803"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679081805"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081802"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081801"><span class="hs-identifier hs-type">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081800"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081799"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081805"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081804"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081803"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081800"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081799"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081805"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081802"><span class="hs-identifier hs-type">a'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081801"><span class="hs-identifier hs-type">b'</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-126"></span><span id="mapRopeCore"><span class="annot"><span class="annottext">mapRopeCore :: (core a b -&gt; core a' b')
-&gt; Rope r m core a b -&gt; Rope r m core a' b'
</span><a href="Control.Kernmantle.Rope.html#mapRopeCore"><span class="hs-identifier hs-var hs-var">mapRopeCore</span></a></span></span><span> </span><span id="local-6989586621679081798"><span class="annot"><span class="annottext">core a b -&gt; core a' b'
</span><a href="#local-6989586621679081798"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679081797"><span class="annot"><span class="annottext">Rope r m core a b
</span><a href="#local-6989586621679081797"><span class="hs-identifier hs-var">rope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(r (Weaver core) m -&gt; core a' b') -&gt; Rope r m core a' b'
forall (record :: RopeRec) (core :: BinEff) (mantle :: [Strand]) a
       b.
(record (Weaver core) mantle -&gt; core a b)
-&gt; Rope record mantle core a b
</span><a href="Control.Kernmantle.Rope.html#mkRope"><span class="hs-identifier hs-var">mkRope</span></a></span><span> </span><span class="annot"><span class="annottext">((r (Weaver core) m -&gt; core a' b') -&gt; Rope r m core a' b')
-&gt; (r (Weaver core) m -&gt; core a' b') -&gt; Rope r m core a' b'
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">core a b -&gt; core a' b'
</span><a href="#local-6989586621679081798"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(core a b -&gt; core a' b')
-&gt; (r (Weaver core) m -&gt; core a b)
-&gt; r (Weaver core) m
-&gt; core a' b'
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Rope r m core a b -&gt; r (Weaver core) m -&gt; core a b
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b.
Rope record mantle core a b
-&gt; record (Weaver core) mantle -&gt; core a b
</span><a href="Control.Kernmantle.Rope.html#runRope"><span class="hs-identifier hs-var">runRope</span></a></span><span> </span><span class="annot"><span class="annottext">Rope r m core a b
</span><a href="#local-6989586621679081797"><span class="hs-identifier hs-var">rope</span></a></span><span>
</span><span id="line-127"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#mapRopeCore"><span class="hs-pragma hs-type">mapRopeCore</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-comment">-- | A 'Rope' that is &quot;tight&quot;, meaning you cannot 'weave' new 'Strand's to</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- it. The 'strand' function is @O(1)@ on 'TightRope's whatever the number of</span><span>
</span><span id="line-131"></span><span class="hs-comment">-- 'Strand's.</span><span>
</span><span id="line-132"></span><span class="hs-keyword">type</span><span> </span><span id="TightRope"><span class="annot"><a href="Control.Kernmantle.Rope.html#TightRope"><span class="hs-identifier hs-var">TightRope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ARec</span></span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span class="hs-comment">-- | A 'Rope' that is &quot;loose&quot;, meaning you can 'weave' new 'Strand's to</span><span>
</span><span id="line-135"></span><span class="hs-comment">-- it. The 'strand' function is @O(n)@ on 'LooseRope's, @n@ being the number of</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- 'Strand's.</span><span>
</span><span id="line-137"></span><span class="hs-keyword">type</span><span> </span><span id="LooseRope"><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-var">LooseRope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rec</span></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="hs-comment">-- | Tells that a strand of effects '(l,eff) is present in the rope</span><span>
</span><span id="line-140"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="InRope"><span class="annot"><a href="Control.Kernmantle.Rope.html#InRope"><span class="hs-identifier hs-var">InRope</span></a></span></span><span> </span><span id="local-6989586621679081796"><span class="annot"><a href="#local-6989586621679081796"><span class="hs-identifier hs-type">l</span></a></span></span><span> </span><span id="local-6989586621679081795"><span class="annot"><a href="#local-6989586621679081795"><span class="hs-identifier hs-type">eff</span></a></span></span><span> </span><span id="local-6989586621679081794"><span class="annot"><a href="#local-6989586621679081794"><span class="hs-identifier hs-type">rope</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-141"></span><span>  </span><span id="InRope"><span class="annot"><a href="Control.Kernmantle.Rope.html#InRope"><span class="hs-identifier hs-var">InRope</span></a></span></span><span> </span><span id="local-6989586621679081793"><span class="annot"><a href="#local-6989586621679081793"><span class="hs-identifier hs-type hs-type">l</span></a></span></span><span> </span><span id="local-6989586621679081792"><span class="annot"><a href="#local-6989586621679081792"><span class="hs-identifier hs-type hs-type">eff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span id="local-6989586621679081791"><span class="annot"><a href="#local-6989586621679081791"><span class="hs-identifier hs-type hs-type">record</span></a></span></span><span> </span><span id="local-6989586621679081790"><span class="annot"><a href="#local-6989586621679081790"><span class="hs-identifier hs-type hs-type">mantle</span></a></span></span><span> </span><span id="local-6989586621679081789"><span class="annot"><a href="#local-6989586621679081789"><span class="hs-identifier hs-type hs-type">core</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasField</span></span><span> </span><span class="annot"><a href="#local-6989586621679081791"><span class="hs-identifier hs-type">record</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081793"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081790"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081790"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081792"><span class="hs-identifier hs-type">eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081792"><span class="hs-identifier hs-type">eff</span></a></span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RecElemFCtx</span></span><span> </span><span class="annot"><a href="#local-6989586621679081791"><span class="hs-identifier hs-type">record</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#Weaver"><span class="hs-identifier hs-type">Weaver</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081789"><span class="hs-identifier hs-type">core</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span id="local-6989586621679081784"><span id="local-6989586621679081785"><span id="local-6989586621679081786"><span id="local-6989586621679081787"><span id="local-6989586621679081788"><span class="annot"><a href="Control.Kernmantle.Rope.html#strand"><span class="hs-identifier hs-type">strand</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.html#InRope"><span class="hs-identifier hs-type">InRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081788"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081787"><span class="hs-identifier hs-type">eff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081786"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081785"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081784"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>       </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Label</span></span><span> </span><span class="annot"><a href="#local-6989586621679081788"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679081787"><span class="hs-identifier hs-type">eff</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081786"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081785"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081784"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span></span><span>
</span><span id="line-147"></span><span id="strand"><span class="annot"><span class="annottext">strand :: Label l -&gt; eff :-&gt; Rope r m c
</span><a href="Control.Kernmantle.Rope.html#strand"><span class="hs-identifier hs-var hs-var">strand</span></a></span></span><span> </span><span id="local-6989586621679081783"><span class="annot"><span class="annottext">Label l
</span><a href="#local-6989586621679081783"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679081782"><span class="annot"><span class="annottext">eff a b
</span><a href="#local-6989586621679081782"><span class="hs-identifier hs-var">eff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(r (Weaver c) m -&gt; c a b) -&gt; Rope r m c a b
forall (record :: RopeRec) (core :: BinEff) (mantle :: [Strand]) a
       b.
(record (Weaver core) mantle -&gt; core a b)
-&gt; Rope record mantle core a b
</span><a href="Control.Kernmantle.Rope.html#mkRope"><span class="hs-identifier hs-var">mkRope</span></a></span><span> </span><span class="annot"><span class="annottext">((r (Weaver c) m -&gt; c a b) -&gt; Rope r m c a b)
-&gt; (r (Weaver c) m -&gt; c a b) -&gt; Rope r m c a b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679081781"><span class="annot"><span class="annottext">r (Weaver c) m
</span><a href="#local-6989586621679081781"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Weaver c (l ::: eff) -&gt; StrandEff (l ::: eff) a b -&gt; c a b
forall (interp :: BinEff) (strand :: Strand).
Weaver interp strand
-&gt; forall a b. StrandEff strand a b -&gt; interp a b
</span><a href="Control.Kernmantle.Rope.Internal.html#weaveStrand"><span class="hs-identifier hs-var hs-var">weaveStrand</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Label l -&gt; r (Weaver c) m -&gt; Weaver c (l ::: eff)
forall k (l :: Symbol) (f :: (Symbol, k) -&gt; *) (v :: k)
       (record :: ((Symbol, k) -&gt; *) -&gt; [(Symbol, k)] -&gt; *)
       (us :: [(Symbol, k)]).
(HasField record l us us v v, RecElemFCtx record f) =&gt;
Label l -&gt; record f us -&gt; f (l ::: v)
</span><span class="hs-identifier hs-var">rgetf</span></span><span> </span><span class="annot"><span class="annottext">Label l
</span><a href="#local-6989586621679081783"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">r (Weaver c) m
</span><a href="#local-6989586621679081781"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">eff a b
StrandEff (l ::: eff) a b
</span><a href="#local-6989586621679081782"><span class="hs-identifier hs-var">eff</span></a></span><span>
</span><span id="line-148"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#strand"><span class="hs-pragma hs-type">strand</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span id="local-6989586621679081774"><span id="local-6989586621679081775"><span id="local-6989586621679081776"><span id="local-6989586621679081777"><span id="local-6989586621679081778"><span class="annot"><a href="Control.Kernmantle.Rope.html#mapStrand"><span class="hs-identifier hs-type">mapStrand</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.html#InRope"><span class="hs-identifier hs-type">InRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081778"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081777"><span class="hs-identifier hs-type">eff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081776"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081775"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081774"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-151"></span><span>          </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Label</span></span><span> </span><span class="annot"><a href="#local-6989586621679081778"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679081777"><span class="hs-identifier hs-type">eff</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679081777"><span class="hs-identifier hs-type">eff</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081776"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081775"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081774"><span class="hs-identifier hs-type">c</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081776"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081775"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081774"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span></span><span>
</span><span id="line-152"></span><span id="mapStrand"><span class="annot"><span class="annottext">mapStrand :: Label l -&gt; (eff :-&gt; eff) -&gt; Rope r m c :-&gt; Rope r m c
</span><a href="Control.Kernmantle.Rope.html#mapStrand"><span class="hs-identifier hs-var hs-var">mapStrand</span></a></span></span><span> </span><span id="local-6989586621679081773"><span class="annot"><span class="annottext">Label l
</span><a href="#local-6989586621679081773"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679081772"><span class="annot"><span class="annottext">eff :-&gt; eff
</span><a href="#local-6989586621679081772"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679081771"><span class="annot"><span class="annottext">Rope r m c a b
</span><a href="#local-6989586621679081771"><span class="hs-identifier hs-var">rope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-153"></span><span>  </span><span class="annot"><span class="annottext">(r (Weaver c) m -&gt; c a b) -&gt; Rope r m c a b
forall (record :: RopeRec) (core :: BinEff) (mantle :: [Strand]) a
       b.
(record (Weaver core) mantle -&gt; core a b)
-&gt; Rope record mantle core a b
</span><a href="Control.Kernmantle.Rope.html#mkRope"><span class="hs-identifier hs-var">mkRope</span></a></span><span> </span><span class="annot"><span class="annottext">((r (Weaver c) m -&gt; c a b) -&gt; Rope r m c a b)
-&gt; (r (Weaver c) m -&gt; c a b) -&gt; Rope r m c a b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Rope r m c a b -&gt; r (Weaver c) m -&gt; c a b
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b.
Rope record mantle core a b
-&gt; record (Weaver core) mantle -&gt; core a b
</span><a href="Control.Kernmantle.Rope.html#runRope"><span class="hs-identifier hs-var">runRope</span></a></span><span> </span><span class="annot"><span class="annottext">Rope r m c a b
</span><a href="#local-6989586621679081771"><span class="hs-identifier hs-var">rope</span></a></span><span> </span><span class="annot"><span class="annottext">(r (Weaver c) m -&gt; c a b)
-&gt; (r (Weaver c) m -&gt; r (Weaver c) m) -&gt; r (Weaver c) m -&gt; c a b
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((Weaver c (l ::: eff) -&gt; Identity (Weaver c (l ::: eff)))
 -&gt; r (Weaver c) m -&gt; Identity (r (Weaver c) m))
-&gt; (Weaver c (l ::: eff) -&gt; Weaver c (l ::: eff))
-&gt; r (Weaver c) m
-&gt; r (Weaver c) m
forall (p :: BinEff) (p :: BinEff) a b a c.
(Profunctor p, Profunctor p) =&gt;
(p a (Identity b) -&gt; p a (Identity c)) -&gt; p a b -&gt; p a c
</span><a href="#local-6989586621679081770"><span class="hs-identifier hs-var">over</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Label l
-&gt; (Weaver c (l ::: eff) -&gt; Identity (Weaver c (l ::: eff)))
-&gt; r (Weaver c) m
-&gt; Identity (r (Weaver c) m)
forall k (l :: Symbol) (v :: k)
       (record :: ((Symbol, k) -&gt; *) -&gt; [(Symbol, k)] -&gt; *) (g :: * -&gt; *)
       (f :: (Symbol, k) -&gt; *) (us :: [(Symbol, k)]).
(Functor g, HasField record l us us v v, RecElemFCtx record f) =&gt;
Label l
-&gt; (f (l ::: v) -&gt; g (f (l ::: v)))
-&gt; record f us
-&gt; g (record f us)
</span><span class="hs-identifier hs-var">rlensfL</span></span><span> </span><span class="annot"><span class="annottext">Label l
</span><a href="#local-6989586621679081773"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#Weaver"><span class="hs-identifier hs-type">Weaver</span></a></span><span> </span><span id="local-6989586621679081767"><span class="annot"><span class="annottext">StrandEff (l ::: eff) :-&gt; c
</span><a href="#local-6989586621679081767"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(StrandEff (l ::: eff) :-&gt; c) -&gt; Weaver c (l ::: eff)
forall (interp :: BinEff) (strand :: Strand).
(forall a b. StrandEff strand a b -&gt; interp a b)
-&gt; Weaver interp strand
</span><a href="Control.Kernmantle.Rope.Internal.html#Weaver"><span class="hs-identifier hs-var">Weaver</span></a></span><span> </span><span class="annot"><span class="annottext">((StrandEff (l ::: eff) :-&gt; c) -&gt; Weaver c (l ::: eff))
-&gt; (StrandEff (l ::: eff) :-&gt; c) -&gt; Weaver c (l ::: eff)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">eff a b -&gt; c a b
StrandEff (l ::: eff) :-&gt; c
</span><a href="#local-6989586621679081767"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">(eff a b -&gt; c a b) -&gt; (eff a b -&gt; eff a b) -&gt; eff a b -&gt; c a b
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">eff a b -&gt; eff a b
eff :-&gt; eff
</span><a href="#local-6989586621679081772"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-155"></span><span>    </span><span id="local-6989586621679081770"><span class="annot"><span class="annottext">over :: (p a (Identity b) -&gt; p a (Identity c)) -&gt; p a b -&gt; p a c
</span><a href="#local-6989586621679081770"><span class="hs-identifier hs-var hs-var">over</span></a></span></span><span> </span><span id="local-6989586621679081766"><span class="annot"><span class="annottext">p a (Identity b) -&gt; p a (Identity c)
</span><a href="#local-6989586621679081766"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621679081765"><span class="annot"><span class="annottext">p a b
</span><a href="#local-6989586621679081765"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Identity c -&gt; c
forall a. Identity a -&gt; a
</span><span class="hs-identifier hs-var hs-var">getIdentity</span></span><span> </span><span class="annot"><span class="annottext">(Identity c -&gt; c) -&gt; p a (Identity c) -&gt; p a c
forall (p :: BinEff) a b c (q :: BinEff).
(Profunctor p, Coercible c b) =&gt;
q b c -&gt; p a b -&gt; p a c
</span><span class="hs-operator hs-var">#.</span></span><span> </span><span class="annot"><span class="annottext">p a (Identity b) -&gt; p a (Identity c)
</span><a href="#local-6989586621679081766"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">b -&gt; Identity b
forall a. a -&gt; Identity a
</span><span class="hs-identifier hs-var">Identity</span></span><span> </span><span class="annot"><span class="annottext">(b -&gt; Identity b) -&gt; p a b -&gt; p a (Identity b)
forall (p :: BinEff) a b c (q :: BinEff).
(Profunctor p, Coercible c b) =&gt;
q b c -&gt; p a b -&gt; p a c
</span><span class="hs-operator hs-var">#.</span></span><span> </span><span class="annot"><span class="annottext">p a b
</span><a href="#local-6989586621679081765"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- we don't depend on lens</span><span>
</span><span id="line-156"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#mapStrand"><span class="hs-pragma hs-type">mapStrand</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-comment">-- | Tells whether a collection of @strands@ is in a 'Rope'.</span><span>
</span><span id="line-159"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span id="local-6989586621679081762"><span class="annot"><a href="#local-6989586621679081762"><span class="hs-identifier hs-type">rope</span></a></span></span><span> </span><span id="Entwines"><span class="annot"><a href="Control.Kernmantle.Rope.html#Entwines"><span class="hs-operator hs-var">`Entwines`</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679081761"><span class="annot"><a href="#local-6989586621679081761"><span class="hs-identifier hs-type">strands</span></a></span></span><span class="hs-glyph">::</span><span class="hs-special">[</span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#Strand"><span class="hs-identifier hs-type">Strand</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Constraint</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-160"></span><span>  </span><span id="local-6989586621679081760"><span class="annot"><a href="#local-6989586621679081760"><span class="hs-identifier hs-type hs-type">rope</span></a></span></span><span> </span><span id="Entwines"><span class="annot"><a href="Control.Kernmantle.Rope.html#Entwines"><span class="hs-operator hs-var">`Entwines`</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>  </span><span id="local-6989586621679081759"><span class="annot"><a href="#local-6989586621679081759"><span class="hs-identifier hs-type hs-type">rope</span></a></span></span><span> </span><span id="Entwines"><span class="annot"><a href="Control.Kernmantle.Rope.html#Entwines"><span class="hs-operator hs-var">`Entwines`</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-special">(</span><span id="local-6989586621679081758"><span class="annot"><a href="#local-6989586621679081758"><span class="hs-identifier hs-type hs-type">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679081757"><span class="annot"><a href="#local-6989586621679081757"><span class="hs-identifier hs-type hs-type">eff</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span id="local-6989586621679081756"><span class="annot"><a href="#local-6989586621679081756"><span class="hs-identifier hs-type hs-type">strands</span></a></span></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#InRope"><span class="hs-identifier hs-type">InRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081758"><span class="hs-identifier hs-type">name</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081757"><span class="hs-identifier hs-type">eff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081759"><span class="hs-identifier hs-type">rope</span></a></span><span>
</span><span id="line-162"></span><span>                                               </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679081759"><span class="hs-identifier hs-type">rope</span></a></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Entwines"><span class="hs-operator hs-type">`Entwines`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081756"><span class="hs-identifier hs-type">strands</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="hs-comment">-- | Tells whether a type satisfies all the given constraints.</span><span>
</span><span id="line-165"></span><span class="hs-keyword">type</span><span> </span><span class="hs-keyword">family</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679081755"><span class="annot"><a href="#local-6989586621679081755"><span class="hs-identifier hs-type">x</span></a></span></span><span class="hs-glyph">::</span><span id="local-6989586621679081754"><span class="annot"><a href="#local-6989586621679081754"><span class="hs-identifier hs-type hs-type">k</span></a></span></span><span class="hs-special">)</span><span> </span><span id="SatisfiesAll"><span class="annot"><a href="Control.Kernmantle.Rope.html#SatisfiesAll"><span class="hs-operator hs-var">`SatisfiesAll`</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679081753"><span class="annot"><a href="#local-6989586621679081753"><span class="hs-identifier hs-type">csts</span></a></span></span><span class="hs-glyph">::</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621679081754"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Constraint</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Constraint</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-166"></span><span>  </span><span id="local-6989586621679081752"><span class="annot"><a href="#local-6989586621679081752"><span class="hs-identifier hs-type hs-type">x</span></a></span></span><span> </span><span id="SatisfiesAll"><span class="annot"><a href="Control.Kernmantle.Rope.html#SatisfiesAll"><span class="hs-operator hs-var">`SatisfiesAll`</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>  </span><span id="local-6989586621679081751"><span class="annot"><a href="#local-6989586621679081751"><span class="hs-identifier hs-type hs-type">x</span></a></span></span><span> </span><span id="SatisfiesAll"><span class="annot"><a href="Control.Kernmantle.Rope.html#SatisfiesAll"><span class="hs-operator hs-var">`SatisfiesAll`</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679081750"><span class="annot"><a href="#local-6989586621679081750"><span class="hs-identifier hs-type hs-type">c1</span></a></span></span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span id="local-6989586621679081749"><span class="annot"><a href="#local-6989586621679081749"><span class="hs-identifier hs-type hs-type">cnsts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="#local-6989586621679081750"><span class="hs-identifier hs-type">c1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081751"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679081751"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#SatisfiesAll"><span class="hs-operator hs-type">`SatisfiesAll`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081749"><span class="hs-identifier hs-type">cnsts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="hs-comment">-- | A @AnyRopeWith strands costraints@ is a 'Rope' with contains the strands</span><span>
</span><span id="line-170"></span><span class="hs-comment">-- in the variable @strands@ , and whose core effect obeys the constraints in</span><span>
</span><span id="line-171"></span><span class="hs-comment">-- the @contraints@ variable.</span><span>
</span><span id="line-172"></span><span class="hs-keyword">type</span><span> </span><span id="AnyRopeWith"><span class="annot"><a href="Control.Kernmantle.Rope.html#AnyRopeWith"><span class="hs-identifier hs-var">AnyRopeWith</span></a></span></span><span> </span><span id="local-6989586621679081748"><span class="annot"><a href="#local-6989586621679081748"><span class="hs-identifier hs-type">strands</span></a></span></span><span> </span><span id="local-6989586621679081747"><span class="annot"><a href="#local-6989586621679081747"><span class="hs-identifier hs-type">coreConstraints</span></a></span></span><span> </span><span id="local-6989586621679081746"><span class="annot"><a href="#local-6989586621679081746"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679081745"><span class="annot"><a href="#local-6989586621679081745"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679081744"><span class="annot"><a href="#local-6989586621679081744"><span class="hs-identifier hs-type">mantle</span></a></span></span><span> </span><span id="local-6989586621679081743"><span class="annot"><a href="#local-6989586621679081743"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621679081742"><span class="annot"><a href="#local-6989586621679081742"><span class="hs-identifier hs-type">core</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081743"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081744"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081742"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Entwines"><span class="hs-operator hs-type">`Entwines`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081748"><span class="hs-identifier hs-type">strands</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679081742"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#SatisfiesAll"><span class="hs-operator hs-type">`SatisfiesAll`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081747"><span class="hs-identifier hs-type">coreConstraints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081743"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081744"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081742"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081746"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081745"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span class="hs-keyword">type</span><span> </span><span id="TightRopeWith"><span class="annot"><a href="Control.Kernmantle.Rope.html#TightRopeWith"><span class="hs-identifier hs-var">TightRopeWith</span></a></span></span><span> </span><span id="local-6989586621679081741"><span class="annot"><a href="#local-6989586621679081741"><span class="hs-identifier hs-type">strands</span></a></span></span><span> </span><span id="local-6989586621679081740"><span class="annot"><a href="#local-6989586621679081740"><span class="hs-identifier hs-type">coreConstraints</span></a></span></span><span> </span><span id="local-6989586621679081739"><span class="annot"><a href="#local-6989586621679081739"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679081738"><span class="annot"><a href="#local-6989586621679081738"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679081737"><span class="annot"><a href="#local-6989586621679081737"><span class="hs-identifier hs-type">mantle</span></a></span></span><span> </span><span id="local-6989586621679081736"><span class="annot"><a href="#local-6989586621679081736"><span class="hs-identifier hs-type">core</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-177"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.html#TightRope"><span class="hs-identifier hs-type">TightRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081737"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081736"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Entwines"><span class="hs-operator hs-type">`Entwines`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081741"><span class="hs-identifier hs-type">strands</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679081736"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#SatisfiesAll"><span class="hs-operator hs-type">`SatisfiesAll`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081740"><span class="hs-identifier hs-type">coreConstraints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#TightRope"><span class="hs-identifier hs-type">TightRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081737"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081736"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081739"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081738"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="hs-keyword">type</span><span> </span><span id="LooseRopeWith"><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRopeWith"><span class="hs-identifier hs-var">LooseRopeWith</span></a></span></span><span> </span><span id="local-6989586621679081735"><span class="annot"><a href="#local-6989586621679081735"><span class="hs-identifier hs-type">strands</span></a></span></span><span> </span><span id="local-6989586621679081734"><span class="annot"><a href="#local-6989586621679081734"><span class="hs-identifier hs-type">coreConstraints</span></a></span></span><span> </span><span id="local-6989586621679081733"><span class="annot"><a href="#local-6989586621679081733"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679081732"><span class="annot"><a href="#local-6989586621679081732"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679081731"><span class="annot"><a href="#local-6989586621679081731"><span class="hs-identifier hs-type">mantle</span></a></span></span><span> </span><span id="local-6989586621679081730"><span class="annot"><a href="#local-6989586621679081730"><span class="hs-identifier hs-type">core</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-181"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081731"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081730"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Entwines"><span class="hs-operator hs-type">`Entwines`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081735"><span class="hs-identifier hs-type">strands</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679081730"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#SatisfiesAll"><span class="hs-operator hs-type">`SatisfiesAll`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081734"><span class="hs-identifier hs-type">coreConstraints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081731"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081730"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081733"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081732"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-comment">-- | Useful for functions that want to use tighten/loosen</span><span>
</span><span id="line-185"></span><span class="hs-keyword">type</span><span> </span><span id="AllInMantle"><span class="annot"><a href="Control.Kernmantle.Rope.html#AllInMantle"><span class="hs-identifier hs-var">AllInMantle</span></a></span></span><span> </span><span id="local-6989586621679081729"><span class="annot"><a href="#local-6989586621679081729"><span class="hs-identifier hs-type">strands</span></a></span></span><span> </span><span id="local-6989586621679081728"><span class="annot"><a href="#local-6989586621679081728"><span class="hs-identifier hs-type">mantle</span></a></span></span><span> </span><span id="local-6989586621679081727"><span class="annot"><a href="#local-6989586621679081727"><span class="hs-identifier hs-type">core</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-186"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NatToInt</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">RLength</span></span><span> </span><span class="annot"><a href="#local-6989586621679081728"><span class="hs-identifier hs-type">mantle</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RecApplicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679081728"><span class="hs-identifier hs-type">mantle</span></a></span><span>
</span><span id="line-188"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RPureConstrained</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IndexableField</span></span><span> </span><span class="annot"><a href="#local-6989586621679081728"><span class="hs-identifier hs-type">mantle</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679081728"><span class="hs-identifier hs-type">mantle</span></a></span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081728"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081727"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Entwines"><span class="hs-operator hs-type">`Entwines`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081729"><span class="hs-identifier hs-type">strands</span></a></span><span>
</span><span id="line-190"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#TightRope"><span class="hs-identifier hs-type">TightRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081728"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081727"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Entwines"><span class="hs-operator hs-type">`Entwines`</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081729"><span class="hs-identifier hs-type">strands</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>  </span><span class="hs-comment">-- vinyl constraints make it so we have to repeat the Entwines constraint, as</span><span>
</span><span id="line-192"></span><span>  </span><span class="hs-comment">-- we need it for both tight and loose ropes here</span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="hs-comment">-- | Turn a 'LooseRope' into a 'TightRope'</span><span>
</span><span id="line-195"></span><span id="local-6989586621679081725"><span id="local-6989586621679081726"><span class="annot"><a href="Control.Kernmantle.Rope.html#tighten"><span class="hs-identifier hs-type">tighten</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">RecApplicative</span></span><span> </span><span class="annot"><a href="#local-6989586621679081726"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">RPureConstrained</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IndexableField</span></span><span> </span><span class="annot"><a href="#local-6989586621679081726"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679081726"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081726"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081725"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#TightRope"><span class="hs-identifier hs-type">TightRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081726"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081725"><span class="hs-identifier hs-type">core</span></a></span></span></span><span>
</span><span id="line-197"></span><span id="tighten"><span class="annot"><span class="annottext">tighten :: LooseRope m core :-&gt; TightRope m core
</span><a href="Control.Kernmantle.Rope.html#tighten"><span class="hs-identifier hs-var hs-var">tighten</span></a></span></span><span> </span><span id="local-6989586621679081724"><span class="annot"><span class="annottext">LooseRope m core a b
</span><a href="#local-6989586621679081724"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ARec (Weaver core) m -&gt; core a b) -&gt; Rope ARec m core a b
forall (record :: RopeRec) (core :: BinEff) (mantle :: [Strand]) a
       b.
(record (Weaver core) mantle -&gt; core a b)
-&gt; Rope record mantle core a b
</span><a href="Control.Kernmantle.Rope.html#mkRope"><span class="hs-identifier hs-var">mkRope</span></a></span><span> </span><span class="annot"><span class="annottext">((ARec (Weaver core) m -&gt; core a b) -&gt; Rope ARec m core a b)
-&gt; (ARec (Weaver core) m -&gt; core a b) -&gt; Rope ARec m core a b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LooseRope m core a b -&gt; Rec (Weaver core) m -&gt; core a b
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b.
Rope record mantle core a b
-&gt; record (Weaver core) mantle -&gt; core a b
</span><a href="Control.Kernmantle.Rope.html#runRope"><span class="hs-identifier hs-var">runRope</span></a></span><span> </span><span class="annot"><span class="annottext">LooseRope m core a b
</span><a href="#local-6989586621679081724"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">(Rec (Weaver core) m -&gt; core a b)
-&gt; (ARec (Weaver core) m -&gt; Rec (Weaver core) m)
-&gt; ARec (Weaver core) m
-&gt; core a b
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ARec (Weaver core) m -&gt; Rec (Weaver core) m
forall u (f :: u -&gt; *) (ts :: [u]).
(RecApplicative ts, RPureConstrained (IndexableField ts) ts) =&gt;
ARec f ts -&gt; Rec f ts
</span><span class="hs-identifier hs-var">fromARec</span></span><span>
</span><span id="line-198"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#tighten"><span class="hs-pragma hs-type">tighten</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span class="hs-comment">-- | Turn a 'TightRope' into a 'LooseRope'. This is very often the first step</span><span>
</span><span id="line-201"></span><span class="hs-comment">-- in a chain of 'weave's.</span><span>
</span><span id="line-202"></span><span id="local-6989586621679081721"><span id="local-6989586621679081722"><span class="annot"><a href="Control.Kernmantle.Rope.html#loosen"><span class="hs-identifier hs-type">loosen</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NatToInt</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">RLength</span></span><span> </span><span class="annot"><a href="#local-6989586621679081722"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>       </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#TightRope"><span class="hs-identifier hs-type">TightRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081722"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081721"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081722"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081721"><span class="hs-identifier hs-type">core</span></a></span></span></span><span>
</span><span id="line-204"></span><span id="loosen"><span class="annot"><span class="annottext">loosen :: TightRope m core :-&gt; LooseRope m core
</span><a href="Control.Kernmantle.Rope.html#loosen"><span class="hs-identifier hs-var hs-var">loosen</span></a></span></span><span> </span><span id="local-6989586621679081720"><span class="annot"><span class="annottext">TightRope m core a b
</span><a href="#local-6989586621679081720"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Rec (Weaver core) m -&gt; core a b) -&gt; Rope Rec m core a b
forall (record :: RopeRec) (core :: BinEff) (mantle :: [Strand]) a
       b.
(record (Weaver core) mantle -&gt; core a b)
-&gt; Rope record mantle core a b
</span><a href="Control.Kernmantle.Rope.html#mkRope"><span class="hs-identifier hs-var">mkRope</span></a></span><span> </span><span class="annot"><span class="annottext">((Rec (Weaver core) m -&gt; core a b) -&gt; Rope Rec m core a b)
-&gt; (Rec (Weaver core) m -&gt; core a b) -&gt; Rope Rec m core a b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TightRope m core a b -&gt; ARec (Weaver core) m -&gt; core a b
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b.
Rope record mantle core a b
-&gt; record (Weaver core) mantle -&gt; core a b
</span><a href="Control.Kernmantle.Rope.html#runRope"><span class="hs-identifier hs-var">runRope</span></a></span><span> </span><span class="annot"><span class="annottext">TightRope m core a b
</span><a href="#local-6989586621679081720"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">(ARec (Weaver core) m -&gt; core a b)
-&gt; (Rec (Weaver core) m -&gt; ARec (Weaver core) m)
-&gt; Rec (Weaver core) m
-&gt; core a b
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Rec (Weaver core) m -&gt; ARec (Weaver core) m
forall k (f :: k -&gt; *) (ts :: [k]).
NatToInt (RLength ts) =&gt;
Rec f ts -&gt; ARec f ts
</span><span class="hs-identifier hs-var">toARec</span></span><span>
</span><span id="line-205"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#loosen"><span class="hs-pragma hs-type">loosen</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-comment">-- | Adds a new effect strand in the 'Rope' by decribing how to interpret that</span><span>
</span><span id="line-208"></span><span class="hs-comment">-- in the core. The interpretation function is fed the fixpoint of all</span><span>
</span><span id="line-209"></span><span class="hs-comment">-- interpretation functions, meaning the interpretation function can itself use</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- effects in the 'Rope'. For example, given an effect @Eff@, whose label is</span><span>
</span><span id="line-211"></span><span class="hs-comment">-- &quot;effect&quot; being interpreted in a core effect @CoreEff@, one first defines an</span><span>
</span><span id="line-212"></span><span class="hs-comment">-- interpretation function:</span><span>
</span><span id="line-213"></span><span class="hs-comment">--</span><span>
</span><span id="line-214"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-215"></span><span class="hs-comment">--   interpret ::</span><span>
</span><span id="line-216"></span><span class="hs-comment">--     (LooseRope '(&quot;effect&quot;,Eff) ': mantle) core :-&gt; CoreEff) -&gt;</span><span>
</span><span id="line-217"></span><span class="hs-comment">--      Eff a b -&gt; CoreEff a b</span><span>
</span><span id="line-218"></span><span class="hs-comment">--</span><span>
</span><span id="line-219"></span><span class="hs-comment">--   interpret ::</span><span>
</span><span id="line-220"></span><span class="hs-comment">--     (LooseRope '(&quot;effect&quot;,Eff) ': mantle) core :-&gt; CoreEff) -&gt;</span><span>
</span><span id="line-221"></span><span class="hs-comment">--     (Eff :-&gt; CoreEff)</span><span>
</span><span id="line-222"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-223"></span><span class="hs-comment">--</span><span>
</span><span id="line-224"></span><span class="hs-comment">-- where @p :-&gt; q@ corresponds to @forall a b. p a b -&gt; q a b@, and obtain an</span><span>
</span><span id="line-225"></span><span class="hs-comment">-- interpreter for the strand:</span><span>
</span><span id="line-226"></span><span class="hs-comment">--</span><span>
</span><span id="line-227"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-228"></span><span class="hs-comment">--   strandInterpreter ::</span><span>
</span><span id="line-229"></span><span class="hs-comment">--     LooseRope ('(&quot;effect&quot;,Eff) ': mantle) CoreEff :-&gt;</span><span>
</span><span id="line-230"></span><span class="hs-comment">--     LooseRope mantle CoreEff</span><span>
</span><span id="line-231"></span><span class="hs-comment">--   strandInterpreter = weave #effect interpret</span><span>
</span><span id="line-232"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-233"></span><span class="hs-comment">--</span><span>
</span><span id="line-234"></span><span class="annot"><a href="Control.Kernmantle.Rope.html#weave"><span class="hs-identifier hs-type">weave</span></a></span><span>
</span><span id="line-235"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679082043"><span class="annot"><a href="#local-6989586621679082043"><span class="hs-identifier hs-type">name</span></a></span></span><span> </span><span id="local-6989586621679082042"><span class="annot"><a href="#local-6989586621679082042"><span class="hs-identifier hs-type">binEff</span></a></span></span><span> </span><span id="local-6989586621679082041"><span class="annot"><a href="#local-6989586621679082041"><span class="hs-identifier hs-type">mantle</span></a></span></span><span> </span><span id="local-6989586621679082040"><span class="annot"><a href="#local-6989586621679082040"><span class="hs-identifier hs-type">core</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-236"></span><span>     </span><span class="annot"><span class="hs-identifier hs-type">Label</span></span><span> </span><span class="annot"><a href="#local-6989586621679082043"><span class="hs-identifier hs-type">name</span></a></span><span>
</span><span id="line-237"></span><span>  </span><span class="hs-comment">-- ^ The name of the strand to be woven.</span><span>
</span><span id="line-238"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679082043"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679082042"><span class="hs-identifier hs-type">binEff</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679082041"><span class="hs-identifier hs-type">mantle</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679082040"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679082040"><span class="hs-identifier hs-type">core</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679082042"><span class="hs-identifier hs-type">binEff</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679082040"><span class="hs-identifier hs-type">core</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>  </span><span class="hs-comment">-- ^ The interpretation function for the effect, which can depend on the</span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-comment">-- global interpretation function for the rope.</span><span>
</span><span id="line-241"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679082043"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679082042"><span class="hs-identifier hs-type">binEff</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679082041"><span class="hs-identifier hs-type">mantle</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679082040"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082041"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082040"><span class="hs-identifier hs-type">core</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>  </span><span class="hs-comment">-- ^ An interpretation function for a 'Rope' with containing the given effect</span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-comment">-- strand, transformed into the same Rope but with that effect woven in the</span><span>
</span><span id="line-244"></span><span>  </span><span class="hs-comment">-- core.</span><span>
</span><span id="line-245"></span><span id="weave"><span class="annot"><span class="annottext">weave :: Label name
-&gt; ((LooseRope ('(name, binEff) : mantle) core :-&gt; core)
    -&gt; binEff :-&gt; core)
-&gt; LooseRope ('(name, binEff) : mantle) core
   :-&gt; LooseRope mantle core
</span><a href="Control.Kernmantle.Rope.html#weave"><span class="hs-identifier hs-var hs-var">weave</span></a></span></span><span> </span><span class="annot"><span class="annottext">Label name
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679081718"><span class="annot"><span class="annottext">(LooseRope ('(name, binEff) : mantle) core :-&gt; core)
-&gt; binEff :-&gt; core
</span><a href="#local-6989586621679081718"><span class="hs-identifier hs-var">interpFn</span></a></span></span><span> </span><span id="local-6989586621679081717"><span class="annot"><span class="annottext">LooseRope ('(name, binEff) : mantle) core a b
</span><a href="#local-6989586621679081717"><span class="hs-identifier hs-var">rope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Rec (Weaver core) mantle -&gt; core a b) -&gt; Rope Rec mantle core a b
forall (record :: RopeRec) (core :: BinEff) (mantle :: [Strand]) a
       b.
(record (Weaver core) mantle -&gt; core a b)
-&gt; Rope record mantle core a b
</span><a href="Control.Kernmantle.Rope.html#mkRope"><span class="hs-identifier hs-var">mkRope</span></a></span><span> </span><span class="annot"><span class="annottext">((Rec (Weaver core) mantle -&gt; core a b)
 -&gt; Rope Rec mantle core a b)
-&gt; (Rec (Weaver core) mantle -&gt; core a b)
-&gt; Rope Rec mantle core a b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679081716"><span class="annot"><span class="annottext">Rec (Weaver core) mantle
</span><a href="#local-6989586621679081716"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679081715"><span class="hs-identifier hs-type">runThatRope</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679082043"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679082042"><span class="hs-identifier hs-type">binEff</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679082041"><span class="hs-identifier hs-type">mantle</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679082040"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679082040"><span class="hs-identifier hs-type">core</span></a></span><span>
</span><span id="line-247"></span><span>      </span><span id="local-6989586621679081715"><span class="annot"><span class="annottext">runThatRope :: LooseRope ('(name, binEff) : mantle) core a b -&gt; core a b
</span><a href="#local-6989586621679081715"><span class="hs-identifier hs-var hs-var">runThatRope</span></a></span></span><span> </span><span id="local-6989586621679081714"><span class="annot"><span class="annottext">LooseRope ('(name, binEff) : mantle) core a b
</span><a href="#local-6989586621679081714"><span class="hs-identifier hs-var">rope'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-248"></span><span>        </span><span class="annot"><span class="annottext">LooseRope ('(name, binEff) : mantle) core a b
-&gt; Rec (Weaver core) ('(name, binEff) : mantle) -&gt; core a b
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b.
Rope record mantle core a b
-&gt; record (Weaver core) mantle -&gt; core a b
</span><a href="Control.Kernmantle.Rope.html#runRope"><span class="hs-identifier hs-var">runRope</span></a></span><span> </span><span class="annot"><span class="annottext">LooseRope ('(name, binEff) : mantle) core a b
</span><a href="#local-6989586621679081714"><span class="hs-identifier hs-var">rope'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StrandEff '(name, binEff) :-&gt; core) -&gt; Weaver core '(name, binEff)
forall (interp :: BinEff) (strand :: Strand).
(forall a b. StrandEff strand a b -&gt; interp a b)
-&gt; Weaver interp strand
</span><a href="Control.Kernmantle.Rope.Internal.html#Weaver"><span class="hs-identifier hs-var">Weaver</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(LooseRope ('(name, binEff) : mantle) core :-&gt; core)
-&gt; binEff :-&gt; core
</span><a href="#local-6989586621679081718"><span class="hs-identifier hs-var">interpFn</span></a></span><span> </span><span class="annot"><span class="annottext">LooseRope ('(name, binEff) : mantle) core :-&gt; core
</span><a href="#local-6989586621679081715"><span class="hs-identifier hs-var">runThatRope</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Weaver core '(name, binEff)
-&gt; Rec (Weaver core) mantle
-&gt; Rec (Weaver core) ('(name, binEff) : mantle)
forall u (a :: u -&gt; *) (r :: u) (rs :: [u]).
a r -&gt; Rec a rs -&gt; Rec a (r : rs)
</span><span class="hs-operator hs-var">:&amp;</span></span><span> </span><span class="annot"><span class="annottext">Rec (Weaver core) mantle
</span><a href="#local-6989586621679081716"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">LooseRope ('(name, binEff) : mantle) core a b -&gt; core a b
LooseRope ('(name, binEff) : mantle) core :-&gt; core
</span><a href="#local-6989586621679081715"><span class="hs-identifier hs-var">runThatRope</span></a></span><span> </span><span class="annot"><span class="annottext">LooseRope ('(name, binEff) : mantle) core a b
</span><a href="#local-6989586621679081717"><span class="hs-identifier hs-var">rope</span></a></span><span>
</span><span id="line-250"></span><span>
</span><span id="line-251"></span><span class="hs-comment">-- | A version of 'weave' where the strand can be directly interpreted in the</span><span>
</span><span id="line-252"></span><span class="hs-comment">-- core with no need to trigger other effects. For example, given an effect</span><span>
</span><span id="line-253"></span><span class="hs-comment">-- @Eff@, whose label is &quot;effect&quot; being interpreted in a core effect @CoreEff@,</span><span>
</span><span id="line-254"></span><span class="hs-comment">-- one first defines an interpretation function:</span><span>
</span><span id="line-255"></span><span class="hs-comment">--</span><span>
</span><span id="line-256"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-257"></span><span class="hs-comment">--   interpret :: Eff a b -&gt; CoreEff a b</span><span>
</span><span id="line-258"></span><span class="hs-comment">--   interpret :: Eff :-&gt; CoreEff</span><span>
</span><span id="line-259"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-260"></span><span class="hs-comment">--</span><span>
</span><span id="line-261"></span><span class="hs-comment">-- and obtain an interpreter for the strand:</span><span>
</span><span id="line-262"></span><span class="hs-comment">--</span><span>
</span><span id="line-263"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-264"></span><span class="hs-comment">--   strandInterpreter ::</span><span>
</span><span id="line-265"></span><span class="hs-comment">--     LooseRope ('(&quot;effect&quot;,Eff) ': mantle) CoreEff :-&gt;</span><span>
</span><span id="line-266"></span><span class="hs-comment">--     LooseRope mantle CoreEff</span><span>
</span><span id="line-267"></span><span class="hs-comment">--   strandInterpreter = weave' #effect interpret</span><span>
</span><span id="line-268"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-269"></span><span class="hs-comment">--</span><span>
</span><span id="line-270"></span><span class="annot"><a href="Control.Kernmantle.Rope.html#weave%27"><span class="hs-identifier hs-type">weave'</span></a></span><span>
</span><span id="line-271"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679082026"><span class="annot"><a href="#local-6989586621679082026"><span class="hs-identifier hs-type">name</span></a></span></span><span> </span><span id="local-6989586621679082025"><span class="annot"><a href="#local-6989586621679082025"><span class="hs-identifier hs-type">binEff</span></a></span></span><span> </span><span id="local-6989586621679082023"><span class="annot"><a href="#local-6989586621679082023"><span class="hs-identifier hs-type">mantle</span></a></span></span><span> </span><span id="local-6989586621679082024"><span class="annot"><a href="#local-6989586621679082024"><span class="hs-identifier hs-type">core</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-272"></span><span>     </span><span class="annot"><span class="hs-identifier hs-type">Label</span></span><span> </span><span class="annot"><a href="#local-6989586621679082026"><span class="hs-identifier hs-type">name</span></a></span><span>
</span><span id="line-273"></span><span>  </span><span class="hs-comment">-- ^ The name of the strand to be woven.</span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679082025"><span class="hs-identifier hs-type">binEff</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679082024"><span class="hs-identifier hs-type">core</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>  </span><span class="hs-comment">-- ^ The interpretation function for the effect.</span><span>
</span><span id="line-276"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679082026"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679082025"><span class="hs-identifier hs-type">binEff</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679082023"><span class="hs-identifier hs-type">mantle</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679082024"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082023"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082024"><span class="hs-identifier hs-type">core</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>  </span><span class="hs-comment">-- ^ An interpretation function for a 'Rope' with containing the given effect</span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-comment">-- strand, transformed into the same Rope but with that effect woven in the</span><span>
</span><span id="line-279"></span><span>  </span><span class="hs-comment">-- core.</span><span>
</span><span id="line-280"></span><span id="weave%27"><span class="annot"><span class="annottext">weave' :: Label name
-&gt; (binEff :-&gt; core)
-&gt; LooseRope ('(name, binEff) : mantle) core
   :-&gt; LooseRope mantle core
</span><a href="Control.Kernmantle.Rope.html#weave%27"><span class="hs-identifier hs-var hs-var">weave'</span></a></span></span><span> </span><span id="local-6989586621679081712"><span class="annot"><span class="annottext">Label name
</span><a href="#local-6989586621679081712"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span id="local-6989586621679081711"><span class="annot"><span class="annottext">binEff :-&gt; core
</span><a href="#local-6989586621679081711"><span class="hs-identifier hs-var">interpFn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Label name
-&gt; ((LooseRope ('(name, binEff) : mantle) core :-&gt; core)
    -&gt; binEff :-&gt; core)
-&gt; LooseRope ('(name, binEff) : mantle) core
   :-&gt; LooseRope mantle core
forall (name :: Symbol) (binEff :: BinEff) (mantle :: [Strand])
       (core :: BinEff).
Label name
-&gt; ((LooseRope ('(name, binEff) : mantle) core :-&gt; core)
    -&gt; binEff :-&gt; core)
-&gt; LooseRope ('(name, binEff) : mantle) core
   :-&gt; LooseRope mantle core
</span><a href="Control.Kernmantle.Rope.html#weave"><span class="hs-identifier hs-var">weave</span></a></span><span> </span><span class="annot"><span class="annottext">Label name
</span><a href="#local-6989586621679081712"><span class="hs-identifier hs-var">lbl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(binEff a b -&gt; core a b)
-&gt; (LooseRope ('(name, binEff) : mantle) core Any Any
    -&gt; core Any Any)
-&gt; binEff a b
-&gt; core a b
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">binEff a b -&gt; core a b
binEff :-&gt; core
</span><a href="#local-6989586621679081711"><span class="hs-identifier hs-var">interpFn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#weave%27"><span class="hs-pragma hs-type">weave'</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="hs-comment">-- | A shortcut for 'weave'' when your core 'HasKleisli'</span><span>
</span><span id="line-284"></span><span id="local-6989586621679081705"><span id="local-6989586621679081706"><span id="local-6989586621679081707"><span id="local-6989586621679081708"><span id="local-6989586621679081709"><span class="annot"><a href="Control.Kernmantle.Rope.html#weaveK"><span class="hs-identifier hs-type">weaveK</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Profunctor.Trans.html#HasKleisli"><span class="hs-identifier hs-type">HasKleisli</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081709"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081708"><span class="hs-identifier hs-type">core</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-285"></span><span>       </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Label</span></span><span> </span><span class="annot"><a href="#local-6989586621679081707"><span class="hs-identifier hs-type">name</span></a></span><span>
</span><span id="line-286"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679082033"><span class="annot"><a href="#local-6989586621679082033"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679082032"><span class="annot"><a href="#local-6989586621679082032"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679081706"><span class="hs-identifier hs-type">binEff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082033"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082032"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679082033"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679081709"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082032"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679081707"><span class="hs-identifier hs-type">name</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679081706"><span class="hs-identifier hs-type">binEff</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679081705"><span class="hs-identifier hs-type">mantle</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679081708"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081705"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081708"><span class="hs-identifier hs-type">core</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-288"></span><span id="weaveK"><span class="annot"><span class="annottext">weaveK :: Label name
-&gt; (forall a b. binEff a b -&gt; a -&gt; m b)
-&gt; LooseRope ('(name, binEff) : mantle) core
   :-&gt; LooseRope mantle core
</span><a href="Control.Kernmantle.Rope.html#weaveK"><span class="hs-identifier hs-var hs-var">weaveK</span></a></span></span><span> </span><span id="local-6989586621679081704"><span class="annot"><span class="annottext">Label name
</span><a href="#local-6989586621679081704"><span class="hs-identifier hs-var">lbl</span></a></span></span><span> </span><span id="local-6989586621679081703"><span class="annot"><span class="annottext">forall a b. binEff a b -&gt; a -&gt; m b
</span><a href="#local-6989586621679081703"><span class="hs-identifier hs-var">interpFn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Label name
-&gt; (binEff :-&gt; core)
-&gt; LooseRope ('(name, binEff) : mantle) core
   :-&gt; LooseRope mantle core
forall (name :: Symbol) (binEff :: BinEff) (mantle :: [Strand])
       (core :: BinEff).
Label name
-&gt; (binEff :-&gt; core)
-&gt; LooseRope ('(name, binEff) : mantle) core
   :-&gt; LooseRope mantle core
</span><a href="Control.Kernmantle.Rope.html#weave%27"><span class="hs-identifier hs-var">weave'</span></a></span><span> </span><span class="annot"><span class="annottext">Label name
</span><a href="#local-6989586621679081704"><span class="hs-identifier hs-var">lbl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; m b) -&gt; core a b
forall (m :: * -&gt; *) (eff :: BinEff) a b.
HasKleisli m eff =&gt;
(a -&gt; m b) -&gt; eff a b
</span><a href="Data.Profunctor.Trans.html#liftKleisli"><span class="hs-identifier hs-var">liftKleisli</span></a></span><span> </span><span class="annot"><span class="annottext">((a -&gt; m b) -&gt; core a b)
-&gt; (binEff a b -&gt; a -&gt; m b) -&gt; binEff a b -&gt; core a b
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">binEff a b -&gt; a -&gt; m b
forall a b. binEff a b -&gt; a -&gt; m b
</span><a href="#local-6989586621679081703"><span class="hs-identifier hs-var">interpFn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#weaveK"><span class="hs-pragma hs-type">weaveK</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-290"></span><span>
</span><span id="line-291"></span><span class="hs-comment">-- | Supports 'weaveAll' over any 'Rope'</span><span>
</span><span id="line-292"></span><span class="hs-keyword">class</span><span> </span><span id="WeaveAll"><span class="annot"><a href="Control.Kernmantle.Rope.html#WeaveAll"><span class="hs-identifier hs-var">WeaveAll</span></a></span></span><span> </span><span id="local-6989586621679082010"><span class="annot"><a href="#local-6989586621679082010"><span class="hs-identifier hs-type">mantle</span></a></span></span><span> </span><span id="local-6989586621679082011"><span class="annot"><a href="#local-6989586621679082011"><span class="hs-identifier hs-type">core</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-293"></span><span>  </span><span class="hs-comment">-- | Weaves all the remaining strands in the core, provided a polymorphic-enough</span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-comment">-- interpretation function can be provided.</span><span>
</span><span id="line-295"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-comment">-- This function is notably useful to implement the &quot;Rope-in-Rope&quot; pattern,</span><span>
</span><span id="line-297"></span><span>  </span><span class="hs-comment">-- when a 'Rope' (possibly wrapped in 'Cayley') is used as the code for</span><span>
</span><span id="line-298"></span><span>  </span><span class="hs-comment">-- another 'Rope'. 'weaveAll' in that case permits to transfer all the effects</span><span>
</span><span id="line-299"></span><span>  </span><span class="hs-comment">-- of the outer 'Rope' to the core 'Rope'.</span><span>
</span><span id="line-300"></span><span>  </span><span id="weaveAll"><span class="annot"><a href="Control.Kernmantle.Rope.html#weaveAll"><span class="hs-identifier hs-type">weaveAll</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679082015"><span class="annot"><a href="#local-6989586621679082015"><span class="hs-identifier hs-type">lbl</span></a></span></span><span> </span><span id="local-6989586621679082014"><span class="annot"><a href="#local-6989586621679082014"><span class="hs-identifier hs-type">eff</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679082015"><span class="hs-identifier hs-type">lbl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679082014"><span class="hs-identifier hs-type">eff</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679082011"><span class="hs-identifier hs-type">core</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082010"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679082011"><span class="hs-identifier hs-type">core</span></a></span><span>
</span><span id="line-302"></span><span>          </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679082011"><span class="hs-identifier hs-type">core</span></a></span><span>
</span><span id="line-303"></span><span>
</span><span id="line-304"></span><span id="local-6989586621679081700"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#WeaveAll"><span class="hs-identifier hs-type">WeaveAll</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621679081700"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-305"></span><span>  </span><span id="local-6989586621679081697"><span class="annot"><span class="annottext">weaveAll :: (forall lbl (eff :: BinEff). lbl -&gt; eff :-&gt; core)
-&gt; LooseRope '[] core :-&gt; core
</span><a href="#local-6989586621679081697"><span class="hs-identifier hs-var hs-var hs-var hs-var">weaveAll</span></a></span></span><span> </span><span class="annot"><span class="annottext">forall lbl (eff :: BinEff). lbl -&gt; eff :-&gt; core
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LooseRope '[] core a b -&gt; core a b
forall (core :: BinEff). LooseRope '[] core :-&gt; core
</span><a href="Control.Kernmantle.Rope.html#untwine"><span class="hs-identifier hs-var">untwine</span></a></span><span>
</span><span id="line-306"></span><span>  </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#weaveAll"><span class="hs-pragma hs-type">weaveAll</span></a></span><span> </span><span class="hs-pragma">#-}</span></span><span>
</span><span id="line-307"></span><span>
</span><span id="line-308"></span><span id="local-6989586621679081693"><span id="local-6989586621679081694"><span id="local-6989586621679081695"><span id="local-6989586621679081696"><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPABLE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.html#WeaveAll"><span class="hs-identifier hs-type">WeaveAll</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081696"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081695"><span class="hs-identifier hs-type">core</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-309"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#WeaveAll"><span class="hs-identifier hs-type">WeaveAll</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679081694"><span class="hs-identifier hs-type">name</span></a></span><span class="annot"><span class="hs-operator hs-type">:::</span></span><span class="annot"><a href="#local-6989586621679081693"><span class="hs-identifier hs-type">eff</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679081696"><span class="hs-identifier hs-type">mantle</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679081695"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-310"></span><span>  </span><span id="local-6989586621679081691"><span class="annot"><span class="annottext">weaveAll :: (forall lbl (eff :: BinEff). lbl -&gt; eff :-&gt; core)
-&gt; LooseRope ((name ::: eff) : mantle) core :-&gt; core
</span><a href="#local-6989586621679081691"><span class="hs-identifier hs-var hs-var hs-var hs-var">weaveAll</span></a></span></span><span> </span><span id="local-6989586621679081690"><span class="annot"><span class="annottext">forall lbl (eff :: BinEff). lbl -&gt; eff :-&gt; core
</span><a href="#local-6989586621679081690"><span class="hs-identifier hs-var">interpFn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall lbl (eff :: BinEff). lbl -&gt; eff :-&gt; core)
-&gt; LooseRope mantle core :-&gt; core
forall (mantle :: [Strand]) (core :: BinEff).
WeaveAll mantle core =&gt;
(forall lbl (eff :: BinEff). lbl -&gt; eff :-&gt; core)
-&gt; LooseRope mantle core :-&gt; core
</span><a href="Control.Kernmantle.Rope.html#weaveAll"><span class="hs-identifier hs-var">weaveAll</span></a></span><span> </span><span class="annot"><span class="annottext">forall lbl (eff :: BinEff). lbl -&gt; eff :-&gt; core
</span><a href="#local-6989586621679081690"><span class="hs-identifier hs-var">interpFn</span></a></span><span>
</span><span id="line-311"></span><span>                    </span><span class="annot"><span class="annottext">(LooseRope mantle core a b -&gt; core a b)
-&gt; (LooseRope ((name ::: eff) : mantle) core a b
    -&gt; LooseRope mantle core a b)
-&gt; LooseRope ((name ::: eff) : mantle) core a b
-&gt; core a b
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Label name
-&gt; (eff :-&gt; core)
-&gt; LooseRope ((name ::: eff) : mantle) core
   :-&gt; LooseRope mantle core
forall (name :: Symbol) (binEff :: BinEff) (mantle :: [Strand])
       (core :: BinEff).
Label name
-&gt; (binEff :-&gt; core)
-&gt; LooseRope ('(name, binEff) : mantle) core
   :-&gt; LooseRope mantle core
</span><a href="Control.Kernmantle.Rope.html#weave%27"><span class="hs-identifier hs-var">weave'</span></a></span><span> </span><span class="annot"><span class="annottext">Label name
</span><a href="#local-6989586621679081689"><span class="hs-identifier hs-var">lbl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Label name -&gt; eff :-&gt; core
forall lbl (eff :: BinEff). lbl -&gt; eff :-&gt; core
</span><a href="#local-6989586621679081690"><span class="hs-identifier hs-var">interpFn</span></a></span><span> </span><span class="annot"><span class="annottext">Label name
</span><a href="#local-6989586621679081689"><span class="hs-identifier hs-var">lbl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-312"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679081689"><span class="annot"><span class="annottext">lbl :: Label name
</span><a href="#local-6989586621679081689"><span class="hs-identifier hs-var hs-var">lbl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall a. IsLabel name a =&gt; a
forall (x :: Symbol) a. IsLabel x a =&gt; a
</span><span class="hs-identifier hs-var">fromLabel</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679081694"><span class="hs-identifier hs-type">name</span></a></span></span></span></span></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-comment">-- | Reorders the strands to match some external context. @strands'@ can contain</span><span>
</span><span id="line-315"></span><span class="hs-comment">-- more elements than @strands@. Note it works on both 'TightRope's and</span><span>
</span><span id="line-316"></span><span class="hs-comment">-- 'LooseRope's</span><span>
</span><span id="line-317"></span><span id="local-6989586621679081685"><span id="local-6989586621679081686"><span id="local-6989586621679081687"><span id="local-6989586621679081688"><span class="annot"><a href="Control.Kernmantle.Rope.html#retwine"><span class="hs-identifier hs-type">retwine</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#RetwinableAs"><span class="hs-identifier hs-type">RetwinableAs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081688"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081687"><span class="hs-identifier hs-type">strands</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081686"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081685"><span class="hs-identifier hs-type">strands'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-318"></span><span>        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081688"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081687"><span class="hs-identifier hs-type">strands</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081686"><span class="hs-identifier hs-type">core</span></a></span><span>
</span><span id="line-319"></span><span>       </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#Rope"><span class="hs-identifier hs-type">Rope</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081688"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081685"><span class="hs-identifier hs-type">strands'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679081686"><span class="hs-identifier hs-type">core</span></a></span></span></span></span></span><span>
</span><span id="line-320"></span><span id="retwine"><span class="annot"><span class="annottext">retwine :: Rope r strands core :-&gt; Rope r strands' core
</span><a href="Control.Kernmantle.Rope.html#retwine"><span class="hs-identifier hs-var hs-var">retwine</span></a></span></span><span> </span><span id="local-6989586621679081683"><span class="annot"><span class="annottext">Rope r strands core a b
</span><a href="#local-6989586621679081683"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(r (Weaver core) strands' -&gt; core a b) -&gt; Rope r strands' core a b
forall (record :: RopeRec) (core :: BinEff) (mantle :: [Strand]) a
       b.
(record (Weaver core) mantle -&gt; core a b)
-&gt; Rope record mantle core a b
</span><a href="Control.Kernmantle.Rope.html#mkRope"><span class="hs-identifier hs-var">mkRope</span></a></span><span> </span><span class="annot"><span class="annottext">((r (Weaver core) strands' -&gt; core a b)
 -&gt; Rope r strands' core a b)
-&gt; (r (Weaver core) strands' -&gt; core a b)
-&gt; Rope r strands' core a b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Rope r strands core a b -&gt; r (Weaver core) strands -&gt; core a b
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b.
Rope record mantle core a b
-&gt; record (Weaver core) mantle -&gt; core a b
</span><a href="Control.Kernmantle.Rope.html#runRope"><span class="hs-identifier hs-var">runRope</span></a></span><span> </span><span class="annot"><span class="annottext">Rope r strands core a b
</span><a href="#local-6989586621679081683"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">(r (Weaver core) strands -&gt; core a b)
-&gt; (r (Weaver core) strands' -&gt; r (Weaver core) strands)
-&gt; r (Weaver core) strands'
-&gt; core a b
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r (Weaver core) strands' -&gt; r (Weaver core) strands
forall k1 k2 (rs :: [k1]) (ss :: [k1]) (f :: k2 -&gt; *)
       (record :: (k2 -&gt; *) -&gt; [k1] -&gt; *) (is :: [Nat]).
(RecSubset record rs ss is, RecSubsetFCtx record f) =&gt;
record f ss -&gt; record f rs
</span><span class="hs-identifier hs-var">rcast</span></span><span>
</span><span id="line-321"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#retwine"><span class="hs-pragma hs-type">retwine</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="hs-comment">-- | Merge two strands that have the same effect type. Keeps the first name.</span><span>
</span><span id="line-324"></span><span id="local-6989586621679081677"><span id="local-6989586621679081678"><span id="local-6989586621679081679"><span id="local-6989586621679081680"><span id="local-6989586621679081681"><span class="annot"><a href="Control.Kernmantle.Rope.html#mergeStrands"><span class="hs-identifier hs-type">mergeStrands</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Label</span></span><span> </span><span class="annot"><a href="#local-6989586621679081681"><span class="hs-identifier hs-type">n1</span></a></span><span>
</span><span id="line-325"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Label</span></span><span> </span><span class="annot"><a href="#local-6989586621679081680"><span class="hs-identifier hs-type">n2</span></a></span><span>
</span><span id="line-326"></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679081681"><span class="hs-identifier hs-type">n1</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679081679"><span class="hs-identifier hs-type">binEff</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679081680"><span class="hs-identifier hs-type">n2</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679081679"><span class="hs-identifier hs-type">binEff</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679081678"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679081677"><span class="hs-identifier hs-type">core</span></a></span><span>
</span><span id="line-327"></span><span>            </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-special">'</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679081681"><span class="hs-identifier hs-type">n1</span></a></span><span class="hs-special">,</span><span class="annot"><a href="#local-6989586621679081679"><span class="hs-identifier hs-type">binEff</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">'</span><span class="hs-glyph">:</span><span> </span><span class="annot"><a href="#local-6989586621679081678"><span class="hs-identifier hs-type">mantle</span></a></span><span> </span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679081677"><span class="hs-identifier hs-type">core</span></a></span></span></span></span></span></span><span>
</span><span id="line-328"></span><span id="mergeStrands"><span class="annot"><span class="annottext">mergeStrands :: Label n1
-&gt; Label n2
-&gt; LooseRope ('(n1, binEff) : '(n2, binEff) : mantle) core
   :-&gt; LooseRope ('(n1, binEff) : mantle) core
</span><a href="Control.Kernmantle.Rope.html#mergeStrands"><span class="hs-identifier hs-var hs-var">mergeStrands</span></a></span></span><span> </span><span class="annot"><span class="annottext">Label n1
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Label n2
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679081676"><span class="annot"><span class="annottext">LooseRope ('(n1, binEff) : '(n2, binEff) : mantle) core a b
</span><a href="#local-6989586621679081676"><span class="hs-identifier hs-var">rope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Rec (Weaver core) ('(n1, binEff) : mantle) -&gt; core a b)
-&gt; Rope Rec ('(n1, binEff) : mantle) core a b
forall (record :: RopeRec) (core :: BinEff) (mantle :: [Strand]) a
       b.
(record (Weaver core) mantle -&gt; core a b)
-&gt; Rope record mantle core a b
</span><a href="Control.Kernmantle.Rope.html#mkRope"><span class="hs-identifier hs-var">mkRope</span></a></span><span> </span><span class="annot"><span class="annottext">((Rec (Weaver core) ('(n1, binEff) : mantle) -&gt; core a b)
 -&gt; Rope Rec ('(n1, binEff) : mantle) core a b)
-&gt; (Rec (Weaver core) ('(n1, binEff) : mantle) -&gt; core a b)
-&gt; Rope Rec ('(n1, binEff) : mantle) core a b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679081675"><span class="annot"><span class="annottext">r :: Weaver core r
</span><a href="#local-6989586621679081675"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Control.Kernmantle.Rope.Internal.html#Weaver"><span class="hs-identifier hs-type">Weaver</span></a></span><span> </span><span id="local-6989586621679081674"><span class="annot"><span class="annottext">StrandEff r :-&gt; core
</span><a href="#local-6989586621679081674"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">:&amp;</span></span><span> </span><span id="local-6989586621679081673"><span class="annot"><span class="annottext">Rec (Weaver core) rs
</span><a href="#local-6989586621679081673"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-329"></span><span>  </span><span class="annot"><span class="annottext">LooseRope ('(n1, binEff) : '(n2, binEff) : mantle) core a b
-&gt; Rec (Weaver core) ('(n1, binEff) : '(n2, binEff) : mantle)
-&gt; core a b
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b.
Rope record mantle core a b
-&gt; record (Weaver core) mantle -&gt; core a b
</span><a href="Control.Kernmantle.Rope.html#runRope"><span class="hs-identifier hs-var">runRope</span></a></span><span> </span><span class="annot"><span class="annottext">LooseRope ('(n1, binEff) : '(n2, binEff) : mantle) core a b
</span><a href="#local-6989586621679081676"><span class="hs-identifier hs-var">rope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Weaver core r
</span><a href="#local-6989586621679081675"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Weaver core r
-&gt; Rec (Weaver core) ('(n2, binEff) : rs)
-&gt; Rec (Weaver core) (r : '(n2, binEff) : rs)
forall u (a :: u -&gt; *) (r :: u) (rs :: [u]).
a r -&gt; Rec a rs -&gt; Rec a (r : rs)
</span><span class="hs-operator hs-var">:&amp;</span></span><span> </span><span class="annot"><span class="annottext">(StrandEff '(n2, binEff) :-&gt; core) -&gt; Weaver core '(n2, binEff)
forall (interp :: BinEff) (strand :: Strand).
(forall a b. StrandEff strand a b -&gt; interp a b)
-&gt; Weaver interp strand
</span><a href="Control.Kernmantle.Rope.Internal.html#Weaver"><span class="hs-identifier hs-var">Weaver</span></a></span><span> </span><span class="annot"><span class="annottext">StrandEff r :-&gt; core
StrandEff '(n2, binEff) :-&gt; core
</span><a href="#local-6989586621679081674"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="annot"><span class="annottext">Weaver core '(n2, binEff)
-&gt; Rec (Weaver core) rs -&gt; Rec (Weaver core) ('(n2, binEff) : rs)
forall u (a :: u -&gt; *) (r :: u) (rs :: [u]).
a r -&gt; Rec a rs -&gt; Rec a (r : rs)
</span><span class="hs-operator hs-var">:&amp;</span></span><span> </span><span class="annot"><span class="annottext">Rec (Weaver core) rs
</span><a href="#local-6989586621679081673"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#mergeStrands"><span class="hs-pragma hs-type">mergeStrands</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-331"></span><span>
</span><span id="line-332"></span><span class="hs-comment">-- | Strips a 'Rope' of its empty mantle. Usually the last step of the</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- interpretation of a 'Rope'.</span><span>
</span><span id="line-334"></span><span id="local-6989586621679082007"><span class="annot"><a href="Control.Kernmantle.Rope.html#untwine"><span class="hs-identifier hs-type">untwine</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#LooseRope"><span class="hs-identifier hs-type">LooseRope</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><a href="#local-6989586621679082007"><span class="hs-identifier hs-type">core</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">:-&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621679082007"><span class="hs-identifier hs-type">core</span></a></span></span><span>
</span><span id="line-335"></span><span id="untwine"><span class="annot"><span class="annottext">untwine :: LooseRope '[] core a b -&gt; core a b
</span><a href="Control.Kernmantle.Rope.html#untwine"><span class="hs-identifier hs-var hs-var">untwine</span></a></span></span><span> </span><span id="local-6989586621679081672"><span class="annot"><span class="annottext">LooseRope '[] core a b
</span><a href="#local-6989586621679081672"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LooseRope '[] core a b -&gt; Rec (Weaver core) '[] -&gt; core a b
forall (record :: RopeRec) (mantle :: [Strand]) (core :: BinEff) a
       b.
Rope record mantle core a b
-&gt; record (Weaver core) mantle -&gt; core a b
</span><a href="Control.Kernmantle.Rope.html#runRope"><span class="hs-identifier hs-var">runRope</span></a></span><span> </span><span class="annot"><span class="annottext">LooseRope '[] core a b
</span><a href="#local-6989586621679081672"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Rec (Weaver core) '[]
forall u (a :: u -&gt; *). Rec a '[]
</span><span class="hs-identifier hs-var">RNil</span></span><span>
</span><span id="line-336"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Control.Kernmantle.Rope.html#untwine"><span class="hs-pragma hs-type">untwine</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-337"></span></pre></body></html>